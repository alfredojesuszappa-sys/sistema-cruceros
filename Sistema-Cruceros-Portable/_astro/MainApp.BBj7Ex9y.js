import{r as f}from"./index.RH_Wq4ov.js";var dt={exports:{}},Pe={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nt;function wa(){if(Nt)return Pe;Nt=1;var r=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(a,o,s){var p=null;if(s!==void 0&&(p=""+s),o.key!==void 0&&(p=""+o.key),"key"in o){s={};for(var d in o)d!=="key"&&(s[d]=o[d])}else s=o;return o=s.ref,{$$typeof:r,type:a,key:p,ref:o!==void 0?o:null,props:s}}return Pe.Fragment=t,Pe.jsx=n,Pe.jsxs=n,Pe}var zt;function ka(){return zt||(zt=1,dt.exports=wa()),dt.exports}var e=ka();/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ea=r=>r.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Ia=r=>r.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,a)=>a?a.toUpperCase():n.toLowerCase()),Dt=r=>{const t=Ia(r);return t.charAt(0).toUpperCase()+t.slice(1)},Vt=(...r)=>r.filter((t,n,a)=>!!t&&t.trim()!==""&&a.indexOf(t)===n).join(" ").trim(),Ma=r=>{for(const t in r)if(t.startsWith("aria-")||t==="role"||t==="title")return!0};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ra={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ta=f.forwardRef(({color:r="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:a,className:o="",children:s,iconNode:p,...d},h)=>f.createElement("svg",{ref:h,...Ra,width:t,height:t,stroke:r,strokeWidth:a?Number(n)*24/Number(t):n,className:Vt("lucide",o),...!s&&!Ma(d)&&{"aria-hidden":"true"},...d},[...p.map(([g,S])=>f.createElement(g,S)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=(r,t)=>{const n=f.forwardRef(({className:a,...o},s)=>f.createElement(Ta,{ref:s,iconNode:t,className:Vt(`lucide-${Ea(Dt(r))}`,`lucide-${r}`,a),...o}));return n.displayName=Dt(r),n};/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Na=[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]],Ce=$("anchor",Na);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const za=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Da=$("bell",za);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Oa=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Kt=$("book-open",Oa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pa=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],We=$("calendar",Pa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ba=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],qa=$("chart-column",Ba);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],vt=$("circle-alert",Wa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _a=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bt=$("clock",_a);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ha=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],La=$("database",Ha);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $a=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],Ze=$("download",$a);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Va=$("file-text",Fa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ka=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],ct=$("history",Ka);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ja=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],Ua=$("layout-dashboard",Ja);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ya=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Ga=$("pen",Ya);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Za=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],jt=$("plus",Za);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qa=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],Xe=$("save",Qa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xa=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],Ct=$("search",Xa);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const er=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],Se=$("ship",er);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],St=$("square-pen",tr);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ar=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],At=$("trash-2",ar);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],nr=$("trending-up",rr);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const or=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],je=$("triangle-alert",or);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ir=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],sr=$("upload",ir);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],pt=$("users",lr);/**
 * @license lucide-react v0.533.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dr=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],be=$("x",dr),Jt=6048e5,cr=864e5,Ut=36e5,Ot=Symbol.for("constructDateFrom");function ge(r,t){return typeof r=="function"?r(t):r&&typeof r=="object"&&Ot in r?r[Ot](t):r instanceof Date?new r.constructor(t):new Date(t)}function oe(r,t){return ge(t||r,r)}function pr(r,t,n){return ge(r,+oe(r)+t)}function yt(r,t,n){return pr(r,t*Ut)}let ur={};function et(){return ur}function _e(r,t){const n=et(),a=t?.weekStartsOn??t?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,o=oe(r,t?.in),s=o.getDay(),p=(s<a?7:0)+s-a;return o.setDate(o.getDate()-p),o.setHours(0,0,0,0),o}function Qe(r,t){return _e(r,{...t,weekStartsOn:1})}function Yt(r,t){const n=oe(r,t?.in),a=n.getFullYear(),o=ge(n,0);o.setFullYear(a+1,0,4),o.setHours(0,0,0,0);const s=Qe(o),p=ge(n,0);p.setFullYear(a,0,4),p.setHours(0,0,0,0);const d=Qe(p);return n.getTime()>=s.getTime()?a+1:n.getTime()>=d.getTime()?a:a-1}function Pt(r){const t=oe(r),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+r-+n}function Gt(r,...t){const n=ge.bind(null,t.find(a=>typeof a=="object"));return t.map(n)}function Bt(r,t){const n=oe(r,t?.in);return n.setHours(0,0,0,0),n}function xr(r,t,n){const[a,o]=Gt(n?.in,r,t),s=Bt(a),p=Bt(o),d=+s-Pt(s),h=+p-Pt(p);return Math.round((d-h)/cr)}function gr(r,t){const n=Yt(r,t),a=ge(r,0);return a.setFullYear(n,0,4),a.setHours(0,0,0,0),Qe(a)}function hr(r){return r instanceof Date||typeof r=="object"&&Object.prototype.toString.call(r)==="[object Date]"}function mr(r){return!(!hr(r)&&typeof r!="number"||isNaN(+oe(r)))}function fr(r){return t=>{const a=(r?Math[r]:Math.trunc)(t);return a===0?0:a}}function br(r,t,n){const[a,o]=Gt(n?.in,r,t),s=(+a-+o)/Ut;return fr(n?.roundingMethod)(s)}function yr(r,t){const n=oe(r,t?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const vr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},jr=(r,t,n)=>{let a;const o=vr[r];return typeof o=="string"?a=o:t===1?a=o.one:a=o.other.replace("{{count}}",t.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+a:a+" ago":a};function ut(r){return(t={})=>{const n=t.width?String(t.width):r.defaultWidth;return r.formats[n]||r.formats[r.defaultWidth]}}const Cr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Sr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Ar={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},wr={date:ut({formats:Cr,defaultWidth:"full"}),time:ut({formats:Sr,defaultWidth:"full"}),dateTime:ut({formats:Ar,defaultWidth:"full"})},kr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Er=(r,t,n,a)=>kr[r];function Be(r){return(t,n)=>{const a=n?.context?String(n.context):"standalone";let o;if(a==="formatting"&&r.formattingValues){const p=r.defaultFormattingWidth||r.defaultWidth,d=n?.width?String(n.width):p;o=r.formattingValues[d]||r.formattingValues[p]}else{const p=r.defaultWidth,d=n?.width?String(n.width):r.defaultWidth;o=r.values[d]||r.values[p]}const s=r.argumentCallback?r.argumentCallback(t):t;return o[s]}}const Ir={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Mr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Rr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Tr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Nr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},Dr=(r,t)=>{const n=Number(r),a=n%100;if(a>20||a<10)switch(a%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},Or={ordinalNumber:Dr,era:Be({values:Ir,defaultWidth:"wide"}),quarter:Be({values:Mr,defaultWidth:"wide",argumentCallback:r=>r-1}),month:Be({values:Rr,defaultWidth:"wide"}),day:Be({values:Tr,defaultWidth:"wide"}),dayPeriod:Be({values:Nr,defaultWidth:"wide",formattingValues:zr,defaultFormattingWidth:"wide"})};function qe(r){return(t,n={})=>{const a=n.width,o=a&&r.matchPatterns[a]||r.matchPatterns[r.defaultMatchWidth],s=t.match(o);if(!s)return null;const p=s[0],d=a&&r.parsePatterns[a]||r.parsePatterns[r.defaultParseWidth],h=Array.isArray(d)?Br(d,A=>A.test(p)):Pr(d,A=>A.test(p));let g;g=r.valueCallback?r.valueCallback(h):h,g=n.valueCallback?n.valueCallback(g):g;const S=t.slice(p.length);return{value:g,rest:S}}}function Pr(r,t){for(const n in r)if(Object.prototype.hasOwnProperty.call(r,n)&&t(r[n]))return n}function Br(r,t){for(let n=0;n<r.length;n++)if(t(r[n]))return n}function qr(r){return(t,n={})=>{const a=t.match(r.matchPattern);if(!a)return null;const o=a[0],s=t.match(r.parsePattern);if(!s)return null;let p=r.valueCallback?r.valueCallback(s[0]):s[0];p=n.valueCallback?n.valueCallback(p):p;const d=t.slice(o.length);return{value:p,rest:d}}}const Wr=/^(\d+)(th|st|nd|rd)?/i,_r=/\d+/i,Hr={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},Lr={any:[/^b/i,/^(a|c)/i]},$r={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},Fr={any:[/1/i,/2/i,/3/i,/4/i]},Vr={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Kr={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Jr={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Ur={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Yr={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Gr={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Zr={ordinalNumber:qr({matchPattern:Wr,parsePattern:_r,valueCallback:r=>parseInt(r,10)}),era:qe({matchPatterns:Hr,defaultMatchWidth:"wide",parsePatterns:Lr,defaultParseWidth:"any"}),quarter:qe({matchPatterns:$r,defaultMatchWidth:"wide",parsePatterns:Fr,defaultParseWidth:"any",valueCallback:r=>r+1}),month:qe({matchPatterns:Vr,defaultMatchWidth:"wide",parsePatterns:Kr,defaultParseWidth:"any"}),day:qe({matchPatterns:Jr,defaultMatchWidth:"wide",parsePatterns:Ur,defaultParseWidth:"any"}),dayPeriod:qe({matchPatterns:Yr,defaultMatchWidth:"any",parsePatterns:Gr,defaultParseWidth:"any"})},Qr={code:"en-US",formatDistance:jr,formatLong:wr,formatRelative:Er,localize:Or,match:Zr,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Xr(r,t){const n=oe(r,t?.in);return xr(n,yr(n))+1}function en(r,t){const n=oe(r,t?.in),a=+Qe(n)-+gr(n);return Math.round(a/Jt)+1}function Zt(r,t){const n=oe(r,t?.in),a=n.getFullYear(),o=et(),s=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,p=ge(t?.in||r,0);p.setFullYear(a+1,0,s),p.setHours(0,0,0,0);const d=_e(p,t),h=ge(t?.in||r,0);h.setFullYear(a,0,s),h.setHours(0,0,0,0);const g=_e(h,t);return+n>=+d?a+1:+n>=+g?a:a-1}function tn(r,t){const n=et(),a=t?.firstWeekContainsDate??t?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,o=Zt(r,t),s=ge(t?.in||r,0);return s.setFullYear(o,0,a),s.setHours(0,0,0,0),_e(s,t)}function an(r,t){const n=oe(r,t?.in),a=+_e(n,t)-+tn(n,t);return Math.round(a/Jt)+1}function _(r,t){const n=r<0?"-":"",a=Math.abs(r).toString().padStart(t,"0");return n+a}const me={y(r,t){const n=r.getFullYear(),a=n>0?n:1-n;return _(t==="yy"?a%100:a,t.length)},M(r,t){const n=r.getMonth();return t==="M"?String(n+1):_(n+1,2)},d(r,t){return _(r.getDate(),t.length)},a(r,t){const n=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(r,t){return _(r.getHours()%12||12,t.length)},H(r,t){return _(r.getHours(),t.length)},m(r,t){return _(r.getMinutes(),t.length)},s(r,t){return _(r.getSeconds(),t.length)},S(r,t){const n=t.length,a=r.getMilliseconds(),o=Math.trunc(a*Math.pow(10,n-3));return _(o,t.length)}},ke={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},qt={G:function(r,t,n){const a=r.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(a,{width:"abbreviated"});case"GGGGG":return n.era(a,{width:"narrow"});case"GGGG":default:return n.era(a,{width:"wide"})}},y:function(r,t,n){if(t==="yo"){const a=r.getFullYear(),o=a>0?a:1-a;return n.ordinalNumber(o,{unit:"year"})}return me.y(r,t)},Y:function(r,t,n,a){const o=Zt(r,a),s=o>0?o:1-o;if(t==="YY"){const p=s%100;return _(p,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):_(s,t.length)},R:function(r,t){const n=Yt(r);return _(n,t.length)},u:function(r,t){const n=r.getFullYear();return _(n,t.length)},Q:function(r,t,n){const a=Math.ceil((r.getMonth()+1)/3);switch(t){case"Q":return String(a);case"QQ":return _(a,2);case"Qo":return n.ordinalNumber(a,{unit:"quarter"});case"QQQ":return n.quarter(a,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(a,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(a,{width:"wide",context:"formatting"})}},q:function(r,t,n){const a=Math.ceil((r.getMonth()+1)/3);switch(t){case"q":return String(a);case"qq":return _(a,2);case"qo":return n.ordinalNumber(a,{unit:"quarter"});case"qqq":return n.quarter(a,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(a,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(a,{width:"wide",context:"standalone"})}},M:function(r,t,n){const a=r.getMonth();switch(t){case"M":case"MM":return me.M(r,t);case"Mo":return n.ordinalNumber(a+1,{unit:"month"});case"MMM":return n.month(a,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(a,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(a,{width:"wide",context:"formatting"})}},L:function(r,t,n){const a=r.getMonth();switch(t){case"L":return String(a+1);case"LL":return _(a+1,2);case"Lo":return n.ordinalNumber(a+1,{unit:"month"});case"LLL":return n.month(a,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(a,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(a,{width:"wide",context:"standalone"})}},w:function(r,t,n,a){const o=an(r,a);return t==="wo"?n.ordinalNumber(o,{unit:"week"}):_(o,t.length)},I:function(r,t,n){const a=en(r);return t==="Io"?n.ordinalNumber(a,{unit:"week"}):_(a,t.length)},d:function(r,t,n){return t==="do"?n.ordinalNumber(r.getDate(),{unit:"date"}):me.d(r,t)},D:function(r,t,n){const a=Xr(r);return t==="Do"?n.ordinalNumber(a,{unit:"dayOfYear"}):_(a,t.length)},E:function(r,t,n){const a=r.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(a,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(a,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(a,{width:"short",context:"formatting"});case"EEEE":default:return n.day(a,{width:"wide",context:"formatting"})}},e:function(r,t,n,a){const o=r.getDay(),s=(o-a.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return _(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(o,{width:"short",context:"formatting"});case"eeee":default:return n.day(o,{width:"wide",context:"formatting"})}},c:function(r,t,n,a){const o=r.getDay(),s=(o-a.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return _(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(o,{width:"narrow",context:"standalone"});case"cccccc":return n.day(o,{width:"short",context:"standalone"});case"cccc":default:return n.day(o,{width:"wide",context:"standalone"})}},i:function(r,t,n){const a=r.getDay(),o=a===0?7:a;switch(t){case"i":return String(o);case"ii":return _(o,t.length);case"io":return n.ordinalNumber(o,{unit:"day"});case"iii":return n.day(a,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(a,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(a,{width:"short",context:"formatting"});case"iiii":default:return n.day(a,{width:"wide",context:"formatting"})}},a:function(r,t,n){const o=r.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(r,t,n){const a=r.getHours();let o;switch(a===12?o=ke.noon:a===0?o=ke.midnight:o=a/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(r,t,n){const a=r.getHours();let o;switch(a>=17?o=ke.evening:a>=12?o=ke.afternoon:a>=4?o=ke.morning:o=ke.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(r,t,n){if(t==="ho"){let a=r.getHours()%12;return a===0&&(a=12),n.ordinalNumber(a,{unit:"hour"})}return me.h(r,t)},H:function(r,t,n){return t==="Ho"?n.ordinalNumber(r.getHours(),{unit:"hour"}):me.H(r,t)},K:function(r,t,n){const a=r.getHours()%12;return t==="Ko"?n.ordinalNumber(a,{unit:"hour"}):_(a,t.length)},k:function(r,t,n){let a=r.getHours();return a===0&&(a=24),t==="ko"?n.ordinalNumber(a,{unit:"hour"}):_(a,t.length)},m:function(r,t,n){return t==="mo"?n.ordinalNumber(r.getMinutes(),{unit:"minute"}):me.m(r,t)},s:function(r,t,n){return t==="so"?n.ordinalNumber(r.getSeconds(),{unit:"second"}):me.s(r,t)},S:function(r,t){return me.S(r,t)},X:function(r,t,n){const a=r.getTimezoneOffset();if(a===0)return"Z";switch(t){case"X":return _t(a);case"XXXX":case"XX":return ve(a);case"XXXXX":case"XXX":default:return ve(a,":")}},x:function(r,t,n){const a=r.getTimezoneOffset();switch(t){case"x":return _t(a);case"xxxx":case"xx":return ve(a);case"xxxxx":case"xxx":default:return ve(a,":")}},O:function(r,t,n){const a=r.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Wt(a,":");case"OOOO":default:return"GMT"+ve(a,":")}},z:function(r,t,n){const a=r.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Wt(a,":");case"zzzz":default:return"GMT"+ve(a,":")}},t:function(r,t,n){const a=Math.trunc(+r/1e3);return _(a,t.length)},T:function(r,t,n){return _(+r,t.length)}};function Wt(r,t=""){const n=r>0?"-":"+",a=Math.abs(r),o=Math.trunc(a/60),s=a%60;return s===0?n+String(o):n+String(o)+t+_(s,2)}function _t(r,t){return r%60===0?(r>0?"-":"+")+_(Math.abs(r)/60,2):ve(r,t)}function ve(r,t=""){const n=r>0?"-":"+",a=Math.abs(r),o=_(Math.trunc(a/60),2),s=_(a%60,2);return n+o+t+s}const Ht=(r,t)=>{switch(r){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Qt=(r,t)=>{switch(r){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},rn=(r,t)=>{const n=r.match(/(P+)(p+)?/)||[],a=n[1],o=n[2];if(!o)return Ht(r,t);let s;switch(a){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Ht(a,t)).replace("{{time}}",Qt(o,t))},nn={p:Qt,P:rn},on=/^D+$/,sn=/^Y+$/,ln=["D","DD","YY","YYYY"];function dn(r){return on.test(r)}function cn(r){return sn.test(r)}function pn(r,t,n){const a=un(r,t,n);if(console.warn(a),ln.includes(r))throw new RangeError(a)}function un(r,t,n){const a=r[0]==="Y"?"years":"days of the month";return`Use \`${r.toLowerCase()}\` instead of \`${r}\` (in \`${t}\`) for formatting ${a} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const xn=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,gn=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hn=/^'([^]*?)'?$/,mn=/''/g,fn=/[a-zA-Z]/;function v(r,t,n){const a=et(),o=a.locale??Qr,s=a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,p=a.weekStartsOn??a.locale?.options?.weekStartsOn??0,d=oe(r,n?.in);if(!mr(d))throw new RangeError("Invalid time value");let h=t.match(gn).map(S=>{const A=S[0];if(A==="p"||A==="P"){const M=nn[A];return M(S,o.formatLong)}return S}).join("").match(xn).map(S=>{if(S==="''")return{isToken:!1,value:"'"};const A=S[0];if(A==="'")return{isToken:!1,value:bn(S)};if(qt[A])return{isToken:!0,value:S};if(A.match(fn))throw new RangeError("Format string contains an unescaped latin alphabet character `"+A+"`");return{isToken:!1,value:S}});o.localize.preprocessor&&(h=o.localize.preprocessor(d,h));const g={firstWeekContainsDate:s,weekStartsOn:p,locale:o};return h.map(S=>{if(!S.isToken)return S.value;const A=S.value;(cn(A)||dn(A))&&pn(A,t,String(r));const M=qt[A[0]];return M(d,A,o.localize,g)}).join("")}function bn(r){const t=r.match(hn);return t?t[1].replace(mn,"'"):r}function Lt(r,t){return+oe(r)<+oe(t)}function xt(r,t,n){return yt(r,-t)}const ee={KM239_TO_KM118_5:280,KM216_TO_KM118_5:250,KM118_5_TO_KM59:150,KM59_TO_KM37:78,KM37_TO_KM7_3:106,KM7_3_TO_KM0:26,AMARRE:30},pe={KM0_TO_KM59:200,KM59_TO_KM77:105,KM77_TO_KM118_5:105,KM118_5_TO_KM216:270,KM118_5_TO_KM239:300};function se(r){return r>=8.84?"A":r>7.32?"B":"C"}function O(r,t){return new Date(r.getTime()+t*6e4)}function ue(r,t){const n=se(r.calado),a={};switch(n){case"A":a.km239=t,a.km118_5=O(t,ee.KM239_TO_KM118_5),a.km59=O(a.km118_5,ee.KM118_5_TO_KM59),a.km37=O(a.km59,ee.KM59_TO_KM37),a.km7_3=O(a.km37,ee.KM37_TO_KM7_3),a.km0=O(a.km7_3,ee.KM7_3_TO_KM0),a.etaPto=O(a.km0,ee.AMARRE);break;case"B":a.km216=t,a.km118_5=O(t,ee.KM216_TO_KM118_5),a.km59=O(a.km118_5,ee.KM118_5_TO_KM59),a.km37=O(a.km59,ee.KM59_TO_KM37),a.km7_3=O(a.km37,ee.KM37_TO_KM7_3),a.km0=O(a.km7_3,ee.KM7_3_TO_KM0),a.etaPto=O(a.km0,ee.AMARRE);break;case"C":a.km59_in=t,a.km37=O(t,ee.KM59_TO_KM37),a.km7_3=O(a.km37,ee.KM37_TO_KM7_3),a.km0=O(a.km7_3,ee.KM7_3_TO_KM0),a.etaPto=O(a.km0,ee.AMARRE);break}return a}function xe(r,t){const n=se(r.calado);console.log("üö¢ calculateExitTimes START:",{buque:r.buque,clase:n,etdPto:t.toISOString(),etdPtoLocal:t.toLocaleString("es-AR")});const a={etdPto:t};switch(a.km59=O(t,pe.KM0_TO_KM59),console.log("  ‚Üí KM59:",a.km59.toLocaleString("es-AR"),`(+${pe.KM0_TO_KM59} min)`),a.km77=O(a.km59,pe.KM59_TO_KM77),console.log("  ‚Üí KM77:",a.km77.toLocaleString("es-AR"),`(+${pe.KM59_TO_KM77} min)`),a.km118_5=O(a.km77,pe.KM77_TO_KM118_5),console.log("  ‚Üí KM118.5:",a.km118_5.toLocaleString("es-AR"),`(+${pe.KM77_TO_KM118_5} min)`),n){case"A":a.km216=O(a.km118_5,pe.KM118_5_TO_KM216),a.km239=O(a.km118_5,pe.KM118_5_TO_KM239),console.log("  ‚Üí KM216:",a.km216.toLocaleString("es-AR")),console.log("  ‚Üí KM239:",a.km239.toLocaleString("es-AR"));break;case"B":a.km216=O(a.km118_5,pe.KM118_5_TO_KM216),console.log("  ‚Üí KM216:",a.km216.toLocaleString("es-AR"));break;case"C":console.log("  ‚Üí Clase C termina en KM 59");break}return console.log("üö¢ calculateExitTimes END"),a}function Ye(r,t=30){const n=[],a=r.filter(s=>s.situation!=="CANCELADO"),o=[];for(const s of a)s.entry.km118_5&&o.push({crossing:s,time:s.entry.km118_5,type:"entry"}),s.exit.km118_5&&o.push({crossing:s,time:s.exit.km118_5,type:"exit"});o.sort((s,p)=>s.time.getTime()-p.time.getTime()),console.log("üîç Detectando conflictos en KM 118.5:",{totalCrossings:a.length,totalKM118Points:o.length,points:o.map(s=>({buque:s.crossing.ship.buque,tipo:s.type,hora:v(s.time,"dd/MM HH:mm")}))});for(let s=0;s<o.length;s++)for(let p=s+1;p<o.length;p++){const d=o[s],h=o[p];if(d.crossing.id===h.crossing.id)continue;const g=d.time.getTime(),S=h.time.getTime(),A=Math.abs(S-g)/6e4;if(console.log(`  Comparando: ${d.crossing.ship.buque} (${d.type}) vs ${h.crossing.ship.buque} (${h.type}): ${A.toFixed(0)} min`),A<t){console.log(`    ‚ö†Ô∏è CONFLICTO DETECTADO: ${A.toFixed(0)} min < ${t} min`);const M=t-A+15,T=[];if(d.type==="entry"&&h.type==="entry"){const l=new Date(d.crossing.diaEntrada),[m,j]=d.crossing.horaEntrada.split(":").map(Number);l.setHours(m,j,0,0);const x=O(l,-M);T.push({action:"advance-incoming",shipName:d.crossing.ship.buque,crossingId:d.crossing.id,newDateTime:x,reason:`Adelantar ${Math.ceil(M)} minutos la entrada de ${d.crossing.ship.buque} para mantener ${t} min de separaci√≥n con ${h.crossing.ship.buque}.`});const b=new Date(h.crossing.diaEntrada),[W,L]=h.crossing.horaEntrada.split(":").map(Number);b.setHours(W,L,0,0);const F=O(b,M);T.push({action:"advance-incoming",shipName:h.crossing.ship.buque,crossingId:h.crossing.id,newDateTime:F,reason:`Retrasar ${Math.ceil(M)} minutos la entrada de ${h.crossing.ship.buque} para mantener ${t} min de separaci√≥n con ${d.crossing.ship.buque}.`})}else if(d.type==="exit"&&h.type==="exit"){const l=new Date(d.crossing.diaSalida),[m,j]=d.crossing.horaSalida.split(":").map(Number);l.setHours(m,j,0,0);const x=O(l,-M);T.push({action:"delay-outgoing",shipName:d.crossing.ship.buque,crossingId:d.crossing.id,newDateTime:x,reason:`Adelantar ${Math.ceil(M)} minutos la salida de ${d.crossing.ship.buque} para mantener ${t} min de separaci√≥n con ${h.crossing.ship.buque}.`});const b=new Date(h.crossing.diaSalida),[W,L]=h.crossing.horaSalida.split(":").map(Number);b.setHours(W,L,0,0);const F=O(b,M);T.push({action:"delay-outgoing",shipName:h.crossing.ship.buque,crossingId:h.crossing.id,newDateTime:F,reason:`Retrasar ${Math.ceil(M)} minutos la salida de ${h.crossing.ship.buque} para mantener ${t} min de separaci√≥n con ${d.crossing.ship.buque}.`})}else{const l=d.type==="entry"?d:h,m=d.type==="exit"?d:h,j=new Date(m.crossing.diaSalida),[x,b]=m.crossing.horaSalida.split(":").map(Number);j.setHours(x,b,0,0);const W=O(j,M);T.push({action:"delay-outgoing",shipName:m.crossing.ship.buque,crossingId:m.crossing.id,newDateTime:W,reason:`Retrasar ${Math.ceil(M)} minutos la salida de ${m.crossing.ship.buque} para mantener ${t} min de separaci√≥n con ${l.crossing.ship.buque}.`});const L=new Date(l.crossing.diaEntrada),[F,w]=l.crossing.horaEntrada.split(":").map(Number);L.setHours(F,w,0,0);const J=O(L,-M);T.push({action:"advance-incoming",shipName:l.crossing.ship.buque,crossingId:l.crossing.id,newDateTime:J,reason:`Adelantar ${Math.ceil(M)} minutos la entrada de ${l.crossing.ship.buque} para mantener ${t} min de separaci√≥n con ${m.crossing.ship.buque}.`})}const H=d.type==="entry"?d.crossing:h.crossing,R=d.type==="exit"?d.crossing:h.crossing;n.push({entryShip:H,exitShip:R,conflictTime:new Date(Math.min(g,S)),timeDifference:A,suggestions:T})}}return console.log(`‚úÖ Total de conflictos detectados: ${n.length}`),n}const Xt="ships_database";function ne(){if(console.log("üìö loadShips() llamada"),typeof window>"u")return console.log("  ‚Üí Entorno servidor, retornando datos iniciales"),Ge();try{const r=localStorage.getItem(Xt);if(console.log("  ‚Üí localStorage check:",r?`${r.length} caracteres`:"null"),r)try{const n=JSON.parse(r);if(console.log("  ‚Üí Buques parseados:",n.length),Array.isArray(n)&&n.length>0)return n;console.warn("  ‚ö†Ô∏è Datos vac√≠os o inv√°lidos, reinicializando")}catch(n){console.error("  ‚ùå Error parseando JSON:",n)}console.log("  ‚Üí Inicializando con datos por defecto");const t=Ge();return console.log("  ‚Üí Total buques iniciales:",t.length),Me(t),console.log("  ‚úÖ Datos guardados en localStorage"),t}catch(r){return console.error("‚ùå Error en loadShips():",r),Ge()}}function Me(r){if(typeof window>"u"){console.warn("saveShips() llamada en servidor, ignorando");return}try{const t=JSON.stringify(r);localStorage.setItem(Xt,t),console.log("‚úÖ saveShips() exitoso:",r.length,"buques")}catch(t){throw console.error("‚ùå Error guardando buques:",t),t}}function yn(r){const t=ne(),n={...r,id:crypto.randomUUID()};return t.push(n),Me(t),n}function vn(r,t){const n=ne(),a=n.findIndex(o=>o.id===r);a!==-1&&(n[a]={...n[a],...t},Me(n))}function jn(r){const n=ne().filter(a=>a.id!==r);Me(n)}const ea="ship_crossings";function ie(){if(typeof window>"u")return[];const r=localStorage.getItem(ea);if(r)try{return JSON.parse(r).map(a=>({...a,diaEntrada:new Date(a.diaEntrada),diaSalida:new Date(a.diaSalida),entry:{...a.entry,km239:a.entry.km239?new Date(a.entry.km239):void 0,km216:a.entry.km216?new Date(a.entry.km216):void 0,km59_in:a.entry.km59_in?new Date(a.entry.km59_in):void 0,km118_5:a.entry.km118_5?new Date(a.entry.km118_5):void 0,km59:a.entry.km59?new Date(a.entry.km59):void 0,km37:a.entry.km37?new Date(a.entry.km37):void 0,km7_3:a.entry.km7_3?new Date(a.entry.km7_3):void 0,km0:a.entry.km0?new Date(a.entry.km0):void 0,etaPto:a.entry.etaPto?new Date(a.entry.etaPto):void 0},exit:{...a.exit,etdPto:a.exit.etdPto?new Date(a.exit.etdPto):void 0,km59:a.exit.km59?new Date(a.exit.km59):void 0,km77:a.exit.km77?new Date(a.exit.km77):void 0,km118_5:a.exit.km118_5?new Date(a.exit.km118_5):void 0,km216:a.exit.km216?new Date(a.exit.km216):void 0,km239:a.exit.km239?new Date(a.exit.km239):void 0}}))}catch(n){console.error("Error loading crossings:",n)}const t=Cn();return t.length>0?(Re(t),t):[]}function Cn(){const r=Ge(),t=r.find(s=>s.buque==="MSC SEAVIEW"),n=r.find(s=>s.buque==="NORWEGIAN STAR"),a=r.find(s=>s.buque==="INSIGNIA"),o=[];if(t){const s=new Date("2026-01-29T10:00:00"),p=new Date("2026-01-31T14:00:00");o.push({id:crypto.randomUUID(),ship:t,diaEntrada:new Date("2026-01-29"),horaEntrada:"10:00",diaSalida:new Date("2026-01-31"),horaSalida:"14:00",situation:"CONFIRMADO",numero:1,entry:ue(t,s),exit:xe(t,p),notes:"Crucero de prueba A - Genera conflicto con Norwegian Star"})}if(n){const s=new Date("2026-01-27T08:00:00"),p=new Date("2026-01-29T14:00:00");o.push({id:crypto.randomUUID(),ship:n,diaEntrada:new Date("2026-01-27"),horaEntrada:"08:00",diaSalida:new Date("2026-01-29"),horaSalida:"14:00",situation:"CONFIRMADO",numero:2,entry:ue(n,s),exit:xe(n,p),notes:"Crucero de prueba B - Conflicto con MSC Seaview en KM 118.5"})}if(a){const s=new Date("2026-01-30T06:00:00"),p=new Date("2026-02-01T10:00:00");o.push({id:crypto.randomUUID(),ship:a,diaEntrada:new Date("2026-01-30"),horaEntrada:"06:00",diaSalida:new Date("2026-02-01"),horaSalida:"10:00",situation:"SIN CONFIRMAR",numero:3,entry:ue(a,s),exit:xe(a,p),notes:"Crucero de prueba C - Clase C sin conflictos"})}return console.log(`‚úÖ ${o.length} cruceros de ejemplo creados con conflictos programados`),o}function Re(r){typeof window>"u"||localStorage.setItem(ea,JSON.stringify(r))}function $t(r){const t=ie(),n=t.reduce((o,s)=>Math.max(o,s.numero),0),a={...r,id:crypto.randomUUID(),numero:n+1};return t.push(a),Re(t),a}function Sn(r,t,n){const a=ie(),o=a.find(s=>s.id===r);o&&(n==="entry"?(o.diaEntrada=new Date(t),o.horaEntrada=v(t,"HH:mm"),o.entry=ue(o.ship,t)):(o.diaSalida=new Date(t),o.horaSalida=v(t,"HH:mm"),o.exit=xe(o.ship,t)),Re(a))}function gt(r,t){const n=ie(),a=n.findIndex(o=>o.id===r);a!==-1&&(n[a]={...n[a],...t},Re(n))}function Ft(r){const n=ie().filter(a=>a.id!==r);Re(n)}const ta="ship_movements";function tt(){if(typeof window>"u")return[];const r=localStorage.getItem(ta);if(r)try{return JSON.parse(r).map(n=>({...n,fechaAmarre:n.fechaAmarre?new Date(n.fechaAmarre):void 0,fechaZarpada:n.fechaZarpada?new Date(n.fechaZarpada):void 0,createdAt:new Date(n.createdAt),updatedAt:new Date(n.updatedAt)}))}catch(t){console.error("Error loading movements:",t)}return[]}function wt(r){typeof window>"u"||localStorage.setItem(ta,JSON.stringify(r))}function An(r){const t=tt(),n=new Date,a={...r,id:crypto.randomUUID(),createdAt:n,updatedAt:n};return t.push(a),wt(t),a}function wn(r,t){const n=tt(),a=n.findIndex(o=>o.id===r);a!==-1&&(n[a]={...n[a],...t,updatedAt:new Date},wt(n))}function kn(r){const n=tt().filter(a=>a.id!==r);wt(n)}function En(){return JSON.stringify({ships:ne(),crossings:ie(),exportDate:new Date().toISOString()},null,2)}function In(r){try{const t=JSON.parse(r);return t.ships&&Array.isArray(t.ships)&&Me(t.ships),t.crossings&&Array.isArray(t.crossings)&&Re(t.crossings),{success:!0}}catch(t){return{success:!1,error:t instanceof Error?t.message:"Error desconocido"}}}function Ge(){return[{id:"1",buque:"MSC MUSICA",bandera:"PANAM√Å",imo:"9320087",eslora:293.8,manga:32.2,puntal:10.6,calado:7.85,agencia:"MSC"},{id:"2",buque:"MSC SEAVIEW",bandera:"MALTA",imo:"9745378",eslora:323.36,manga:44,puntal:12.1,calado:8.9,agencia:"MSC"},{id:"3",buque:"COSTA FAVOLOSA",bandera:"ITALIA",imo:"9479852",eslora:289.65,manga:35.5,puntal:14.18,calado:8.3,agencia:"NAVIJET"},{id:"4",buque:"MSC POESIA",bandera:"PANAM√Å",imo:"9387073",eslora:293.8,manga:32.2,puntal:10.6,calado:7.87,agencia:"MSC"},{id:"5",buque:"NORWEGIAN STAR",bandera:"BAHAMAS",imo:"9195157",eslora:294.13,manga:44,puntal:12.1,calado:8.63,agencia:"NAVIJET"},{id:"6",buque:"MSC SPLENDIDA",bandera:"PANAM√Å",imo:"9359806",eslora:333.3,manga:50.4,puntal:18,calado:8.9,agencia:"MSC"},{id:"7",buque:"COSTA DIADEMA",bandera:"ITALIA",imo:"9636888",eslora:306,manga:50,puntal:11,calado:8.9,agencia:"NAVIJET"},{id:"8",buque:"MSC ARMONIA",bandera:"PANAM√Å",imo:"9210141",eslora:274.9,manga:28.8,puntal:12.9,calado:8,agencia:"MSC"},{id:"9",buque:"MSC ORCHESTRA",bandera:"PANAM√Å",imo:"9320099",eslora:293.8,manga:32.2,puntal:10.6,calado:7.87,agencia:"MSC"},{id:"10",buque:"SAPPHIRE PRINCESS",bandera:"REINO UNIDO",imo:"9228186",eslora:290,manga:37.5,puntal:20.51,calado:8.05,agencia:"GPS"},{id:"11",buque:"OOSTERDAM",bandera:"PAISES BAJOS",imo:"9221281",eslora:285,manga:57.8,puntal:10.8,calado:8.9,agencia:"GPS"},{id:"12",buque:"MAJESTIC PRINCESS",bandera:"REINO UNIDO",imo:"9614141",eslora:329,manga:38,puntal:11,calado:8.9,agencia:"GPS"},{id:"13",buque:"COSTA DELIZIOSA",bandera:"ITALIA",imo:"9398917",eslora:294,manga:32.25,puntal:13.69,calado:8.1,agencia:"NAVIJET"},{id:"14",buque:"MARINA",bandera:"ISLAS MARSHALL",imo:"9438066",eslora:239.3,manga:32.2,puntal:13.27,calado:8,agencia:"NAVIJET"},{id:"15",buque:"QUEEN VICTORIA",bandera:"BERMUDA",imo:"9320556",eslora:294,manga:36,puntal:11,calado:8,agencia:"DELFINO"},{id:"16",buque:"ARTANIA",bandera:"BAHAMAS",imo:"8201480",eslora:230,manga:29,puntal:12,calado:8,agencia:"NAVIJET"},{id:"17",buque:"L'AUSTRAL",bandera:"WALLIS & FUTUNA",imo:"9502518",eslora:127,manga:18,puntal:6,calado:5,agencia:"INCHCAPE"},{id:"18",buque:"AIDASOL",bandera:"ITALIA",imo:"9490040",eslora:253,manga:32.2,puntal:9.3,calado:7.5,agencia:"NAVIJET"},{id:"19",buque:"SH VEGA",bandera:"MALTA",imo:"9895252",eslora:113.5,manga:20.02,puntal:11,calado:5,agencia:"AMI"},{id:"20",buque:"VIKING JUPITER",bandera:"NORUEGA",imo:"9796262",eslora:228.26,manga:28.79,puntal:8.85,calado:6.65,agencia:"NAVIJET"},{id:"21",buque:"SEVEN SEAS SPLENDOR",bandera:"ISLAS MARSHALL",imo:"9807085",eslora:224,manga:28.8,puntal:16.15,calado:7.1,agencia:"NAVIJET"},{id:"22",buque:"PACIFIC WORLD",bandera:"PANAM√Å",imo:"9000259",eslora:261.31,manga:32.25,puntal:17.4,calado:8.1,agencia:"AMI"},{id:"23",buque:"MSC PREZIOSA",bandera:"PANAM√Å",imo:"9595321",eslora:333.3,manga:37.92,puntal:18,calado:8.55,agencia:"MSC"},{id:"24",buque:"BOLETTE",bandera:"BAHAMAS",imo:"9188037",eslora:237,manga:32,puntal:8,calado:8,agencia:"INCHCAPE"},{id:"25",buque:"SEVEN SEAS MARINER",bandera:"BAHAMAS",imo:"9210139",eslora:216,manga:28.8,puntal:16.15,calado:7.1,agencia:"NAVIJET"},{id:"26",buque:"INSIGNIA",bandera:"BAHAMAS",imo:"9156462",eslora:180.45,manga:25.73,puntal:18.1,calado:5.95,agencia:"NAVIJET"},{id:"27",buque:"VILLA VIE ODYSSEY",bandera:"BAHAMAS",imo:"9000699",eslora:195,manga:22,puntal:7,calado:5,agencia:"NAVIJET"},{id:"28",buque:"MSC PREZIOSA",bandera:"PANAM√Å",imo:"9595321",eslora:333.3,manga:37.92,puntal:18,calado:8.55,agencia:"MSC"},{id:"29",buque:"CELEBRITY EQUINOX",bandera:"MALTA",imo:"9404314",eslora:314.98,manga:36.8,puntal:11,calado:8.23,agencia:"INCHCAPE"},{id:"30",buque:"AZAMARA ONWARD",bandera:"MALTA",imo:"9200940",eslora:181,manga:25.5,puntal:8.5,calado:6.4,agencia:"DELFINO"},{id:"31",buque:"CARNIVAL PRIDE",bandera:"PANAM√Å",imo:"9210220",eslora:293.5,manga:35.5,puntal:13,calado:8.2,agencia:"INCHCAPE"},{id:"32",buque:"SEABOURN SOJOURN",bandera:"BAHAMAS",imo:"9417086",eslora:198,manga:25.5,puntal:13,calado:6.5,agencia:"NAVIJET"},{id:"33",buque:"SILVER WHISPER",bandera:"BAHAMAS",imo:"9192167",eslora:186,manga:24.8,puntal:11.5,calado:6.1,agencia:"NAVIJET"},{id:"34",buque:"SILVER SHADOW",bandera:"BAHAMAS",imo:"9192179",eslora:186,manga:24.8,puntal:11.5,calado:6.1,agencia:"NAVIJET"},{id:"35",buque:"CELEBRITY ECLIPSE",bandera:"MALTA",imo:"9404302",eslora:314.98,manga:36.8,puntal:11,calado:8.23,agencia:"INCHCAPE"},{id:"36",buque:"NAUTICA",bandera:"ISLAS MARSHALL",imo:"9155999",eslora:180.45,manga:25.73,puntal:18.1,calado:5.95,agencia:"NAVIJET"},{id:"37",buque:"RIVIERA",bandera:"ISLAS MARSHALL",imo:"9438054",eslora:"239.30",manga:"32.20",puntal:"13.27",calado:"8.00",agencia:"NAVIJET"},{id:"38",buque:"SILVER MOON",bandera:"BAHAMAS",imo:"9844334",eslora:213,manga:28.2,puntal:9,calado:6.3,agencia:"NAVIJET"},{id:"39",buque:"SILVER DAWN",bandera:"BAHAMAS",imo:"9844346",eslora:213,manga:28.2,puntal:9,calado:6.3,agencia:"NAVIJET"},{id:"40",buque:"AZAMARA QUEST",bandera:"MALTA",imo:"9200952",eslora:181,manga:25.5,puntal:8.5,calado:6.4,agencia:"DELFINO"},{id:"41",buque:"AZAMARA JOURNEY",bandera:"MALTA",imo:"9200964",eslora:181,manga:25.5,puntal:8.5,calado:6.4,agencia:"DELFINO"},{id:"42",buque:"REGATTA",bandera:"ISLAS MARSHALL",imo:"9156450",eslora:180.45,manga:25.73,puntal:18.1,calado:5.95,agencia:"NAVIJET"},{id:"43",buque:"SIRENA",bandera:"ISLAS MARSHALL",imo:"9228344",eslora:180.45,manga:25.73,puntal:18.1,calado:5.95,agencia:"NAVIJET"},{id:"44",buque:"SILVER SPIRIT",bandera:"BAHAMAS",imo:"9407077",eslora:195.8,manga:26,puntal:11,calado:6.3,agencia:"NAVIJET"},{id:"45",buque:"CELEBRITY INFINITY",bandera:"MALTA",imo:"9189419",eslora:294.13,manga:32.2,puntal:10.5,calado:8,agencia:"INCHCAPE"},{id:"46",buque:"SEABOURN OVATION",bandera:"BAHAMAS",imo:"9781757",eslora:210,manga:27.6,puntal:10.5,calado:6.5,agencia:"NAVIJET"},{id:"47",buque:"SEABOURN ENCORE",bandera:"BAHAMAS",imo:"9781745",eslora:210,manga:27.6,puntal:10.5,calado:6.5,agencia:"NAVIJET"},{id:"48",buque:"SEABOURN QUEST",bandera:"BAHAMAS",imo:"9417098",eslora:198,manga:25.5,puntal:13,calado:6.5,agencia:"NAVIJET"},{id:"49",buque:"SEVEN SEAS VOYAGER",bandera:"BAHAMAS",imo:"9247146",eslora:206,manga:28.8,puntal:16.15,calado:7.1,agencia:"NAVIJET"},{id:"50",buque:"SEVEN SEAS NAVIGATOR",bandera:"BAHAMAS",imo:"9144769",eslora:172,manga:23.8,puntal:13,calado:6.4,agencia:"NAVIJET"},{id:"51",buque:"SILVER WIND",bandera:"BAHAMAS",imo:"9004186",eslora:156,manga:21.5,puntal:8.5,calado:5.5,agencia:"NAVIJET"},{id:"52",buque:"SILVER CLOUD",bandera:"BAHAMAS",imo:"9004174",eslora:156,manga:21.5,puntal:8.5,calado:5.5,agencia:"NAVIJET"},{id:"53",buque:"HANSEATIC NATURE",bandera:"BAHAMAS",imo:"9798504",eslora:138,manga:22,puntal:7,calado:4.7,agencia:"NAVIJET"},{id:"54",buque:"HANSEATIC INSPIRATION",bandera:"BAHAMAS",imo:"9798516",eslora:138,manga:22,puntal:7,calado:4.7,agencia:"NAVIJET"},{id:"55",buque:"WORLD EXPLORER",bandera:"PORTUGAL",imo:"9876250",eslora:126,manga:18.4,puntal:7,calado:4.7,agencia:"NAVIJET"},{id:"56",buque:"STAR PRIDE",bandera:"BAHAMAS",imo:"8807999",eslora:134,manga:19.2,puntal:8,calado:4.7,agencia:"NAVIJET"},{id:"57",buque:"STAR BREEZE",bandera:"BAHAMAS",imo:"9007491",eslora:134,manga:19.2,puntal:8,calado:4.7,agencia:"NAVIJET"},{id:"58",buque:"STAR LEGEND",bandera:"BAHAMAS",imo:"9617871",eslora:134,manga:19.2,puntal:8,calado:4.7,agencia:"NAVIJET"},{id:"59",buque:"LE CHAMPLAIN",bandera:"FRANCIA",imo:"9779917",eslora:131,manga:18,puntal:7,calado:4.7,agencia:"NAVIJET"},{id:"60",buque:"LE LAPEROUSE",bandera:"FRANCIA",imo:"9779929",eslora:131,manga:18,puntal:7,calado:4.7,agencia:"NAVIJET"},{id:"61",buque:"LE BOUGAINVILLE",bandera:"FRANCIA",imo:"9779905",eslora:131,manga:18,puntal:7,calado:4.7,agencia:"NAVIJET"},{id:"62",buque:"LE DUMONT-D URVILLE",bandera:"FRANCIA",imo:"9779931",eslora:131,manga:18,puntal:7,calado:4.7,agencia:"NAVIJET"},{id:"63",buque:"SCENIC ECLIPSE",bandera:"MALTA",imo:"9870405",eslora:109.9,manga:16.8,puntal:7.5,calado:3.8,agencia:"NAVIJET"},{id:"64",buque:"SCENIC ECLIPSE II",bandera:"MALTA",imo:"9919382",eslora:109.9,manga:16.8,puntal:7.5,calado:3.8,agencia:"NAVIJET"},{id:"65",buque:"EMERALD AZZURRA",bandera:"MALTA",imo:"9870405",eslora:109.9,manga:16.8,puntal:7.5,calado:3.8,agencia:"NAVIJET"},{id:"66",buque:"EMERALD SAKARA",bandera:"MALTA",imo:"9919382",eslora:109.9,manga:16.8,puntal:7.5,calado:3.8,agencia:"NAVIJET"},{id:"67",buque:"EXPLORA I",bandera:"BAHAMAS",imo:"9893223",eslora:253,manga:32,puntal:9,calado:7.3,agencia:"NAVIJET"},{id:"68",buque:"EXPLORA II",bandera:"BAHAMAS",imo:"9893235",eslora:253,manga:32,puntal:9,calado:7.3,agencia:"NAVIJET"},{id:"69",buque:"VIKING OCTANTIS",bandera:"NORUEGA",imo:"9813527",eslora:205,manga:23.5,puntal:9,calado:5.3,agencia:"NAVIJET"},{id:"70",buque:"VIKING POLARIS",bandera:"NORUEGA",imo:"9813539",eslora:205,manga:23.5,puntal:9,calado:5.3,agencia:"NAVIJET"},{id:"71",buque:"NATIONAL GEOGRAPHIC ENDURANCE",bandera:"BAHAMAS",imo:"9849002",eslora:124,manga:19.3,puntal:8.5,calado:5,agencia:"NAVIJET"},{id:"72",buque:"NATIONAL GEOGRAPHIC RESOLUTION",bandera:"BAHAMAS",imo:"9849014",eslora:124,manga:19.3,puntal:8.5,calado:5,agencia:"NAVIJET"},{id:"73",buque:"ROALD AMUNDSEN",bandera:"NORUEGA",imo:"9813527",eslora:140,manga:23.6,puntal:9,calado:5.3,agencia:"NAVIJET"},{id:"74",buque:"FRIDTJOF NANSEN",bandera:"NORUEGA",imo:"9813539",eslora:140,manga:23.6,puntal:9,calado:5.3,agencia:"NAVIJET"},{id:"75",buque:"ULTRAMARINE",bandera:"BAHAMAS",imo:"9843087",eslora:128,manga:22,puntal:8,calado:5.1,agencia:"QUARK"}]}function Mn(r,t,n){console.log("üìä ========== INICIO GENERACI√ìN REPORTE =========="),console.log("üìä generateCrossingReport - Crossings:",r.length),console.log("üìä generateCrossingReport - Ships:",t.length),console.log("üìä generateCrossingReport - Reservas recibidas:",n?.length||0),n&&n.length>0?(console.log("üìã Primeras 3 reservas recibidas:"),n.slice(0,3).forEach((l,m)=>{console.log(`  ${m+1}. Reserva:`,{cruiseId:l.cruiseId,buque:l.buque,clase:l.clase,CPI_IN:l.reservaCPIEntrada,ACC_IN:l.reservaACCEntrada,ACC_OUT:l.reservaACCSalida,CPI_OUT:l.reservaCPISalida})})):console.warn("‚ö†Ô∏è No se recibieron reservas en el reporte");const a=[...r].sort((l,m)=>l.diaEntrada.getTime()-m.diaEntrada.getTime()),o=new Map;n&&Array.isArray(n)&&n.forEach(l=>{o.set(l.cruiseId,l),console.log(`  ‚Üí Mapeando: cruiseId=${l.cruiseId} ‚Üí buque=${l.buque}`)}),console.log("üó∫Ô∏è Total reservas mapeadas:",o.size),console.log("üó∫Ô∏è CruiseIds en el mapa:",Array.from(o.keys()));const s=(l,m)=>{console.log(`üßÆ Calculando reserva faltante para ${l.ship.buque} (Clase ${m})`);const j={cruiseId:l.id,buque:l.ship.buque,clase:m,reservaACCEntrada:"N/A",reservaACCSalida:"N/A",reservaCPIEntrada:"No aplica",reservaCPISalida:"No aplica"};try{if(l.entry.etaPto){let x=1.5;m==="A"?x=2.5:m==="B"?x=2:m==="C"&&(x=1.5);const b=O(l.entry.etaPto,-(x*60));j.reservaACCEntrada=v(b,"dd/MM/yyyy HH:mm"),console.log(`  ‚úÖ ACC Entrada (Clase ${m}): ${j.reservaACCEntrada} (${x}h antes de ETA ${v(l.entry.etaPto,"HH:mm")})`)}if(m==="A"||m==="B"){if(l.entry.km239){const x=O(l.entry.km239,-360);j.reservaCPIEntrada=v(x,"dd/MM/yyyy HH:mm")}else if(l.entry.km216){const x=O(l.entry.km216,-390);j.reservaCPIEntrada=v(x,"dd/MM/yyyy HH:mm")}}if(l.exit.etdPto){let x=1.5;m==="A"?x=2.5:m==="B"?x=2:m==="C"&&(x=1.5);const b=O(l.exit.etdPto,-(x*60));j.reservaACCSalida=v(b,"dd/MM/yyyy HH:mm"),console.log(`  ‚úÖ ACC Salida (Clase ${m}): ${j.reservaACCSalida} (${x}h antes de ETD ${v(l.exit.etdPto,"HH:mm")})`)}if(m==="A"||m==="B"){if(l.exit.km239){const x=O(l.exit.km239,180);j.reservaCPISalida=v(x,"dd/MM/yyyy HH:mm")}else if(l.exit.km216){const x=O(l.exit.km216,270);j.reservaCPISalida=v(x,"dd/MM/yyyy HH:mm")}}console.log(`‚úÖ Reserva calculada para ${l.ship.buque}:`,j)}catch(x){console.error(`‚ùå Error calculando reserva para ${l.ship.buque}:`,x)}return j},p=l=>l?v(l,"dd/MM/yyyy"):"-",d=l=>l?v(l,"HH:mm"):"-",h=l=>{if(console.log("üîç formatReservation recibi√≥:",l),!l||l.trim()===""||l==="No aplica"||l==="Error c√°lculo"||l==="N/A"){const m='<span style="color: #94a3b8; font-size: 10px;">N/A</span>';return console.log("  ‚Ü™Ô∏è Devolviendo:",m),m}try{if(l.includes("/")&&l.includes(":")){const j=l.trim().split(" ");if(j.length>=2){const x=j[0],b=j[1];return`<div class="date">${x}</div><div class="time">${b}</div>`}}const m=`<div class="time">${l}</div>`;return console.log("  ‚Ü™Ô∏è Devolviendo:",m),m}catch(m){return console.error("‚ùå Error parseando reserva:",m,l),`<div class="time">${l}</div>`}},g=l=>l>=8.84?"A":l>7.32?"B":"C",S=a.some(l=>{const m=t.find(j=>j.id===l.ship.id);return m&&g(m.calado)==="C"}),A=a.map((l,m)=>{const j=t.find(F=>F.id===l.ship.id);if(!j)return"";const x=g(j.calado);let b=o.get(l.id);b||(console.log(`‚ö†Ô∏è No hay reserva para ${j.buque}, calculando autom√°ticamente...`),b=s(l,x)),console.log(`üîç Row ${m+1}/${a.length}:`,{crossingId:l.id,shipId:j.id,shipName:j.buque,clase:x,reservationFound:!!b,reservationCruiseId:b?.cruiseId,reservationBuque:b?.buque}),b?console.log(`  ‚úÖ Reserva encontrada para ${j.buque}:`,{CPI_IN:b.reservaCPIEntrada,ACC_IN:b.reservaACCEntrada,ACC_OUT:b.reservaACCSalida,CPI_OUT:b.reservaCPISalida}):console.warn(`  ‚ùå NO se encontr√≥ reserva para crossing.id=${l.id}`);const W=S?x==="C"?`
      <td class="datetime-cell highlight-orange">
        <div class="date">${p(l.entry.km59_in)}</div>
        <div class="time">${d(l.entry.km59_in)}</div>
      </td>
    `:'<td class="datetime-cell"><span style="color: #94a3b8; font-size: 10px;">-</span></td>':"",L=S?x==="C"?`
      <td class="datetime-cell highlight-orange">
        <div class="date">${p(l.exit.km59)}</div>
        <div class="time">${d(l.exit.km59)}</div>
      </td>
    `:'<td class="datetime-cell"><span style="color: #94a3b8; font-size: 10px;">-</span></td>':"";return`
      <tr>
        <td class="center-cell number-col">${m+1}</td>
        <td class="ship-name">${j.buque}</td>
        <td class="datetime-cell">
          <div class="date">${p(l.diaEntrada)}</div>
          <div class="time">${l.horaEntrada}</div>
        </td>
        <td class="datetime-cell highlight-green">
          <div class="date">${p(l.entry.km118_5)}</div>
          <div class="time">${d(l.entry.km118_5)}</div>
        </td>
        ${W}
        <td class="datetime-cell reservation-cell">
          ${h(b?.reservaCPIEntrada)}
        </td>
        <td class="datetime-cell reservation-cell">
          ${h(b?.reservaACCEntrada)}
        </td>
        <td class="datetime-cell highlight-primary">
          <div class="date">${p(l.entry.etaPto)}</div>
          <div class="time">${d(l.entry.etaPto)}</div>
        </td>
        <td class="datetime-cell highlight-warning">
          <div class="date">${p(l.exit.etdPto)}</div>
          <div class="time">${d(l.exit.etdPto)}</div>
        </td>
        <td class="datetime-cell reservation-cell">
          ${h(b?.reservaACCSalida)}
        </td>
        <td class="datetime-cell reservation-cell">
          ${h(b?.reservaCPISalida)}
        </td>
        ${L}
        <td class="datetime-cell highlight-red">
          <div class="date">${p(l.exit.km118_5)}</div>
          <div class="time">${d(l.exit.km118_5)}</div>
        </td>
        <td class="center-cell specs-col">${j.eslora} m</td>
        <td class="center-cell specs-col">${j.manga} m</td>
        <td class="center-cell specs-col">${j.calado} m</td>
        <td class="agency-col">${j.agencia}</td>
      </tr>
    `}).join(""),M=new Date,T=r.filter(l=>l.situation==="CONFIRMADO").length,H=r.filter(l=>l.situation==="SIN CONFIRMAR").length,R=r.filter(l=>{const m=t.find(j=>j.id===l.ship.id);return m&&g(m.calado)==="C"}).length;return`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="UTF-8">
      <title>Reporte de Cruceros - Canal Punta Indio KM 118.5</title>
      <style>
        @page {
          size: A3 landscape;
          margin: 0.8cm;
        }
        
        * {
          margin: 0;
          padding: 0;
          box-sizing: border-box;
        }
        
        body {
          font-family: 'Segoe UI', 'Helvetica Neue', Arial, sans-serif;
          font-size: 11px;
          color: #1e293b;
          background: white;
          padding: 15px;
        }
        
        /* HEADER - Elegante y profesional */
        .header {
          text-align: center;
          margin-bottom: 18px;
          padding-bottom: 12px;
          border-bottom: 4px solid #0f172a;
          background: linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%);
          padding: 18px;
          border-radius: 8px;
          box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .header h1 {
          font-size: 26px;
          font-weight: 700;
          color: white;
          margin-bottom: 6px;
          letter-spacing: 0.5px;
          text-transform: uppercase;
        }
        
        .header .subtitle {
          font-size: 15px;
          color: #e0e7ff;
          margin: 4px 0;
          font-weight: 500;
        }
        
        .header .metadata {
          font-size: 12px;
          color: #cbd5e1;
          margin-top: 8px;
          font-weight: 400;
        }
        
        /* TABLA - Espaciosa y clara */
        .table-container {
          overflow-x: auto;
          margin-top: 15px;
        }
        
        table {
          width: 100%;
          border-collapse: collapse;
          background: white;
          box-shadow: 0 1px 3px rgba(0,0,0,0.1);
        }
        
        th {
          background: linear-gradient(180deg, #334155 0%, #1e293b 100%);
          color: white;
          padding: 10px 6px;
          text-align: center;
          font-size: 10px;
          font-weight: 700;
          border: 1px solid #0f172a;
          text-transform: uppercase;
          letter-spacing: 0.3px;
          line-height: 1.3;
        }
        
        td {
          padding: 8px 6px;
          border: 1px solid #cbd5e1;
          font-size: 10px;
          vertical-align: middle;
          background: white;
        }
        
        /* Columnas espec√≠ficas */
        .number-col {
          font-weight: 700;
          font-size: 11px;
          color: #475569;
          width: 30px;
        }
        
        .ship-name {
          font-weight: 700;
          font-size: 11px;
          color: #0f172a;
          text-align: left;
          min-width: 120px;
        }
        
        .datetime-cell {
          text-align: center;
          line-height: 1.3;
          min-width: 75px;
        }
        
        .datetime-cell .date {
          font-size: 10px;
          font-weight: 600;
          color: #1e293b;
          margin-bottom: 2px;
        }
        
        .datetime-cell .time {
          font-size: 11px;
          font-weight: 700;
          color: #3b82f6;
        }
        
        .highlight-green {
          background: #f0fdf4 !important;
        }
        
        .highlight-green .time {
          color: #16a34a;
          font-size: 12px;
        }
        
        .highlight-red {
          background: #fef2f2 !important;
        }
        
        .highlight-red .time {
          color: #dc2626;
          font-size: 12px;
        }
        
        .highlight-orange {
          background: #fff7ed !important;
        }
        
        .highlight-orange .time {
          color: #ea580c;
          font-size: 12px;
        }
        
        .highlight-primary {
          background: #d1fae5 !important;
          border: 2px solid #059669 !important;
        }
        
        .highlight-primary .time {
          color: #047857;
          font-size: 13px;
          font-weight: 900;
        }
        
        .highlight-warning {
          background: #fed7aa !important;
          border: 2px solid #ea580c !important;
        }
        
        .highlight-warning .time {
          color: #c2410c;
          font-size: 13px;
          font-weight: 900;
        }
        
        .reservation-cell {
          background: #fefce8 !important;
          border-left: 3px solid #facc15;
        }
        
        .reservation-cell .time {
          color: #ca8a04;
          font-size: 11px;
          font-weight: 800;
        }
        
        .specs-col {
          font-weight: 600;
          color: #475569;
          font-size: 10px;
          width: 55px;
        }
        
        .agency-col {
          font-size: 9px;
          color: #64748b;
          text-align: left;
          font-weight: 500;
          min-width: 80px;
        }
        
        .center-cell {
          text-align: center;
        }
        
        /* Filas alternadas */
        tbody tr:nth-child(odd) {
          background: #ffffff;
        }
        
        tbody tr:nth-child(even) {
          background: #f8fafc;
        }
        
        tbody tr:hover {
          background: #e0f2fe !important;
        }
        
        /* FOOTER - Informaci√≥n de resumen */
        .footer {
          margin-top: 18px;
          padding: 15px;
          background: #f1f5f9;
          border-radius: 6px;
          border-left: 4px solid #1e3a8a;
        }
        
        .footer-stats {
          display: flex;
          justify-content: space-around;
          margin-bottom: 10px;
        }
        
        .stat-item {
          text-align: center;
        }
        
        .stat-value {
          font-size: 22px;
          font-weight: 700;
          color: #1e3a8a;
          display: block;
        }
        
        .stat-label {
          font-size: 11px;
          color: #64748b;
          margin-top: 2px;
          text-transform: uppercase;
          letter-spacing: 0.5px;
        }
        
        .footer-info {
          text-align: center;
          font-size: 10px;
          color: #64748b;
          border-top: 1px solid #cbd5e1;
          padding-top: 10px;
          margin-top: 10px;
        }
        
        /* LEGEND - Leyenda de colores */
        .legend {
          display: flex;
          justify-content: center;
          gap: 20px;
          margin: 12px 0;
          padding: 10px;
          background: #f8fafc;
          border-radius: 6px;
          flex-wrap: wrap;
        }
        
        .legend-item {
          display: flex;
          align-items: center;
          gap: 8px;
          font-size: 10px;
          color: #475569;
        }
        
        .legend-color {
          width: 18px;
          height: 18px;
          border-radius: 4px;
          border: 1px solid #cbd5e1;
        }
        
        .legend-green { background: #f0fdf4; }
        .legend-red { background: #fef2f2; }
        .legend-orange { background: #fff7ed; }
        .legend-yellow { background: #fefce8; border-left: 3px solid #facc15; }
        
        @media print {
          body {
            padding: 5px;
          }
          
          .header {
            break-inside: avoid;
          }
          
          table {
            page-break-inside: auto;
          }
          
          tr {
            page-break-inside: avoid;
            page-break-after: auto;
          }
          
          thead {
            display: table-header-group;
          }
        }
      </style>
    </head>
    <body>
      <div class="header">
        <h1>üö¢ Gesti√≥n de Cruceros Oce√°nicos</h1>
        <div class="subtitle">üìç Canal Punta Indio - KM 118.5</div>
        <div class="metadata">
          Reporte generado: ${v(M,"dd/MM/yyyy")} a las ${v(M,"HH:mm")} hs
        </div>
      </div>
      
      <div class="legend">
        <div class="legend-item">
          <div class="legend-color legend-green"></div>
          <span><strong>ETA KM 118.5</strong> Entrada</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #d1fae5; border: 2px solid #059669;"></div>
          <span><strong>‚öì AMARRE (ETA Pto)</strong> usado para ACC Entrada</span>
        </div>
        <div class="legend-item">
          <div class="legend-color" style="background: #fed7aa; border: 2px solid #ea580c;"></div>
          <span><strong>üö¢ ZARPADA (ETD Pto)</strong> usado para ACC Salida</span>
        </div>
        <div class="legend-item">
          <div class="legend-color legend-red"></div>
          <span><strong>ETD KM 118.5</strong> Salida</span>
        </div>
        ${S?`
        <div class="legend-item">
          <div class="legend-color legend-orange"></div>
          <span><strong>KM 59</strong> (Solo Clase C)</span>
        </div>
        `:""}
        <div class="legend-item">
          <div class="legend-color legend-yellow"></div>
          <span><strong>Reservas de Canal</strong> (CPI/ACC)</span>
        </div>
      </div>
      
      <div class="table-container">
        <table>
          <thead>
            <tr>
              <th style="width: 30px;">N¬∞</th>
              <th style="min-width: 120px;">BUQUE</th>
              <th style="min-width: 75px;">INICIO<br/>TR√ÅNSITO</th>
              <th style="min-width: 75px; background: #047857;">ETA<br/>KM 118.5</th>
              ${S?'<th style="min-width: 75px; background: #c2410c;">KM 59<br/>(Clase C)</th>':""}
              <th style="min-width: 75px; background: #ca8a04;">RESERVA<br/>CPI<br/>ENTRADA</th>
              <th style="min-width: 75px; background: #ca8a04;">RESERVA<br/>ACC<br/>ENTRADA</th>
              <th style="min-width: 75px; background: #059669; font-weight: 900;">‚öì AMARRE<br/>(ETA PTO)</th>
              <th style="min-width: 75px; background: #ea580c; font-weight: 900;">üö¢ ZARPADA<br/>(ETD PTO)</th>
              <th style="min-width: 75px; background: #b45309;">RESERVA<br/>ACC<br/>SALIDA</th>
              <th style="min-width: 75px; background: #b45309;">RESERVA<br/>CPI<br/>SALIDA</th>
              ${S?'<th style="min-width: 75px; background: #c2410c;">KM 59<br/>(Clase C)</th>':""}
              <th style="min-width: 75px; background: #7c2d12;">ETD<br/>KM 118.5</th>
              <th style="width: 55px;">ESLORA<br/>(m)</th>
              <th style="width: 55px;">MANGA<br/>(m)</th>
              <th style="width: 55px;">CALADO<br/>(m)</th>
              <th style="min-width: 80px;">AGENCIA</th>
            </tr>
          </thead>
          <tbody>
            ${A}
          </tbody>
        </table>
      </div>
      
      <div class="footer">
        <div class="footer-stats">
          <div class="stat-item">
            <span class="stat-value">${r.length}</span>
            <span class="stat-label">Total Cruceros</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" style="color: #16a34a;">${T}</span>
            <span class="stat-label">Confirmados</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" style="color: #ca8a04;">${H}</span>
            <span class="stat-label">Pendientes</span>
          </div>
          <div class="stat-item">
            <span class="stat-value" style="color: #dc2626;">${r.filter(l=>l.situation==="CANCELADO").length}</span>
            <span class="stat-label">Cancelados</span>
          </div>
          ${S?`
          <div class="stat-item">
            <span class="stat-value" style="color: #ea580c;">${R}</span>
            <span class="stat-label">Buques Clase C</span>
          </div>
          `:""}
        </div>
        <div class="footer-info">
          <strong>Sistema de Gesti√≥n de Cruceros Oce√°nicos</strong> | Canal Punta Indio KM 118.5<br/>
          Documento de uso interno - Confidencial | ${S?"Incluye horarios KM 59 para buques Clase C":"Sin buques Clase C en este per√≠odo"}
        </div>
      </div>
      
      <script>
        window.onload = function() {
          setTimeout(() => window.print(), 500);
        };
      <\/script>
    </body>
    </html>
  `}function Rn({onUpdate:r}){const[t,n]=f.useState([]),[a,o]=f.useState([]),[s,p]=f.useState(!1),[d,h]=f.useState(null),[g,S]=f.useState(""),[A,M]=f.useState(""),[T,H]=f.useState(""),[R,l]=f.useState(""),[m,j]=f.useState(""),[x,b]=f.useState(""),[W,L]=f.useState("");f.useEffect(()=>{F()},[]);const F=()=>{const u=ne(),k=tt();console.log("üîÑ MovementManager loadData:",{shipsCount:u.length,movementsCount:k.length,movements:k}),n(u),o(k)},w=()=>{S(""),M(""),H(""),l(""),j(""),b(""),L(""),h(null),p(!1)},J=u=>{h(u.id),S(u.shipId),M(u.fechaAmarre?v(u.fechaAmarre,"yyyy-MM-dd'T'HH:mm"):""),H(u.fm||""),l(u.pasajerosIngresados?.toString()||""),j(u.fechaZarpada?v(u.fechaZarpada,"yyyy-MM-dd'T'HH:mm"):""),b(u.to||""),L(u.pasajerosEgresados?.toString()||""),p(!0)},G=()=>{const u=t.find(C=>C.id===g);if(!u){alert("Por favor selecciona un buque");return}const k={shipId:g,shipName:u.buque,fechaAmarre:A?new Date(A):void 0,fm:T||void 0,pasajerosIngresados:R?parseInt(R):void 0,fechaZarpada:m?new Date(m):void 0,to:x||void 0,pasajerosEgresados:W?parseInt(W):void 0};if(console.log("üíæ Saving movement:",k),d)wn(d,k),console.log("‚úèÔ∏è Movement updated:",d);else{const C=An(k);console.log("‚ú® New movement created:",C)}const c=JSON.parse(localStorage.getItem("shipMovements")||"[]");console.log("‚úÖ Total movements after save:",c.length),console.log("üìã All movements:",c),F(),w(),r&&r()},Z=u=>{confirm("¬øEst√°s seguro de eliminar este movimiento?")&&(kn(u),F(),r&&r())},y=[...a].sort((u,k)=>{const c=u.fechaAmarre?.getTime()||0;return(k.fechaAmarre?.getTime()||0)-c});return e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"25px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Ce,{size:28,color:"#60a5fa"}),e.jsx("h2",{style:{color:"white",fontSize:"22px",margin:0,fontWeight:"600"},children:"Registro de Movimientos"})]}),e.jsxs("button",{onClick:()=>p(!s),style:{background:s?"rgba(239, 68, 68, 0.2)":"rgba(34, 197, 94, 0.2)",border:s?"1px solid rgba(239, 68, 68, 0.4)":"1px solid rgba(34, 197, 94, 0.4)",color:s?"#fca5a5":"#86efac",padding:"10px 20px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600",transition:"all 0.2s"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)"},children:[s?e.jsx(be,{size:18}):e.jsx(jt,{size:18}),s?"Cancelar":"Nuevo Movimiento"]})]}),s&&e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.08)",borderRadius:"10px",padding:"20px",marginBottom:"20px",border:"1px solid rgba(255, 255, 255, 0.15)"},children:[e.jsx("h3",{style:{color:"#93c5fd",fontSize:"16px",marginBottom:"15px",fontWeight:"600"},children:d?"Editar Movimiento":"Nuevo Movimiento"}),e.jsxs("div",{style:{marginBottom:"15px"},children:[e.jsx("label",{style:{color:"#93c5fd",fontSize:"13px",display:"block",marginBottom:"6px",fontWeight:"600"},children:"Buque *"}),e.jsxs("select",{value:g,onChange:u=>S(u.target.value),style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"14px"},children:[e.jsx("option",{value:"",style:{background:"#1e3a8a",color:"white"},children:"Seleccionar buque..."}),t.map(u=>e.jsxs("option",{value:u.id,style:{background:"#1e3a8a",color:"white"},children:[u.buque," - ",u.agencia]},u.id))]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",fontSize:"13px",display:"block",marginBottom:"6px",fontWeight:"600"},children:"Fecha Amarre"}),e.jsx("input",{type:"datetime-local",value:A,onChange:u=>M(u.target.value),style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",fontSize:"13px",display:"block",marginBottom:"6px",fontWeight:"600"},children:"FM (Fondeadero/Muelle)"}),e.jsx("input",{type:"text",value:T,onChange:u=>H(u.target.value),placeholder:"Ej: MVD, STS",style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",fontSize:"13px",display:"block",marginBottom:"6px",fontWeight:"600"},children:"Pasajeros Ingresados"}),e.jsx("input",{type:"number",value:R,onChange:u=>l(u.target.value),placeholder:"0",style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",fontSize:"13px",display:"block",marginBottom:"6px",fontWeight:"600"},children:"Fecha Zarpada"}),e.jsx("input",{type:"datetime-local",value:m,onChange:u=>j(u.target.value),style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",fontSize:"13px",display:"block",marginBottom:"6px",fontWeight:"600"},children:"TO (Turn Around)"}),e.jsx("input",{type:"text",value:x,onChange:u=>b(u.target.value),placeholder:"Informaci√≥n adicional",style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",fontSize:"13px",display:"block",marginBottom:"6px",fontWeight:"600"},children:"Pasajeros Egresados"}),e.jsx("input",{type:"number",value:W,onChange:u=>L(u.target.value),placeholder:"0",style:{width:"100%",padding:"10px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"6px",color:"white",fontSize:"14px"}})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"20px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:w,style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#fca5a5",padding:"10px 20px",borderRadius:"6px",cursor:"pointer",fontSize:"14px",fontWeight:"600"},children:"Cancelar"}),e.jsxs("button",{onClick:G,style:{background:"rgba(34, 197, 94, 0.2)",border:"1px solid rgba(34, 197, 94, 0.4)",color:"#86efac",padding:"10px 20px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",fontSize:"14px",fontWeight:"600"},children:[e.jsx(Xe,{size:16}),"Grabar"]})]})]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{borderBottom:"2px solid rgba(255, 255, 255, 0.2)"},children:[e.jsx("th",{style:{padding:"12px 8px",textAlign:"left",color:"#93c5fd",fontSize:"12px",fontWeight:"600"},children:"FECHA AMARRE"}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"left",color:"#93c5fd",fontSize:"12px",fontWeight:"600"},children:"NOMBRE DEL BUQUE"}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"center",color:"#93c5fd",fontSize:"12px",fontWeight:"600"},children:"FM"}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"center",color:"#93c5fd",fontSize:"12px",fontWeight:"600"},children:"PASAJEROS INGRESADOS"}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"left",color:"#93c5fd",fontSize:"12px",fontWeight:"600"},children:"FECHA ZARPADA"}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"center",color:"#93c5fd",fontSize:"12px",fontWeight:"600"},children:"TO"}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"center",color:"#93c5fd",fontSize:"12px",fontWeight:"600"},children:"PASAJEROS EGRESADOS"}),e.jsx("th",{style:{padding:"12px 8px",textAlign:"center",color:"#93c5fd",fontSize:"12px",fontWeight:"600"},children:"ACCIONES"})]})}),e.jsx("tbody",{children:y.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:8,style:{padding:"40px",textAlign:"center",color:"#93c5fd"},children:"No hay movimientos registrados"})}):y.map(u=>e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",transition:"background 0.2s",background:u.fechaZarpada?"transparent":"rgba(34, 197, 94, 0.05)"},onMouseEnter:k=>{k.currentTarget.style.background="rgba(255, 255, 255, 0.08)"},onMouseLeave:k=>{k.currentTarget.style.background=u.fechaZarpada?"transparent":"rgba(34, 197, 94, 0.05)"},children:[e.jsx("td",{style:{padding:"12px 8px",color:"white",fontSize:"13px"},children:u.fechaAmarre?e.jsxs("div",{children:[e.jsx("div",{children:v(u.fechaAmarre,"dd/MM/yyyy")}),e.jsx("div",{style:{color:"#93c5fd",fontSize:"12px",marginTop:"2px"},children:v(u.fechaAmarre,"HH:mm")})]}):"-"}),e.jsxs("td",{style:{padding:"12px 8px",color:"white",fontSize:"14px",fontWeight:"600"},children:[u.shipName,u.fechaZarpada?e.jsx("span",{style:{marginLeft:"8px",background:"rgba(59, 130, 246, 0.2)",color:"#60a5fa",padding:"2px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:"ZARPADO"}):e.jsx("span",{style:{marginLeft:"8px",background:"rgba(34, 197, 94, 0.2)",color:"#86efac",padding:"2px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"600"},children:"EN PUERTO"})]}),e.jsx("td",{style:{padding:"12px 8px",textAlign:"center",color:"#93c5fd",fontSize:"13px"},children:u.fm||"-"}),e.jsx("td",{style:{padding:"12px 8px",textAlign:"center",color:"#86efac",fontSize:"14px",fontWeight:"600"},children:u.pasajerosIngresados?.toLocaleString()||"-"}),e.jsx("td",{style:{padding:"12px 8px",color:"white",fontSize:"13px"},children:u.fechaZarpada?e.jsxs("div",{children:[e.jsx("div",{children:v(u.fechaZarpada,"dd/MM/yyyy")}),e.jsx("div",{style:{color:"#93c5fd",fontSize:"12px",marginTop:"2px"},children:v(u.fechaZarpada,"HH:mm")})]}):"-"}),e.jsx("td",{style:{padding:"12px 8px",textAlign:"center",color:"#93c5fd",fontSize:"13px"},children:u.to||"-"}),e.jsx("td",{style:{padding:"12px 8px",textAlign:"center",color:"#60a5fa",fontSize:"14px",fontWeight:"600"},children:u.pasajerosEgresados?.toLocaleString()||"-"}),e.jsx("td",{style:{padding:"12px 8px",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>J(u),style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.4)",color:"#60a5fa",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:e.jsx(Ga,{size:14})}),e.jsx("button",{onClick:()=>Z(u.id),style:{background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.4)",color:"#fca5a5",padding:"6px 10px",borderRadius:"6px",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px"},children:e.jsx(At,{size:14})})]})})]},u.id))})]})})]})}function Tn({onClose:r}){const t=()=>{window.open("/api/download-manual","_blank")};return e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.85)",backdropFilter:"blur(8px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999,padding:"20px"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%)",borderRadius:"20px",width:"100%",maxWidth:"1200px",maxHeight:"90vh",display:"flex",flexDirection:"column",border:"2px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[e.jsxs("div",{style:{padding:"25px 30px",borderBottom:"2px solid rgba(255, 255, 255, 0.2)",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx(Kt,{size:32,style:{color:"#93c5fd"}}),e.jsxs("div",{children:[e.jsx("h2",{style:{fontSize:"28px",fontWeight:"800",color:"white",margin:0,marginBottom:"4px"},children:"üìñ Manual de Usuario"}),e.jsx("p",{style:{fontSize:"14px",color:"#bfdbfe",margin:0},children:"Sistema de Gesti√≥n de Cruceros Oce√°nicos"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsxs("button",{onClick:t,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 20px",background:"#10b981",border:"none",borderRadius:"10px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:n=>{n.currentTarget.style.background="#059669",n.currentTarget.style.transform="translateY(-2px)"},onMouseOut:n=>{n.currentTarget.style.background="#10b981",n.currentTarget.style.transform="translateY(0)"},children:[e.jsx(Ze,{size:18}),"Descargar Manual"]}),e.jsx("button",{onClick:r,style:{display:"flex",alignItems:"center",justifyContent:"center",width:"44px",height:"44px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"10px",color:"white",cursor:"pointer",transition:"all 0.2s"},onMouseOver:n=>{n.currentTarget.style.background="rgba(239, 68, 68, 0.2)"},onMouseOut:n=>{n.currentTarget.style.background="rgba(255, 255, 255, 0.1)"},children:e.jsx(be,{size:24})})]})]}),e.jsxs("div",{style:{flex:1,overflowY:"auto",padding:"30px",background:"white"},children:[e.jsxs("div",{style:{background:"linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%)",padding:"25px",borderRadius:"12px",marginBottom:"30px",border:"2px solid #3b82f6"},children:[e.jsx("h3",{style:{fontSize:"20px",fontWeight:"700",color:"#1e40af",marginBottom:"15px",display:"flex",alignItems:"center",gap:"10px"},children:"üìë Tabla de Contenido"}),e.jsx("ul",{style:{listStyle:"none",padding:0,margin:0,display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"10px"},children:["1. Introducci√≥n","2. Inicio R√°pido","3. Panel Principal","4. Base de Datos de Buques","5. Planilla de Cruceros","6. Reservas de Canal","7. B√∫squeda y Filtros","8. Importaci√≥n de Datos","9. Generaci√≥n de Reportes","10. Resoluci√≥n de Conflictos","11. Consejos y Mejores Pr√°cticas","12. Preguntas Frecuentes"].map((n,a)=>e.jsx("li",{style:{padding:"8px 12px",background:"white",borderRadius:"6px",fontSize:"14px",color:"#1e40af",fontWeight:"600"},children:n},a))})]}),e.jsxs(le,{number:"1",title:"üéØ Introducci√≥n",icon:"üéØ",children:[e.jsx("h4",{children:"¬øQu√© es este sistema?"}),e.jsxs("p",{children:["El ",e.jsx("strong",{children:"Sistema de Gesti√≥n de Cruceros Oce√°nicos"})," es una aplicaci√≥n web profesional dise√±ada para gestionar el tr√°nsito de cruceros a trav√©s del Canal Punta Indio (KM 118.5)."]}),e.jsx("h4",{children:"Caracter√≠sticas Principales"}),e.jsx(Ee,{items:["Gesti√≥n completa de buques - Base de datos con toda la informaci√≥n t√©cnica","Planificaci√≥n de cruceros - Programaci√≥n de entradas y salidas","C√°lculo autom√°tico - Tiempos de tr√°nsito calculados autom√°ticamente","Detecci√≥n de conflictos - Identifica solapamientos en KM 118.5","Reservas de canal - Gesti√≥n de cierres CPI y ACC","Reportes profesionales - Generaci√≥n de reportes A3 para impresi√≥n","Alertas inteligentes - Notificaciones de cruceros pr√≥ximos"]})]}),e.jsxs(le,{number:"2",title:"üöÄ Inicio R√°pido",icon:"üöÄ",children:[e.jsx("h4",{children:"Acceso al Sistema"}),e.jsxs("ol",{children:[e.jsx("li",{children:"Abrir navegador web (Chrome, Firefox, Edge)"}),e.jsx("li",{children:"Ir a la URL del sistema"}),e.jsx("li",{children:"El sistema carga autom√°ticamente"})]}),e.jsx("h4",{children:"Navegaci√≥n B√°sica"}),e.jsxs("p",{children:["El sistema tiene ",e.jsx("strong",{children:"4 pesta√±as principales"}),":"]}),e.jsx("div",{style:{background:"#f8fafc",padding:"20px",borderRadius:"8px",border:"2px solid #e2e8f0",marginTop:"15px"},children:e.jsx("div",{style:{display:"flex",gap:"10px",justifyContent:"center",flexWrap:"wrap"},children:[{icon:"üè†",name:"Dashboard"},{icon:"üìö",name:"Base Datos"},{icon:"‚öì",name:"Cruceros"},{icon:"üìÖ",name:"Reservas"}].map((n,a)=>e.jsxs("div",{style:{padding:"12px 24px",background:"#3b82f6",color:"white",borderRadius:"8px",fontWeight:"600",fontSize:"14px"},children:[n.icon," ",n.name]},a))})})]}),e.jsxs(le,{number:"3",title:"üìä Panel Principal (Dashboard)",icon:"üìä",children:[e.jsx("h4",{children:"¬øQu√© muestra?"}),e.jsxs("p",{children:["El Dashboard es tu ",e.jsx("strong",{children:"centro de control visual"}),". Muestra:"]}),e.jsxs("div",{style:{marginTop:"20px"},children:[e.jsx(ht,{title:"üìà Estad√≠sticas Generales",items:["Total de buques en base de datos","Total de cruceros programados","Cruceros por mes"]}),e.jsx(ht,{title:"üé® Distribuci√≥n por Clase",items:["Clase A (Calado ‚â• 8.84m) - Color Rojo","Clase B (Calado 7.33-8.83m) - Color Naranja","Clase C (Calado ‚â§ 7.32m) - Color Verde"]}),e.jsx(ht,{title:"üè¢ Top 5 Agencias",items:["Ranking de agencias con m√°s operaciones"]})]})]}),e.jsxs(le,{number:"4",title:"üìö Base de Datos de Buques",icon:"üìö",children:[e.jsx("h4",{children:"Agregar un Buque"}),e.jsxs("ol",{children:[e.jsxs("li",{children:["Click en ",e.jsx("strong",{children:'"Agregar Buque"'})]}),e.jsxs("li",{children:["Completar el formulario:",e.jsxs("ul",{children:[e.jsx("li",{children:"üö¢ Buque (obligatorio)"}),e.jsx("li",{children:"üè¥ Bandera"}),e.jsx("li",{children:"üî¢ IMO (obligatorio)"}),e.jsx("li",{children:"üìè Eslora, Manga, Puntal"}),e.jsx("li",{children:"‚öì Calado (obligatorio)"}),e.jsx("li",{children:"üè¢ Agencia"})]})]}),e.jsxs("li",{children:["Click en ",e.jsx("strong",{children:'"Guardar"'})]})]}),e.jsx("h4",{children:"Clasificaci√≥n Autom√°tica"}),e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"15px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#f1f5f9"},children:[e.jsx("th",{style:Je,children:"Clase"}),e.jsx("th",{style:Je,children:"Calado"}),e.jsx("th",{style:Je,children:"Hasta KM"}),e.jsx("th",{style:Je,children:"Color"})]})}),e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{style:U,children:e.jsx("strong",{children:"A"})}),e.jsx("td",{style:U,children:"‚â• 8.84m"}),e.jsx("td",{style:U,children:"239"}),e.jsx("td",{style:U,children:"üî¥ Rojo"})]}),e.jsxs("tr",{style:{background:"#f8fafc"},children:[e.jsx("td",{style:U,children:e.jsx("strong",{children:"B"})}),e.jsx("td",{style:U,children:"7.33 - 8.83m"}),e.jsx("td",{style:U,children:"216"}),e.jsx("td",{style:U,children:"üü† Naranja"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:U,children:e.jsx("strong",{children:"C"})}),e.jsx("td",{style:U,children:"‚â§ 7.32m"}),e.jsx("td",{style:U,children:"59"}),e.jsx("td",{style:U,children:"üü¢ Verde"})]})]})]})]}),e.jsxs(le,{number:"5",title:"‚öì Planilla de Cruceros",icon:"‚öì",children:[e.jsx("h4",{children:"Agregar un Crucero"}),e.jsxs("ol",{children:[e.jsxs("li",{children:["Click en ",e.jsx("strong",{children:'"Agregar Crucero"'})]}),e.jsxs("li",{children:["Completar:",e.jsxs("ul",{children:[e.jsx("li",{children:"Seleccionar buque"}),e.jsx("li",{children:"Fecha y hora de entrada"}),e.jsx("li",{children:"Fecha y hora de salida"}),e.jsx("li",{children:"Estado (Sin Confirmar/Confirmado/Cancelado)"})]})]}),e.jsxs("li",{children:["Click en ",e.jsx("strong",{children:'"Agregar Crucero"'})]})]}),e.jsxs("div",{style:{background:"#ecfdf5",padding:"20px",borderRadius:"8px",border:"2px solid #10b981",marginTop:"20px"},children:[e.jsx("h4",{style:{color:"#065f46",marginBottom:"10px"},children:"‚ú® C√°lculos Autom√°ticos"}),e.jsxs("p",{style:{color:"#047857",marginBottom:"15px"},children:["El sistema calcula autom√°ticamente ",e.jsx("strong",{children:"todos los tiempos de tr√°nsito"}),":"]}),e.jsxs("ul",{style:{color:"#047857",marginBottom:0},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Entrada:"})," KM 239 ‚Üí KM 216 ‚Üí KM 118.5 ‚Üí Puerto"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Salida:"})," Puerto ‚Üí KM 59 ‚Üí KM 118.5 ‚Üí KM 239"]})]})]})]}),e.jsxs(le,{number:"6",title:"üìÖ Reservas de Canal",icon:"üìÖ",children:[e.jsx("h4",{children:"C√°lculo Autom√°tico de Reservas"}),e.jsx(Ke,{title:"Reserva CPI Entrada",rows:[["Clase A","6 horas antes del ETD"],["Clase B","5.5 horas antes del ETD"],["Clase C","No aplica"]]}),e.jsx(Ke,{title:"Reserva ACC Entrada",rows:[["Clase A","2.5 horas antes del amarre"],["Clase B","2 horas antes del amarre"],["Clase C","1 hora antes del amarre"]]}),e.jsx(Ke,{title:"Reserva ACC Salida",rows:[["Similar a entrada","calculado desde ETD salida"]]}),e.jsx(Ke,{title:"Reserva CPI Salida",rows:[["Clase A","6 horas antes de KM 118.5"],["Clase B","5.5 horas antes de KM 118.5"],["Clase C","No aplica"]]})]}),e.jsxs(le,{number:"7",title:"üîç B√∫squeda y Filtros",icon:"üîç",children:[e.jsx("h4",{children:"B√∫squeda Global"}),e.jsx("p",{children:"En la parte superior del sistema hay una barra de b√∫squeda que permite buscar por:"}),e.jsx(Ee,{items:["Nombre del buque","N√∫mero IMO","Agencia mar√≠tima","Bandera del buque"]}),e.jsx("h4",{children:"Filtros Avanzados"}),e.jsx("p",{children:"En la pesta√±a de Cruceros, puedes activar filtros avanzados:"}),e.jsx(Ee,{items:["üìÖ Rango de fechas (desde/hasta)","üö¢ Clase de buque (A/B/C)","üè¢ Agencia mar√≠tima","üìã Estado (Confirmado/Sin confirmar/Cancelado)"]})]}),e.jsxs(le,{number:"8",title:"üì• Importaci√≥n de Datos",icon:"üì•",children:[e.jsx("h4",{children:"Formatos Soportados"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"CSV"})," - Separado por ",e.jsx("code",{children:";"})," o ",e.jsx("code",{children:","})]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Excel"})," - Archivos .xlsx y .xls"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"JSON"})," - Formato de exportaci√≥n del sistema"]})]}),e.jsx("h4",{children:"Proceso de Importaci√≥n"}),e.jsxs("ol",{children:[e.jsxs("li",{children:["Click en ",e.jsx("strong",{children:'"Importar"'})]}),e.jsx("li",{children:"Seleccionar archivo desde tu computadora"}),e.jsx("li",{children:"El sistema valida y procesa autom√°ticamente"}),e.jsx("li",{children:"Ver resultado con resumen de errores (si los hay)"})]}),e.jsx("div",{style:{background:"#fef3c7",padding:"15px",borderRadius:"8px",border:"2px solid #fbbf24",marginTop:"15px"},children:e.jsxs("p",{style:{margin:0,color:"#92400e",fontWeight:"600"},children:["‚ö†Ô∏è ",e.jsx("strong",{children:"Importante:"})," Los buques deben existir previamente en la base de datos. El sistema busca por nombre exacto."]})})]}),e.jsxs(le,{number:"9",title:"üìÑ Generaci√≥n de Reportes",icon:"üìÑ",children:[e.jsx("h4",{children:"Reporte A3 Profesional"}),e.jsxs("ol",{children:[e.jsxs("li",{children:["Ir a la pesta√±a ",e.jsx("strong",{children:'"Planilla de Cruceros"'})]}),e.jsx("li",{children:"Resolver todos los conflictos (si hay alguno)"}),e.jsxs("li",{children:["Click en ",e.jsx("strong",{children:'"Generar Reporte A3"'})]}),e.jsx("li",{children:"Se abre una nueva ventana con el reporte"}),e.jsxs("li",{children:["Usar ",e.jsx("kbd",{children:"Ctrl+P"})," para imprimir"]})]}),e.jsx("h4",{children:"Configuraci√≥n de Impresi√≥n Recomendada"}),e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",marginTop:"15px"},children:e.jsxs("tbody",{children:[e.jsxs("tr",{style:{background:"#f8fafc"},children:[e.jsx("td",{style:{...U,fontWeight:"600"},children:"Orientaci√≥n:"}),e.jsx("td",{style:U,children:"Horizontal (Landscape)"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{...U,fontWeight:"600"},children:"Papel:"}),e.jsx("td",{style:U,children:"A3"})]}),e.jsxs("tr",{style:{background:"#f8fafc"},children:[e.jsx("td",{style:{...U,fontWeight:"600"},children:"M√°rgenes:"}),e.jsx("td",{style:U,children:"Normal (1cm)"})]}),e.jsxs("tr",{children:[e.jsx("td",{style:{...U,fontWeight:"600"},children:"Escala:"}),e.jsx("td",{style:U,children:"100%"})]})]})})]}),e.jsxs(le,{number:"10",title:"‚ö†Ô∏è Resoluci√≥n de Conflictos",icon:"‚ö†Ô∏è",children:[e.jsx("h4",{children:"Detectar Conflictos"}),e.jsxs("ol",{children:[e.jsxs("li",{children:["Click en ",e.jsx("strong",{children:'"Buscar Conflictos"'})]}),e.jsx("li",{children:"El sistema analiza todos los cruceros autom√°ticamente"}),e.jsx("li",{children:"Muestra lista de conflictos encontrados (si hay)"})]}),e.jsx("h4",{children:"Resolver Conflictos"}),e.jsxs("p",{children:["El sistema sugiere ",e.jsx("strong",{children:"2 opciones de resoluci√≥n"}),":"]}),e.jsxs("div",{style:{marginTop:"15px"},children:[e.jsxs("div",{style:{background:"#fee2e2",padding:"15px",borderRadius:"8px",marginBottom:"10px",border:"2px solid #f87171"},children:[e.jsx("strong",{style:{color:"#991b1b"},children:"Opci√≥n 1:"}),e.jsx("span",{style:{color:"#991b1b"},children:" Retrasar salida del buque saliente"})]}),e.jsxs("div",{style:{background:"#dbeafe",padding:"15px",borderRadius:"8px",border:"2px solid #60a5fa"},children:[e.jsx("strong",{style:{color:"#1e40af"},children:"Opci√≥n 2:"}),e.jsx("span",{style:{color:"#1e40af"},children:" Adelantar entrada del buque entrante"})]})]}),e.jsxs("p",{style:{marginTop:"15px"},children:["Click en ",e.jsx("strong",{children:'"Aplicar"'})," en la soluci√≥n que prefieras."]})]}),e.jsxs(le,{number:"11",title:"üí° Consejos y Mejores Pr√°cticas",icon:"üí°",children:[e.jsx("h4",{children:"Gesti√≥n Diaria"}),e.jsx(Ee,{items:["Revisar Notificaciones de cruceros pr√≥ximos cada ma√±ana","Verificar Reservas de Canal del d√≠a",'Actualizar estados a "Confirmado" cuando sea pertinente',"Buscar conflictos antes de confirmar nuevos cruceros"]}),e.jsx("h4",{children:"Organizaci√≥n"}),e.jsx(Ee,{items:["Mantener base de datos de buques actualizada","Actualizar estados de cruceros regularmente","Solo editar reservas si hay cambio operativo real",'Hacer respaldos peri√≥dicos usando "Exportar"']}),e.jsx("h4",{children:"Importaci√≥n"}),e.jsx(Ee,{items:["Usar la plantilla oficial de CSV","Verificar que los nombres de buques coincidan exactamente","Revisar mensajes de error despu√©s de cada importaci√≥n","Confirmar que los cruceros se cargaron correctamente"]})]}),e.jsxs(le,{number:"12",title:"‚ùì Preguntas Frecuentes",icon:"‚ùì",children:[e.jsx(Ie,{question:"¬øNecesito instalar algo?",answer:"No. Es una aplicaci√≥n web que funciona completamente en el navegador. No requiere instalaci√≥n."}),e.jsx(Ie,{question:"¬øC√≥mo se clasifica un buque?",answer:"Autom√°ticamente por su calado: Clase A (‚â•8.84m), Clase B (7.33-8.83m), Clase C (‚â§7.32m)."}),e.jsx(Ie,{question:"¬øPor qu√© los tiempos no coinciden con mis c√°lculos?",answer:"Verifica la clase del buque y la hora de entrada/salida. El sistema usa velocidades est√°ndar por clase."}),e.jsx(Ie,{question:"¬øLas reservas se actualizan autom√°ticamente?",answer:"S√≠, cada vez que modificas un crucero, las reservas se recalculan autom√°ticamente."}),e.jsx(Ie,{question:"¬øD√≥nde se guardan mis datos?",answer:"Localmente en tu navegador (localStorage). Los datos persisten pero son locales a tu computadora."}),e.jsx(Ie,{question:"¬øC√≥mo hago un respaldo?",answer:"Click en 'Exportar' y guarda el archivo JSON en un lugar seguro."})]}),e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%)",padding:"30px",borderRadius:"12px",marginTop:"40px",color:"white",textAlign:"center"},children:[e.jsx("h3",{style:{fontSize:"24px",marginBottom:"15px"},children:"üìû Soporte y Contacto"}),e.jsxs("p",{style:{fontSize:"16px",marginBottom:"10px"},children:[e.jsx("strong",{children:"Email:"})," alfredojesus.zappa@gmail.com"]}),e.jsx("p",{style:{fontSize:"14px",color:"#bfdbfe",marginBottom:"20px"},children:"Para consultas o soporte t√©cnico"}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",padding:"15px",borderRadius:"8px",fontSize:"13px"},children:[e.jsx("p",{style:{margin:0},children:e.jsx("strong",{children:"Sistema de Gesti√≥n de Cruceros Oce√°nicos"})}),e.jsx("p",{style:{margin:"5px 0 0 0",opacity:.9},children:"Canal Punta Indio - KM 118.5 | ¬© 2026 - Todos los derechos reservados"})]})]})]})]})})}const le=({number:r,title:t,children:n})=>e.jsxs("div",{style:{marginBottom:"35px",padding:"25px",background:"#f8fafc",borderRadius:"12px",border:"2px solid #e2e8f0"},children:[e.jsx("h3",{style:{fontSize:"24px",fontWeight:"700",color:"#1e40af",marginBottom:"20px",paddingBottom:"10px",borderBottom:"3px solid #3b82f6"},children:t}),e.jsx("div",{style:{fontSize:"15px",lineHeight:"1.7",color:"#334155"},children:n})]}),Ee=({items:r})=>e.jsx("ul",{style:{listStyle:"none",padding:0,margin:"15px 0"},children:r.map((t,n)=>e.jsxs("li",{style:{padding:"10px 15px",marginBottom:"8px",background:"white",borderRadius:"6px",borderLeft:"4px solid #3b82f6",fontSize:"14px"},children:["‚úÖ ",t]},n))}),ht=({title:r,items:t})=>e.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"8px",marginBottom:"15px",border:"2px solid #e2e8f0"},children:[e.jsx("h4",{style:{color:"#1e40af",marginBottom:"12px",fontSize:"16px",fontWeight:"700"},children:r}),e.jsx("ul",{style:{margin:0,paddingLeft:"20px"},children:t.map((n,a)=>e.jsx("li",{style:{marginBottom:"6px",color:"#475569",fontSize:"14px"},children:n},a))})]}),Ke=({title:r,rows:t})=>e.jsxs("div",{style:{marginBottom:"20px"},children:[e.jsx("h5",{style:{color:"#0f172a",marginBottom:"10px",fontSize:"15px",fontWeight:"600"},children:r}),e.jsx("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"14px"},children:e.jsx("tbody",{children:t.map((n,a)=>e.jsxs("tr",{style:{background:a%2===0?"white":"#f8fafc"},children:[e.jsx("td",{style:{padding:"10px",border:"1px solid #e2e8f0",fontWeight:"600",color:"#1e40af"},children:n[0]}),e.jsx("td",{style:{padding:"10px",border:"1px solid #e2e8f0",color:"#475569"},children:n[1]})]},a))})})]}),Ie=({question:r,answer:t})=>e.jsxs("div",{style:{background:"white",padding:"20px",borderRadius:"8px",marginBottom:"15px",border:"2px solid #e2e8f0"},children:[e.jsxs("h4",{style:{color:"#1e40af",marginBottom:"10px",fontSize:"16px",fontWeight:"700"},children:["‚ùì ",r]}),e.jsx("p",{style:{margin:0,color:"#475569",fontSize:"14px",lineHeight:"1.6"},children:t})]}),Je={padding:"12px",border:"1px solid #cbd5e1",textAlign:"left",fontWeight:"700",color:"#0f172a",fontSize:"14px"},U={padding:"10px 12px",border:"1px solid #e2e8f0",fontSize:"14px",color:"#334155"};function Nn(){const[r,t]=f.useState(0),[n,a]=f.useState(!1),[o,s]=f.useState({totalShips:0,classA:0,classB:0,classC:0,totalCrossings:0,confirmed:0,pending:0,cancelled:0,conflicts:0,nextCrossing:null,agencies:[],totalPasajerosIngresados:0,totalPasajerosEgresados:0,buquesEnPuerto:0});f.useEffect(()=>{console.log("üîÑ Dashboard useEffect triggered, refreshKey:",r);const d=ne(),h=ie(),g=Ye(h),S=d.filter(w=>se(w.calado)==="A").length,A=d.filter(w=>se(w.calado)==="B").length,M=d.filter(w=>se(w.calado)==="C").length,T=h.filter(w=>w.situation==="CONFIRMADO").length,H=h.filter(w=>w.situation==="SIN CONFIRMAR").length,R=h.filter(w=>w.situation==="CANCELADO").length,l=new Date,m=h.filter(w=>w.diaEntrada>=l&&w.situation!=="CANCELADO").sort((w,J)=>w.diaEntrada.getTime()-J.diaEntrada.getTime())[0],j=[...new Set(d.map(w=>w.agencia))],x=localStorage.getItem("ship_movements");console.log("üíæ Raw localStorage data:",x),console.log("üíæ Raw data type:",typeof x),console.log("üíæ Raw data length:",x?.length);let b=[];try{b=JSON.parse(x||"[]").map(w=>(console.log("üîÑ Processing movement:",w),{...w,fechaAmarre:w.fechaAmarre?new Date(w.fechaAmarre):void 0,fechaZarpada:w.fechaZarpada?new Date(w.fechaZarpada):void 0}))}catch(w){console.error("‚ùå Error parsing movements:",w),b=[]}console.log("üìä Total movements:",b.length),console.log("üîç Movements data:",b);const W=b.reduce((w,J)=>{const G=J.pasajerosIngresados||0;return console.log(`‚ûï Adding ${G} passengers from ${J.shipName}`),w+G},0),L=b.reduce((w,J)=>{const G=J.pasajerosEgresados||0;return console.log(`‚ûñ Adding ${G} egressed passengers from ${J.shipName}`),w+G},0);console.log("üë• Total pasajeros ingresados:",W),console.log("üë• Total pasajeros egresados:",L);const F=b.filter(w=>{const J=w.fechaAmarre!==void 0&&w.fechaAmarre!==null,G=w.fechaZarpada!==void 0&&w.fechaZarpada!==null,Z=J&&!G;return console.log("üö¢ Ship check:",{name:w.shipName,fechaAmarre:w.fechaAmarre,fechaZarpada:w.fechaZarpada,hasAmarre:J,hasZarpada:G,inPort:Z}),Z}).length;console.log("‚öì Buques en puerto:",F),s({totalShips:d.length,classA:S,classB:A,classC:M,totalCrossings:h.length,confirmed:T,pending:H,cancelled:R,conflicts:g.length,nextCrossing:m,agencies:j,totalPasajerosIngresados:W,totalPasajerosEgresados:L,buquesEnPuerto:F})},[r]);const p=({icon:d,title:h,value:g,subtitle:S,color:A,bgColor:M})=>e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"24px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",transition:"all 0.3s ease",cursor:"pointer"},onMouseOver:T=>{T.currentTarget.style.transform="translateY(-5px)",T.currentTarget.style.boxShadow="0 15px 40px rgba(0, 0, 0, 0.4)"},onMouseOut:T=>{T.currentTarget.style.transform="translateY(0)",T.currentTarget.style.boxShadow="0 8px 32px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"15px"},children:[e.jsx("div",{style:{width:"50px",height:"50px",borderRadius:"12px",background:M,display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(d,{size:28,style:{color:A}})}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{color:"#cbd5e1",fontSize:"14px",marginBottom:"4px"},children:h}),e.jsx("div",{style:{color:"white",fontSize:"32px",fontWeight:"700",lineHeight:"1"},children:g})]})]}),S&&e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",marginTop:"10px"},children:S})]});return e.jsxs("div",{style:{padding:"40px 20px"},children:[e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[e.jsx("div",{style:{marginBottom:"40px"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"40px",flexWrap:"wrap",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("h1",{style:{color:"white",fontSize:"32px",margin:0,fontWeight:"700"},children:"üìä Dashboard Principal"}),e.jsx("p",{style:{color:"#94a3b8",fontSize:"16px",margin:"10px 0 0 0"},children:"Vista general del Canal Punta Indio - KM 118.5"})]}),e.jsxs("button",{onClick:()=>a(!0),style:{display:"flex",alignItems:"center",gap:"10px",padding:"14px 24px",background:"linear-gradient(135deg, #3b82f6 0%, #2563eb 100%)",border:"none",borderRadius:"12px",color:"white",fontSize:"15px",fontWeight:"600",cursor:"pointer",boxShadow:"0 4px 12px rgba(59, 130, 246, 0.3)",transition:"all 0.2s"},onMouseOver:d=>{d.currentTarget.style.transform="translateY(-2px)",d.currentTarget.style.boxShadow="0 6px 16px rgba(59, 130, 246, 0.4)"},onMouseOut:d=>{d.currentTarget.style.transform="translateY(0)",d.currentTarget.style.boxShadow="0 4px 12px rgba(59, 130, 246, 0.3)"},children:[e.jsx(Kt,{size:20}),e.jsx("span",{children:"üìñ Manual de Usuario"})]})]})}),e.jsxs("div",{style:{position:"relative",background:"linear-gradient(135deg, #0f172a 0%, #1e3a8a 50%, #0c4a6e 100%)",borderRadius:"24px",padding:"60px 40px",marginBottom:"40px",overflow:"hidden",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.4)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{position:"absolute",bottom:0,left:0,right:0,height:"100px",background:"linear-gradient(to top, rgba(59, 130, 246, 0.2) 0%, transparent 100%)",clipPath:"polygon(0 40%, 25% 50%, 50% 45%, 75% 55%, 100% 50%, 100% 100%, 0 100%)"}}),e.jsx("div",{style:{position:"absolute",top:"30px",right:"40px",opacity:.15,transform:"rotate(-10deg)"},children:e.jsx(Ce,{size:120,style:{color:"white"}})}),e.jsx("div",{style:{position:"absolute",bottom:"30px",left:"40px",opacity:.1,transform:"rotate(15deg)"},children:e.jsx(Se,{size:100,style:{color:"white"}})}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsx("div",{style:{display:"inline-block",background:"rgba(59, 130, 246, 0.2)",backdropFilter:"blur(10px)",padding:"8px 20px",borderRadius:"20px",border:"1px solid rgba(59, 130, 246, 0.3)",marginBottom:"20px"},children:e.jsx("span",{style:{color:"#60a5fa",fontSize:"14px",fontWeight:"600",letterSpacing:"0.5px"},children:"üåä SISTEMA DE GESTI√ìN PORTUARIA"})}),e.jsx("h2",{style:{color:"white",fontSize:"42px",fontWeight:"800",margin:"0 0 15px 0",lineHeight:"1.2",textShadow:"0 2px 20px rgba(0, 0, 0, 0.3)"},children:"Control de Cruceros Oce√°nicos"}),e.jsx("p",{style:{color:"#cbd5e1",fontSize:"18px",margin:"0 0 30px 0",maxWidth:"600px",lineHeight:"1.6"},children:"Gesti√≥n inteligente de tr√°fico mar√≠timo en el Canal Punta Indio. Optimizaci√≥n de cruceros y prevenci√≥n de conflictos en tiempo real."}),e.jsxs("div",{style:{display:"flex",gap:"30px",flexWrap:"wrap"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(34, 197, 94, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(34, 197, 94, 0.3)"},children:e.jsx(Se,{size:20,style:{color:"#22c55e"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"12px"},children:"Canal Principal"}),e.jsx("div",{style:{color:"white",fontSize:"16px",fontWeight:"600"},children:"KM 118.5"})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(59, 130, 246, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(59, 130, 246, 0.3)"},children:e.jsx(vt,{size:20,style:{color:"#3b82f6"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"12px"},children:"Conflictos"}),e.jsx("div",{style:{color:"white",fontSize:"16px",fontWeight:"600"},children:o.conflicts===0?"‚úì Sin conflictos":`${o.conflicts} detectados`})]})]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"10px",background:"rgba(251, 146, 60, 0.2)",display:"flex",alignItems:"center",justifyContent:"center",border:"1px solid rgba(251, 146, 60, 0.3)"},children:e.jsx(Ce,{size:20,style:{color:"#fb923c"}})}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"12px"},children:"En Puerto"}),e.jsxs("div",{style:{color:"white",fontSize:"16px",fontWeight:"600"},children:[o.buquesEnPuerto," ",o.buquesEnPuerto===1?"buque":"buques"]})]})]})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))",gap:"20px",marginBottom:"40px"},children:[e.jsx(p,{icon:Se,title:"Total de Buques",value:o.totalShips,subtitle:"Buques registrados en la base de datos",color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.2)"}),e.jsx(p,{icon:We,title:"Cruceros Programados",value:o.totalCrossings,subtitle:`${o.confirmed} confirmados, ${o.pending} pendientes`,color:"#10b981",bgColor:"rgba(16, 185, 129, 0.2)"}),e.jsx(p,{icon:Ce,title:"Buques en Puerto",value:o.buquesEnPuerto,subtitle:o.buquesEnPuerto>0?"üö¢ Actualmente amarrados":"‚úì Puerto libre",color:o.buquesEnPuerto>0?"#22c55e":"#94a3b8",bgColor:o.buquesEnPuerto>0?"rgba(34, 197, 94, 0.2)":"rgba(148, 163, 184, 0.2)"}),e.jsx(p,{icon:pt,title:"Agencias Mar√≠timas",value:o.agencies.length,subtitle:"Agencias operando en el canal",color:"#f59e0b",bgColor:"rgba(245, 158, 11, 0.2)"}),e.jsx(p,{icon:pt,title:"Pasajeros Ingresados",value:o.totalPasajerosIngresados.toLocaleString(),subtitle:"Total hist√≥rico de ingresos",color:"#3b82f6",bgColor:"rgba(59, 130, 246, 0.2)"}),e.jsx(p,{icon:pt,title:"Pasajeros Egresados",value:o.totalPasajerosEgresados.toLocaleString(),subtitle:"Total hist√≥rico de egresos",color:"#a855f7",bgColor:"rgba(168, 85, 247, 0.2)"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(220px, 1fr))",gap:"20px",marginBottom:"40px"},children:[e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"20px",border:"2px solid #ef4444",transition:"all 0.3s ease"},onMouseOver:d=>{d.currentTarget.style.transform="scale(1.05)"},onMouseOut:d=>{d.currentTarget.style.transform="scale(1)"},children:[e.jsx("div",{style:{fontSize:"48px",fontWeight:"800",color:"#ef4444",marginBottom:"8px"},children:o.classA}),e.jsx("div",{style:{color:"white",fontSize:"16px",fontWeight:"600"},children:"Clase A"}),e.jsx("div",{style:{color:"#fca5a5",fontSize:"13px",marginTop:"5px"},children:"Calado ‚â• 8.84m"})]}),e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"20px",border:"2px solid #f59e0b",transition:"all 0.3s ease"},onMouseOver:d=>{d.currentTarget.style.transform="scale(1.05)"},onMouseOut:d=>{d.currentTarget.style.transform="scale(1)"},children:[e.jsx("div",{style:{fontSize:"48px",fontWeight:"800",color:"#f59e0b",marginBottom:"8px"},children:o.classB}),e.jsx("div",{style:{color:"white",fontSize:"16px",fontWeight:"600"},children:"Clase B"}),e.jsx("div",{style:{color:"#fcd34d",fontSize:"13px",marginTop:"5px"},children:"Calado 7.33-8.83m"})]}),e.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"20px",border:"2px solid #22c55e",transition:"all 0.3s ease"},onMouseOver:d=>{d.currentTarget.style.transform="scale(1.05)"},onMouseOut:d=>{d.currentTarget.style.transform="scale(1)"},children:[e.jsx("div",{style:{fontSize:"48px",fontWeight:"800",color:"#22c55e",marginBottom:"8px"},children:o.classC}),e.jsx("div",{style:{color:"white",fontSize:"16px",fontWeight:"600"},children:"Clase C"}),e.jsx("div",{style:{color:"#86efac",fontSize:"13px",marginTop:"5px"},children:"Calado ‚â§ 7.32m"})]})]}),e.jsx("div",{style:{marginBottom:"40px"},children:e.jsx(Rn,{onUpdate:()=>{console.log("üîÑ MovementManager onUpdate called - triggering refresh"),t(d=>d+1)}})}),o.nextCrossing&&e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"30px",border:"1px solid rgba(59, 130, 246, 0.3)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)",marginBottom:"40px"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"20px"},children:[e.jsx(We,{size:32,style:{color:"#60a5fa"}}),e.jsx("h2",{style:{margin:0,color:"white",fontSize:"24px"},children:"Pr√≥ximo Crucero"})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px"},children:[e.jsxs("div",{children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",marginBottom:"5px"},children:"Buque"}),e.jsx("div",{style:{color:"white",fontSize:"18px",fontWeight:"600"},children:o.nextCrossing.ship.buque}),e.jsxs("div",{style:{color:"#60a5fa",fontSize:"13px",marginTop:"3px"},children:["Clase ",se(o.nextCrossing.ship.calado)]})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",marginBottom:"5px"},children:"Fecha de Entrada"}),e.jsx("div",{style:{color:"white",fontSize:"18px",fontWeight:"600"},children:v(o.nextCrossing.diaEntrada,"dd/MM/yyyy")}),e.jsx("div",{style:{color:"#60a5fa",fontSize:"13px",marginTop:"3px"},children:o.nextCrossing.horaEntrada})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",marginBottom:"5px"},children:"ETA KM 118.5"}),e.jsx("div",{style:{color:"white",fontSize:"18px",fontWeight:"600"},children:o.nextCrossing.entry.km118_5?v(o.nextCrossing.entry.km118_5,"dd/MM HH:mm"):"‚Äî"})]}),e.jsxs("div",{children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",marginBottom:"5px"},children:"Agencia"}),e.jsx("div",{style:{color:"white",fontSize:"18px",fontWeight:"600"},children:o.nextCrossing.ship.agencia})]})]})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px"},children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e.jsx(qa,{size:28,style:{color:"#a78bfa"}}),e.jsx("h3",{style:{margin:0,color:"white",fontSize:"20px"},children:"Estados de Cruceros"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"rgba(34, 197, 94, 0.1)",borderRadius:"10px"},children:[e.jsx("span",{style:{color:"white",fontSize:"15px"},children:"‚úì Confirmados"}),e.jsx("span",{style:{color:"#22c55e",fontSize:"24px",fontWeight:"700"},children:o.confirmed})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"rgba(251, 191, 36, 0.1)",borderRadius:"10px"},children:[e.jsx("span",{style:{color:"white",fontSize:"15px"},children:"‚è≥ Sin Confirmar"}),e.jsx("span",{style:{color:"#fbbf24",fontSize:"24px",fontWeight:"700"},children:o.pending})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"12px",background:"rgba(107, 114, 128, 0.1)",borderRadius:"10px"},children:[e.jsx("span",{style:{color:"white",fontSize:"15px"},children:"‚úñ Cancelados"}),e.jsx("span",{style:{color:"#6b7280",fontSize:"24px",fontWeight:"700"},children:o.cancelled})]})]})]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e.jsx(nr,{size:28,style:{color:"#34d399"}}),e.jsx("h3",{style:{margin:0,color:"white",fontSize:"20px"},children:"Informaci√≥n del Sistema"})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[e.jsxs("div",{style:{padding:"10px 0",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",marginBottom:"5px"},children:"Canal Principal"}),e.jsx("div",{style:{color:"white",fontSize:"15px",fontWeight:"600"},children:"Punta Indio - KM 118.5"})]}),e.jsxs("div",{style:{padding:"10px 0",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",marginBottom:"5px"},children:"Margen de Seguridad"}),e.jsx("div",{style:{color:"white",fontSize:"15px",fontWeight:"600"},children:"30 minutos"})]}),e.jsxs("div",{style:{padding:"10px 0",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",marginBottom:"5px"},children:"Puntos de Control"}),e.jsx("div",{style:{color:"white",fontSize:"15px",fontWeight:"600"},children:"KM 239 ‚Ä¢ KM 216 ‚Ä¢ KM 118.5 ‚Ä¢ KM 59"})]}),e.jsxs("div",{style:{padding:"10px 0"},children:[e.jsx("div",{style:{color:"#94a3b8",fontSize:"13px",marginBottom:"5px"},children:"Sistema Activo"}),e.jsx("div",{style:{color:"#22c55e",fontSize:"15px",fontWeight:"600"},children:"‚úì Operando normalmente"})]})]})]})]})]}),n&&e.jsx(Tn,{onClose:()=>a(!1)})]})}function zn({crossings:r}){const t=new Date;yt(t,24);const n=yt(t,48),a=r.filter(o=>{const s=o.diaEntrada;return Lt(t,s)&&Lt(s,n)}).sort((o,s)=>o.diaEntrada.getTime()-s.diaEntrada.getTime());return a.length===0?null:e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.15)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"20px",marginBottom:"30px",border:"2px solid rgba(59, 130, 246, 0.4)",boxShadow:"0 4px 20px rgba(59, 130, 246, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"15px"},children:[e.jsx(Da,{size:24,style:{color:"#60a5fa"}}),e.jsx("h3",{style:{margin:0,color:"white",fontSize:"18px",fontWeight:"700"},children:"üîî Cruceros Pr√≥ximos (48 horas)"}),e.jsx("span",{style:{padding:"4px 12px",background:"#3b82f6",borderRadius:"20px",color:"white",fontSize:"13px",fontWeight:"700"},children:a.length})]}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:a.map(o=>{const s=br(o.diaEntrada,t),p=s<=24;return e.jsxs("div",{style:{background:p?"rgba(251, 191, 36, 0.15)":"rgba(255, 255, 255, 0.05)",border:p?"1px solid rgba(251, 191, 36, 0.5)":"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"8px",padding:"15px",display:"flex",alignItems:"center",gap:"15px",transition:"all 0.2s"},onMouseOver:d=>{d.currentTarget.style.background=p?"rgba(251, 191, 36, 0.25)":"rgba(255, 255, 255, 0.1)"},onMouseOut:d=>{d.currentTarget.style.background=p?"rgba(251, 191, 36, 0.15)":"rgba(255, 255, 255, 0.05)"},children:[p?e.jsx(vt,{size:24,style:{color:"#fbbf24",flexShrink:0}}):e.jsx(bt,{size:24,style:{color:"#60a5fa",flexShrink:0}}),e.jsxs("div",{style:{flex:1},children:[e.jsx("div",{style:{fontWeight:"700",color:"white",fontSize:"15px",marginBottom:"4px"},children:o.ship.buque}),e.jsxs("div",{style:{fontSize:"13px",color:"#93c5fd"},children:[o.ship.bandera," ‚Ä¢ IMO ",o.ship.imo]})]}),e.jsxs("div",{style:{textAlign:"right",minWidth:"150px"},children:[e.jsx("div",{style:{fontWeight:"700",color:p?"#fbbf24":"#60a5fa",fontSize:"14px",marginBottom:"4px"},children:v(o.diaEntrada,"dd/MM/yyyy")}),e.jsxs("div",{style:{fontSize:"13px",color:p?"#fde68a":"#bfdbfe"},children:[o.horaEntrada," ‚Ä¢ En ",s,"h"]})]}),p&&e.jsx("div",{style:{padding:"6px 14px",background:"#fbbf24",borderRadius:"6px",color:"#78350f",fontSize:"12px",fontWeight:"700",whiteSpace:"nowrap"},children:"‚ö° URGENTE"})]},o.id)})})]})}function Dn({globalSearch:r=""}){const[t,n]=f.useState([]),[a,o]=f.useState([]),[s,p]=f.useState([]),[d,h]=f.useState(!1),[g,S]=f.useState(!0),[A,M]=f.useState(null),[T,H]=f.useState(""),[R,l]=f.useState(""),[m,j]=f.useState(""),[x,b]=f.useState(""),[W,L]=f.useState(""),[F,w]=f.useState(!1),[J,G]=f.useState(!1),[Z,y]=f.useState(null),[u,k]=f.useState(""),[c,C]=f.useState(""),[P,N]=f.useState(""),[E,V]=f.useState(""),[Q,K]=f.useState(""),[ye,Te]=f.useState("SIN CONFIRMAR"),[Ne,He]=f.useState(!1),[Ae,Le]=f.useState("");f.useEffect(()=>{console.log(`üîç Estado de cruceros actualizado: ${a.length} cruceros`),a.length>0&&console.log("üìã Primeros 3 cruceros:",a.slice(0,3).map(i=>({buque:i.ship.buque,entrada:i.diaEntrada,salida:i.diaSalida})))},[a]),f.useEffect(()=>{try{const i=ne(),D=ie();console.log("üîÑ Verificando si es necesario recalcular tiempos de entrada...");let z=!1;const B=D.map(I=>{const ae=i.find(Ve=>Ve.id===I.shipId);if(!ae)return I;const te=new Date(`${v(I.diaEntrada,"yyyy-MM-dd")}T${I.horaEntrada}:00`),Y=new Date(`${v(I.diaSalida,"yyyy-MM-dd")}T${I.horaSalida}:00`),de=ue(ae,te),ze=xe(ae,Y);return!I.entry.etaPto||I.entry.etaPto.getTime()!==de.etaPto?.getTime()?(console.log(`‚ö†Ô∏è Actualizando tiempos para ${ae.buque}`),z=!0,gt(I.id,{entry:de,exit:ze}),{...I,entry:de,exit:ze}):I});if(z){console.log("‚úÖ Rec√°lculo completado. Recargando datos...");const I=ie();n(i),o(I)}else console.log("‚úÖ No se necesita rec√°lculo"),n(i),o(D);S(!1)}catch(i){console.error("‚ùå Error al cargar cruceros:",i),M("Error al cargar cruceros. Por favor, int√©ntelo nuevamente.")}},[]);const $e=()=>{G(!1),y(null),k(""),C(""),N(""),V(""),K(""),Te("SIN CONFIRMAR")},ra=i=>{y(i),k(i.ship.id),C(v(i.diaEntrada,"yyyy-MM-dd")),N(i.horaEntrada),V(v(i.diaSalida,"yyyy-MM-dd")),K(i.horaSalida),Te(i.situation),G(!0)},na=i=>{confirm("¬øEst√° seguro de eliminar este crucero?")&&(Ft(i),o(a.filter(D=>D.id!==i)))},oa=()=>{He(!0),Le("")},ia=()=>{if(Ae.toUpperCase()!=="ELIMINAR TODO"){alert('‚ö†Ô∏è Debe escribir exactamente "ELIMINAR TODO" para confirmar');return}confirm(`‚ö†Ô∏è √öLTIMA CONFIRMACI√ìN

Est√° a punto de eliminar TODOS los ${a.length} cruceros del sistema.

Esta acci√≥n NO se puede deshacer.

¬øEst√° absolutamente seguro de continuar?`)&&(a.forEach(D=>Ft(D.id)),o([]),p([]),He(!1),alert("‚úÖ Todos los cruceros han sido eliminados del sistema"))},sa=()=>{if(!u||!c||!P||!E||!Q){alert("‚ö†Ô∏è Por favor complete todos los campos");return}const i=t.find(B=>B.id===u);if(!i)return;const D=new Date(`${c}T${P}:00`),z=new Date(`${E}T${Q}:00`);if(Z){console.log("‚úèÔ∏è Editando crucero:",Z.id),gt(Z.id,{ship:i,diaEntrada:new Date(c),horaEntrada:P,diaSalida:new Date(E),horaSalida:Q,situation:ye,entry:ue(i,D),exit:xe(i,z)}),console.log("üîÑ Recalculando reservas de canal...");try{const{calculateReservations:B}=require("./ChannelReservations"),I=ie(),ae=B(I,t);localStorage.setItem("channelReservations",JSON.stringify(ae)),console.log("‚úÖ Reservas recalculadas:",ae.length)}catch(B){console.error("‚ùå Error recalculando reservas:",B)}alert("‚úÖ Crucero actualizado exitosamente"),$e(),console.log("üîÑ Recargando p√°gina..."),setTimeout(()=>{window.location.reload()},500)}else{console.log("‚ûï Agregando nuevo crucero");const B=$t({ship:i,diaEntrada:new Date(c),horaEntrada:P,diaSalida:new Date(E),horaSalida:Q,situation:ye,entry:ue(i,D),exit:xe(i,z)});console.log("üîÑ Recalculando reservas de canal...");try{const{calculateReservations:I}=require("./ChannelReservations"),ae=ie(),te=I(ae,t);localStorage.setItem("channelReservations",JSON.stringify(te)),console.log("‚úÖ Reservas recalculadas:",te.length)}catch(I){console.error("‚ùå Error recalculando reservas:",I)}o([...a,B]),alert("‚úÖ Crucero agregado exitosamente"),$e()}},la=(i,D)=>{gt(i,{situation:D}),o(a.map(z=>z.id===i?{...z,situation:D}:z))},da=()=>{const i=Ye(a);p(i),h(!0),i.length===0&&alert("‚úÖ ¬°No se encontraron conflictos! Todos los cruceros est√°n programados correctamente.")},ca=(i,D)=>{const B=s[i].suggestions[D];Sn(B.crossingId,B.newDateTime,B.action==="advance-incoming"?"entry":"exit");const I=ie();o(I);const ae=Ye(I);p(ae),alert("‚úÖ Resoluci√≥n aplicada. Verifique los nuevos horarios.")},pa=()=>{const i=En(),D=new Blob([i],{type:"application/json"}),z=URL.createObjectURL(D),B=document.createElement("a");B.href=z,B.download=`cruceros-${v(new Date,"yyyy-MM-dd")}.json`,B.click(),URL.revokeObjectURL(z)},ua=i=>{const D=i.target.files?.[0];if(!D)return;const z=new FileReader;z.onload=B=>{try{const I=B.target?.result;if(D.name.toLowerCase().endsWith(".csv")||I.trim().startsWith("Buque")||!I.trim().startsWith("{")){const te=I.split(`
`).filter(X=>X.trim());if(te.length<2){alert("‚ùå El archivo CSV est√° vac√≠o o no tiene datos");return}const Y=te[0].includes(";")?";":",",de=te[0].split(Y).map(X=>X.trim().toLowerCase()),ze=de.map(X=>X.replace(/_/g," ").replace(/\s+/g," "));console.log("üìÑ Headers detectados:",de),console.log("üìÑ Headers normalizados:",ze),console.log("üîç Delimitador:",Y);let Ve=0,De=0;for(let X=1;X<te.length;X++){const kt=te[X].trim();if(!kt)continue;const fa=kt.split(Y).map(ce=>ce.trim()),q={};ze.forEach((ce,he)=>{q[ce]=fa[he]||""}),console.log(`Fila ${X}:`,q);try{const ce=q.buque||q.ship||q.nombre||q.vessel;if(!ce){console.warn(`‚ö†Ô∏è Nombre de buque no encontrado en fila ${X}`),De++;continue}const he=t.find(we=>we.buque.toLowerCase()===ce?.toLowerCase());if(!he){console.warn(`‚ö†Ô∏è Buque no encontrado en base de datos: "${ce}"`),De++;continue}const at=q["fecha entrada"]||q["dia entrada"]||q.diaentrada||q["entry date"],rt=q["hora entrada"]||q.horaentrada||q["entry time"]||"08:00",nt=q["fecha salida"]||q["dia salida"]||q.diasalida||q["exit date"],ot=q["hora salida"]||q.horasalida||q["exit time"]||"14:00";if(!at||!nt){console.warn(`‚ö†Ô∏è Fechas faltantes en fila ${X}`,{entryDateStr:at,exitDateStr:nt}),De++;continue}const Et=we=>{if(we.includes("/")){const[Ca,Sa,Aa]=we.split("/");return new Date(parseInt(Aa),parseInt(Sa)-1,parseInt(Ca))}else if(we.includes("-"))return new Date(we);throw new Error("Formato de fecha no v√°lido")},it=Et(at),st=Et(nt),[ba,ya]=rt.split(":"),It=new Date(it);It.setHours(parseInt(ba)||8,parseInt(ya)||0);const[va,ja]=ot.split(":"),Mt=new Date(st);Mt.setHours(parseInt(va)||14,parseInt(ja)||0);const Rt=(q.situacion||q.situation||q.status||"SIN CONFIRMAR").toUpperCase();let lt="SIN CONFIRMAR";Rt.includes("CONFIRM")&&(lt="CONFIRMADO"),Rt.includes("CANCEL")&&(lt="CANCELADO"),console.log("‚ûï Agregando crucero:",{buque:he.buque,entryDate:it,exitDate:st,entryTimeStr:rt,exitTimeStr:ot});const Tt=$t({ship:he,diaEntrada:it,horaEntrada:rt,diaSalida:st,horaSalida:ot,situation:lt,entry:ue(he,It),exit:xe(he,Mt),fm:q.fm||q.fondeadero||q.berth||"",to:q.to||q.turnaround||"",notes:q.notas||q.notes||q.observaciones||""});console.log("‚úÖ Crucero agregado con ID:",Tt.id,"N√∫mero:",Tt.numero),Ve++,console.log(`‚úÖ Crucero importado: ${he.buque}`)}catch(ce){console.error(`‚ùå Error en fila ${X}:`,ce),De++}}console.log("üîÑ Recargando datos desde localStorage...");const ma=ne(),Oe=ie();console.log(`üìä Cruceros cargados: ${Oe.length}`),console.log("üìã Lista de cruceros:",Oe),n(ma),o(Oe),setTimeout(()=>{const X=Ye(Oe);p(X),console.log(`‚ö†Ô∏è Conflictos detectados: ${X.length}`)},100),alert(`‚úÖ Importaci√≥n completada

üìä Cruceros importados: ${Ve}
‚ö†Ô∏è Errores: ${De}
üìã Total de cruceros en sistema: ${Oe.length}`)}else{const te=In(I);if(te.success){const Y=ne(),de=ie();n(Y),o(de),alert("‚úÖ Datos importados exitosamente desde JSON")}else alert(`‚ùå Error al importar JSON: ${te.error}`)}}catch(I){console.error("‚ùå Error al procesar archivo:",I),alert(`‚ùå Error al procesar el archivo: ${I instanceof Error?I.message:"Error desconocido"}`)}},z.readAsText(D)},xa=()=>{if(s.length>0){alert("‚ö†Ô∏è Hay conflictos sin resolver. Por favor resuelva todos los conflictos antes de generar el reporte.");return}console.log("üìä ========== PREPARANDO REPORTE =========="),console.log("üìä Total de crossings:",a.length);let i=[];try{const B=localStorage.getItem("channelReservations");if(console.log("üì¶ localStorage channelReservations:",B?"EXISTE":"NO EXISTE"),B){if(i=JSON.parse(B),console.log("üìä Reservas cargadas:",i.length),i.length>0){console.log("üìã Primeras 3 reservas:"),i.slice(0,3).forEach((Y,de)=>{console.log(`  ${de+1}.`,{cruiseId:Y.cruiseId,buque:Y.buque,clase:Y.clase,CPI_IN:Y.reservaCPIEntrada,ACC_IN:Y.reservaACCEntrada})});const I=new Set(a.map(Y=>Y.id)),ae=new Set(i.map(Y=>Y.cruiseId));console.log("üîç An√°lisis de IDs:"),console.log("  - Crossing IDs:",Array.from(I).slice(0,5)),console.log("  - Reservation cruiseIds:",Array.from(ae).slice(0,5));const te=i.filter(Y=>I.has(Y.cruiseId));console.log(`  - Coincidencias: ${te.length}/${i.length}`)}}else console.warn("‚ö†Ô∏è No hay reservas guardadas en localStorage")}catch(B){console.error("‚ùå Error al cargar reservas:",B)}console.log("üöÄ Generando HTML del reporte...");const D=Mn(a,t,i);console.log("‚úÖ HTML generado, tama√±o:",D.length,"caracteres");const z=window.open("","_blank");if(!z){alert(`‚ùå No se pudo abrir la ventana del reporte.

Por favor, permita las ventanas emergentes en su navegador.`);return}z.document.write(D),z.document.close(),z.onload=()=>{console.log("‚úÖ Reporte cargado en nueva ventana")},console.log("‚úÖ Reporte abierto en nueva ventana"),alert(`‚úÖ Reporte A3 generado exitosamente!

üìÑ El reporte se abri√≥ en una nueva ventana.

üñ®Ô∏è Use Ctrl+P para imprimir en formato A3 horizontal.`)},ga=i=>{switch(i){case"A":return"#ef4444";case"B":return"#f59e0b";case"C":return"#22c55e";default:return"#64748b"}};if(g)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center",color:"white",padding:"40px"},children:[e.jsx(Ce,{size:48,style:{margin:"0 auto 20px"}}),e.jsx("h2",{children:"Cargando Sistema de Cruceros..."})]})});if(A)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:e.jsxs("div",{style:{textAlign:"center",color:"white",padding:"40px",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[e.jsx(je,{size:48,style:{color:"#fbbf24",marginBottom:"20px"}}),e.jsx("h2",{children:"Error al cargar cruceros"}),e.jsx("p",{style:{color:"#93c5fd",marginTop:"15px"},children:A})]})});const Fe=[...a].sort((i,D)=>i.diaEntrada.getTime()-D.diaEntrada.getTime()).filter(i=>{if(r){const D=r.toLowerCase();if(!(i.ship.buque.toLowerCase().includes(D)||i.ship.imo?.toLowerCase().includes(D)||i.ship.agencia?.toLowerCase().includes(D)||i.ship.bandera?.toLowerCase().includes(D)))return!1}return!(T&&i.diaEntrada<new Date(T)||R&&i.diaEntrada>new Date(R)||m&&se(i.ship.calado)!==m||x&&i.ship.agencia!==x||W&&i.situation!==W)});Array.from(new Set(t.map(i=>i.agencia).filter(Boolean)));const ha=s.length>0;try{return e.jsxs("div",{style:{minHeight:"100vh",padding:"40px 20px"},children:[e.jsxs("div",{style:{maxWidth:"1600px",margin:"0 auto"},children:[e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"25px",marginBottom:"30px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"10px"},children:[e.jsx(Ce,{size:32,style:{color:"#60a5fa"}}),e.jsx("h1",{style:{fontSize:"28px",margin:0,fontWeight:"bold",color:"white"},children:"SISTEMA DE CRUCEROS OCE√ÅNICOS"})]}),e.jsx("p",{style:{fontSize:"14px",margin:0,color:"#93c5fd"},children:"üìç Canal Punta Indio - KM 118.5 | Gesti√≥n de movimientos y detecci√≥n de conflictos"})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",marginBottom:"30px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:da,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"#f59e0b",border:"none",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:i=>{i.currentTarget.style.background="#d97706",i.currentTarget.style.transform="translateY(-2px)"},onMouseOut:i=>{i.currentTarget.style.background="#f59e0b",i.currentTarget.style.transform="translateY(0)"},children:[e.jsx(Ct,{size:18})," Buscar Conflictos"]}),e.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"#3b82f6",border:"none",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:i=>{i.currentTarget.style.background="#2563eb",i.currentTarget.style.transform="translateY(-2px)"},onMouseOut:i=>{i.currentTarget.style.background="#3b82f6",i.currentTarget.style.transform="translateY(0)"},children:[e.jsx(sr,{size:18})," Importar",e.jsx("input",{type:"file",accept:".xlsx,.xls,.csv",onChange:ua,style:{display:"none"}})]}),e.jsxs("button",{onClick:pa,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"#10b981",border:"none",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:i=>{i.currentTarget.style.background="#059669",i.currentTarget.style.transform="translateY(-2px)"},onMouseOut:i=>{i.currentTarget.style.background="#10b981",i.currentTarget.style.transform="translateY(0)"},children:[e.jsx(Ze,{size:18})," Exportar"]}),e.jsxs("button",{onClick:oa,disabled:a.length===0,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:a.length===0?"rgba(239, 68, 68, 0.3)":"#ef4444",border:"none",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"600",cursor:a.length===0?"not-allowed":"pointer",transition:"all 0.2s",opacity:a.length===0?.5:1},onMouseOver:i=>{a.length>0&&(i.currentTarget.style.background="#dc2626",i.currentTarget.style.transform="translateY(-2px)")},onMouseOut:i=>{a.length>0&&(i.currentTarget.style.background="#ef4444",i.currentTarget.style.transform="translateY(0)")},children:[e.jsx(je,{size:18})," Eliminar Todos"]}),!ha&&a.length>0&&e.jsxs("button",{onClick:xa,style:{display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"#10b981",border:"none",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:i=>{i.currentTarget.style.background="#059669",i.currentTarget.style.transform="translateY(-2px)"},onMouseOut:i=>{i.currentTarget.style.background="#10b981",i.currentTarget.style.transform="translateY(0)"},children:[e.jsx(Va,{size:18})," Generar Reporte A3"]})]}),e.jsx(zn,{crossings:a}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"20px",marginBottom:"30px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:[e.jsxs("button",{onClick:()=>w(!F),style:{display:"flex",alignItems:"center",gap:"8px",padding:"10px 16px",background:"rgba(96, 165, 250, 0.2)",border:"1px solid rgba(96, 165, 250, 0.4)",borderRadius:"8px",color:"#60a5fa",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",marginBottom:F?"20px":0},onMouseOver:i=>{i.currentTarget.style.background="rgba(96, 165, 250, 0.3)"},onMouseOut:i=>{i.currentTarget.style.background="rgba(96, 165, 250, 0.2)"},children:[F?"‚ñº":"‚ñ∂"," Filtros Avanzados",(T||R||m||x||W)&&e.jsx("span",{style:{padding:"2px 8px",background:"#3b82f6",borderRadius:"12px",fontSize:"11px",color:"white"},children:"Activos"})]}),F&&e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"600"},children:"üìÖ Desde"}),e.jsx("input",{type:"date",value:T,onChange:i=>H(i.target.value),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"13px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"600"},children:"üìÖ Hasta"}),e.jsx("input",{type:"date",value:R,onChange:i=>l(i.target.value),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"13px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"600"},children:"üö¢ Clase"}),e.jsxs("select",{value:m,onChange:i=>j(i.target.value),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"13px",cursor:"pointer"},children:[e.jsx("option",{value:"",style:{background:"#1e293b"},children:"Todas"}),e.jsx("option",{value:"A",style:{background:"#1e293b"},children:"Clase A"}),e.jsx("option",{value:"B",style:{background:"#1e293b"},children:"Clase B"}),e.jsx("option",{value:"C",style:{background:"#1e293b"},children:"Clase C"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"600"},children:"üè¢ Agencia"}),e.jsx("input",{type:"text",placeholder:"Filtrar por agencia...",value:x,onChange:i=>b(i.target.value),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"13px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"6px",fontSize:"13px",fontWeight:"600"},children:"üìã Estado"}),e.jsxs("select",{value:W,onChange:i=>L(i.target.value),style:{width:"100%",padding:"10px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"13px",cursor:"pointer"},children:[e.jsx("option",{value:"",style:{background:"#1e293b"},children:"Todos"}),e.jsx("option",{value:"SIN CONFIRMAR",style:{background:"#1e293b"},children:"Sin Confirmar"}),e.jsx("option",{value:"CONFIRMADO",style:{background:"#1e293b"},children:"Confirmado"}),e.jsx("option",{value:"CANCELADO",style:{background:"#1e293b"},children:"Cancelado"})]})]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end"},children:e.jsx("button",{onClick:()=>{H(""),l(""),j(""),b(""),L("")},style:{width:"100%",padding:"10px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"8px",color:"#f87171",fontSize:"13px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseOver:i=>i.currentTarget.style.background="rgba(239, 68, 68, 0.3)",onMouseLeave:i=>i.currentTarget.style.background="rgba(239, 68, 68, 0.2)",children:"Limpiar Filtros"})})]})]}),d&&e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"25px",marginBottom:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"20px"},children:[e.jsx(je,{size:28,style:{color:"#fbbf24"}}),e.jsx("h2",{style:{margin:0,color:"white",fontSize:"24px",fontWeight:"bold"},children:s.length===0?"‚úÖ Sin Conflictos":`‚ö†Ô∏è ${s.length} Conflicto(s) Detectado(s)`})]}),s.length>0&&e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:s.map((i,D)=>e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"12px",padding:"20px"},children:[e.jsxs("div",{style:{color:"white",marginBottom:"15px"},children:[e.jsx("h3",{style:{margin:"0 0 10px 0",color:"#fef2f2"},children:"üö® Conflicto en KM 118.5"}),e.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[e.jsx("strong",{children:"Buque Entrante:"})," ",i.entryShip.ship.buque," ‚Üí ETA KM 118.5: ",e.jsx("span",{style:{color:"#fbbf24"},children:i.entryShip.entry.km118_5?v(i.entryShip.entry.km118_5,"dd/MM HH:mm"):"-"})]}),e.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[e.jsx("strong",{children:"Buque Saliente:"})," ",i.exitShip.ship.buque," ‚Üí ETD KM 118.5: ",e.jsx("span",{style:{color:"#fbbf24"},children:i.exitShip.exit.km118_5?v(i.exitShip.exit.km118_5,"dd/MM HH:mm"):"-"})]}),e.jsxs("p",{style:{margin:"5px 0",fontSize:"14px"},children:[e.jsx("strong",{children:"Diferencia:"})," ",Math.round(i.timeDifference)," minutos"]})]}),e.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:[e.jsx("h4",{style:{color:"#bfdbfe",margin:"0 0 10px 0"},children:"üí° Soluciones Propuestas:"}),i.suggestions.map((z,B)=>e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",padding:"15px",borderRadius:"12px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("div",{style:{flex:1},children:[e.jsx("p",{style:{margin:"0 0 5px 0",color:"white",fontSize:"13px"},children:e.jsx("strong",{children:z.action==="delay-outgoing"?"‚è∞ Retrasar Salida":"‚è∞ Adelantar Entrada"})}),e.jsxs("p",{style:{margin:"0",color:"#e2e8f0",fontSize:"12px"},children:[z.shipName," ‚Üí ",v(z.newDateTime,"dd/MM HH:mm")]}),e.jsx("p",{style:{margin:"5px 0 0 0",color:"#cbd5e1",fontSize:"11px"},children:z.reason})]}),e.jsx("button",{onClick:()=>ca(D,B),style:{padding:"10px 20px",background:"#22c55e",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",fontWeight:"600",fontSize:"13px",whiteSpace:"nowrap"},children:"Aplicar"})]},B))]})]},D))})]}),e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"30px",border:"1px solid rgba(255, 255, 255, 0.1)",position:"relative"},children:[e.jsxs("h2",{style:{marginBottom:"25px",display:"flex",alignItems:"center",gap:"12px",color:"white",fontSize:"24px",fontWeight:"bold"},children:[e.jsx(Se,{size:28,style:{color:"#60a5fa"}}),"üìã Planilla de Cruceros",e.jsxs("span",{style:{padding:"6px 14px",background:"#3b82f6",borderRadius:"20px",color:"white",fontSize:"14px",fontWeight:"700"},children:[Fe.length," ",Fe.length!==a.length&&`de ${a.length}`]})]}),e.jsxs("button",{onClick:()=>G(!0),style:{position:"absolute",top:"30px",right:"30px",display:"flex",alignItems:"center",gap:"8px",padding:"12px 24px",background:"#10b981",border:"none",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",zIndex:10},onMouseOver:i=>{i.currentTarget.style.background="#059669",i.currentTarget.style.transform="translateY(-2px)"},onMouseOut:i=>{i.currentTarget.style.background="#10b981",i.currentTarget.style.transform="translateY(0)"},children:[e.jsx(jt,{size:18})," Agregar Crucero"]}),e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"rgba(96, 165, 250, 0.1)",borderBottom:"2px solid rgba(96, 165, 250, 0.3)"},children:[e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#60a5fa",width:"40px"},children:"N¬∞"}),e.jsx("th",{style:{padding:"10px",textAlign:"left",fontWeight:"bold",color:"#60a5fa",minWidth:"180px"},children:"Buque"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#60a5fa",minWidth:"95px"},children:"üì• Inicio Tr√°nsito"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#22c55e",minWidth:"95px"},children:"ETA KM 118.5"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#22c55e",minWidth:"95px"},children:"ETA KM 59 (C)"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#10b981",minWidth:"95px"},children:"‚öì Amarre (ETA Pto)"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#f59e0b",minWidth:"95px"},children:"üö¢ Zarpada (ETD Pto)"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#f87171",minWidth:"95px"},children:"ETD KM 59 (C)"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#f87171",minWidth:"95px"},children:"ETD KM 118.5"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#60a5fa",minWidth:"95px"},children:"üö¢ Fin Tr√°nsito"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#60a5fa",minWidth:"120px"},children:"Estado"}),e.jsx("th",{style:{padding:"10px",textAlign:"center",fontWeight:"bold",color:"#60a5fa",minWidth:"150px"},children:"Acciones"})]})}),e.jsx("tbody",{children:Fe.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:12,style:{padding:"60px",textAlign:"center",color:"#cbd5e1"},children:[e.jsx(Se,{size:48,style:{opacity:.3,margin:"0 auto 15px",display:"block"}}),e.jsx("p",{style:{margin:0,fontWeight:"600"},children:a.length===0?"No hay cruceros registrados":"No hay cruceros que coincidan con los filtros"})]})}):Fe.map((i,D)=>{const z=se(i.ship.calado),B=ga(z);return e.jsxs("tr",{style:{borderBottom:"1px solid rgba(255, 255, 255, 0.1)",transition:"background 0.15s"},onMouseOver:I=>I.currentTarget.style.background="rgba(255, 255, 255, 0.05)",onMouseOut:I=>I.currentTarget.style.background="transparent",children:[e.jsx("td",{style:{padding:"10px",textAlign:"center",fontWeight:"700",color:B,borderLeft:`3px solid ${B}`},children:D+1}),e.jsxs("td",{style:{padding:"10px"},children:[e.jsx("div",{style:{fontWeight:"700",color:"white",fontSize:"13px",marginBottom:"3px"},children:i.ship.buque}),e.jsxs("div",{style:{fontSize:"10px",color:"#94a3b8"},children:[i.ship.bandera," ¬∑ IMO ",i.ship.imo]}),e.jsxs("span",{style:{display:"inline-block",marginTop:"4px",padding:"2px 8px",background:B,color:"white",borderRadius:"4px",fontSize:"10px",fontWeight:"700"},children:["CLASE ",z]})]}),e.jsxs("td",{style:{padding:"10px",textAlign:"center",color:"white"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"13px"},children:v(i.diaEntrada,"dd/MM/yy")}),e.jsx("div",{style:{color:"#93c5fd",fontSize:"13px",marginTop:"2px"},children:i.horaEntrada})]}),e.jsxs("td",{style:{padding:"10px",textAlign:"center",color:"white"},children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"13px"},children:v(i.diaEntrada,"dd/MM/yy")}),e.jsx("div",{style:{color:"#93c5fd",fontSize:"13px",marginTop:"2px"},children:i.horaEntrada})]}),e.jsx("td",{style:{padding:"10px",textAlign:"center",background:z==="C"?"rgba(34, 197, 94, 0.15)":"transparent"},children:z==="C"&&i.entry.km59_in?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontWeight:"700",color:"#22c55e",fontSize:"13px"},children:v(i.entry.km59_in,"dd/MM/yy")}),e.jsx("div",{style:{color:"#4ade80",fontSize:"14px",fontWeight:"700",marginTop:"2px"},children:v(i.entry.km59_in,"HH:mm")})]}):e.jsx("span",{style:{color:"#64748b"},children:"‚Äî"})}),e.jsx("td",{style:{padding:"10px",textAlign:"center",background:"rgba(16, 185, 129, 0.25)",border:"2px solid rgba(16, 185, 129, 0.5)"},children:i.entry?.etaPto&&i.entry.etaPto instanceof Date&&!isNaN(i.entry.etaPto.getTime())?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontWeight:"800",color:"#10b981",fontSize:"13px"},children:v(i.entry.etaPto,"dd/MM/yy")}),e.jsx("div",{style:{color:"#34d399",fontSize:"15px",fontWeight:"800",marginTop:"2px"},children:v(i.entry.etaPto,"HH:mm")})]}):e.jsx("span",{style:{color:"#64748b"},children:"‚Äî"})}),e.jsx("td",{style:{padding:"10px",textAlign:"center",background:"rgba(245, 158, 11, 0.25)",border:"2px solid rgba(245, 158, 11, 0.5)"},children:i.exit?.etdPto&&i.exit.etdPto instanceof Date&&!isNaN(i.exit.etdPto.getTime())?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontWeight:"800",color:"#f59e0b",fontSize:"13px"},children:v(i.exit.etdPto,"dd/MM/yy")}),e.jsx("div",{style:{color:"#fbbf24",fontSize:"15px",fontWeight:"800",marginTop:"2px"},children:v(i.exit.etdPto,"HH:mm")})]}):e.jsx("span",{style:{color:"#64748b"},children:"‚Äî"})}),e.jsx("td",{style:{padding:"10px",textAlign:"center",background:z==="C"?"rgba(239, 68, 68, 0.15)":"transparent"},children:z==="C"&&i.exit.km59?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontWeight:"700",color:"#f87171",fontSize:"13px"},children:v(i.exit.km59,"dd/MM/yy")}),e.jsx("div",{style:{color:"#fca5a5",fontSize:"14px",fontWeight:"700",marginTop:"2px"},children:v(i.exit.km59,"HH:mm")})]}):e.jsx("span",{style:{color:"#64748b"},children:"‚Äî"})}),e.jsx("td",{style:{padding:"10px",textAlign:"center",background:"rgba(239, 68, 68, 0.15)"},children:i.exit.km118_5?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontWeight:"700",color:"#f87171",fontSize:"13px"},children:v(i.exit.km118_5,"dd/MM/yy")}),e.jsx("div",{style:{color:"#fca5a5",fontSize:"14px",fontWeight:"700",marginTop:"2px"},children:v(i.exit.km118_5,"HH:mm")})]}):e.jsx("span",{style:{color:"#64748b"},children:"‚Äî"})}),e.jsx("td",{style:{padding:"10px",textAlign:"center",color:"white"},children:z==="A"&&i.exit.km239?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"13px"},children:v(i.exit.km239,"dd/MM/yy")}),e.jsx("div",{style:{color:"#93c5fd",fontSize:"13px",marginTop:"2px"},children:v(i.exit.km239,"HH:mm")})]}):z==="B"&&i.exit.km216?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"13px"},children:v(i.exit.km216,"dd/MM/yy")}),e.jsx("div",{style:{color:"#93c5fd",fontSize:"13px",marginTop:"2px"},children:v(i.exit.km216,"HH:mm")})]}):z==="C"&&i.exit.km59?e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{fontWeight:"600",fontSize:"13px"},children:v(i.exit.km59,"dd/MM/yy")}),e.jsx("div",{style:{color:"#93c5fd",fontSize:"13px",marginTop:"2px"},children:v(i.exit.km59,"HH:mm")})]}):e.jsx("span",{style:{color:"#64748b"},children:"‚Äî"})}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:e.jsxs("select",{value:i.situation,onChange:I=>la(i.id,I.target.value),style:{padding:"6px 10px",borderRadius:"6px",border:"1px solid",borderColor:i.situation==="CONFIRMADO"?"#22c55e":i.situation==="CANCELADO"?"#94a3b8":"#eab308",fontSize:"10px",fontWeight:"700",cursor:"pointer",background:i.situation==="CONFIRMADO"?"rgba(34, 197, 94, 0.2)":i.situation==="CANCELADO"?"rgba(148, 163, 184, 0.2)":"rgba(234, 179, 8, 0.2)",color:i.situation==="CONFIRMADO"?"#22c55e":i.situation==="CANCELADO"?"#94a3b8":"#eab308"},children:[e.jsx("option",{value:"SIN CONFIRMAR",children:"SIN CONFIRMAR"}),e.jsx("option",{value:"CONFIRMADO",children:"CONFIRMADO"}),e.jsx("option",{value:"CANCELADO",children:"CANCELADO"})]})}),e.jsx("td",{style:{padding:"10px",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"6px",justifyContent:"center"},children:[e.jsxs("button",{onClick:()=>ra(i),style:{padding:"6px 12px",background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.5)",borderRadius:"6px",color:"#60a5fa",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",transition:"all 0.2s"},onMouseEnter:I=>I.currentTarget.style.background="rgba(59, 130, 246, 0.3)",onMouseLeave:I=>I.currentTarget.style.background="rgba(59, 130, 246, 0.2)",children:[e.jsx(St,{size:12}),"Editar"]}),e.jsxs("button",{onClick:()=>na(i.id),style:{padding:"6px 12px",background:"rgba(239, 68, 68, 0.2)",border:"1px solid rgba(239, 68, 68, 0.5)",borderRadius:"6px",color:"#f87171",cursor:"pointer",display:"flex",alignItems:"center",gap:"4px",fontSize:"11px",transition:"all 0.2s"},onMouseEnter:I=>I.currentTarget.style.background="rgba(239, 68, 68, 0.3)",onMouseLeave:I=>I.currentTarget.style.background="rgba(239, 68, 68, 0.2)",children:[e.jsx(At,{size:12}),"Eliminar"]})]})})]},i.id)})})]})})]})]}),J&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",borderRadius:"16px",padding:"30px",width:"100%",maxWidth:"800px",maxHeight:"90vh",overflowY:"auto",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"25px"},children:[e.jsx("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"white"},children:Z?"‚úèÔ∏è Editar Crucero":"‚ûï Agregar Nuevo Crucero"}),e.jsx("button",{onClick:$e,style:{background:"transparent",border:"none",color:"#93c5fd",cursor:"pointer",padding:"8px"},children:e.jsx(be,{size:24})})]}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"25px"},children:[e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"üö¢ Buque"}),e.jsxs("select",{value:u,onChange:i=>k(i.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"14px",cursor:"pointer"},children:[e.jsx("option",{value:"",children:"Seleccionar buque..."}),t.map(i=>e.jsxs("option",{value:i.id,style:{background:"#1e293b"},children:[i.buque," - Clase ",se(i.calado)]},i.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"üì• Fecha Entrada"}),e.jsx("input",{type:"date",value:c,onChange:i=>C(i.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"üïê Hora Entrada"}),e.jsx("input",{type:"time",value:P,onChange:i=>N(i.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"üì§ Fecha Salida"}),e.jsx("input",{type:"date",value:E,onChange:i=>V(i.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"14px"}})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"üïê Hora Salida"}),e.jsx("input",{type:"time",value:Q,onChange:i=>K(i.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"14px"}})]}),e.jsxs("div",{style:{gridColumn:"1 / -1"},children:[e.jsx("label",{style:{color:"#93c5fd",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"üìã Estado"}),e.jsxs("select",{value:ye,onChange:i=>Te(i.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.1)",color:"white",fontSize:"14px",cursor:"pointer"},children:[e.jsx("option",{value:"SIN CONFIRMAR",style:{background:"#1e293b"},children:"‚è≥ Sin Confirmar"}),e.jsx("option",{value:"CONFIRMADO",style:{background:"#1e293b"},children:"‚úì Confirmado"}),e.jsx("option",{value:"CANCELADO",style:{background:"#1e293b"},children:"‚úñ Cancelado"})]})]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px"},children:[e.jsxs("button",{type:"button",onClick:sa,style:{flex:1,display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",padding:"12px",background:"#3b82f6",border:"none",borderRadius:"8px",color:"white",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:i=>i.currentTarget.style.background="#2563eb",onMouseLeave:i=>i.currentTarget.style.background="#3b82f6",children:[e.jsx(Xe,{size:18}),Z?"Guardar Cambios":"Agregar Crucero"]}),e.jsx("button",{type:"button",onClick:$e,style:{flex:1,padding:"12px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#93c5fd",fontSize:"14px",fontWeight:"600",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:i=>i.currentTarget.style.background="rgba(255, 255, 255, 0.15)",onMouseLeave:i=>i.currentTarget.style.background="rgba(255, 255, 255, 0.1)",children:"Cancelar"})]})]})}),Ne&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",borderRadius:"20px",padding:"40px",maxWidth:"600px",width:"100%",position:"relative",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"3px solid #fca5a5"},children:[e.jsx("button",{onClick:()=>{He(!1),Le("")},style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(be,{size:24})}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx(je,{size:60,style:{color:"#fef3c7",marginBottom:"20px"}}),e.jsx("h2",{style:{color:"white",fontSize:"28px",fontWeight:"800",marginBottom:"15px"},children:"‚ö†Ô∏è ADVERTENCIA CR√çTICA"}),e.jsxs("p",{style:{color:"white",fontSize:"16px",lineHeight:"1.6",marginBottom:"20px"},children:["Est√° a punto de ",e.jsxs("strong",{children:["ELIMINAR TODOS LOS ",a.length," CRUCEROS"]})," del sistema."]}),e.jsx("p",{style:{color:"#fef3c7",fontSize:"14px",fontWeight:"600",marginBottom:"10px"},children:"‚õî Esta acci√≥n es PERMANENTE e IRREVERSIBLE"}),e.jsx("p",{style:{color:"#fef3c7",fontSize:"14px",marginBottom:"0"},children:"‚õî NO se puede deshacer"})]}),e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsxs("label",{style:{color:"white",display:"block",marginBottom:"12px",fontSize:"15px",fontWeight:"700",textAlign:"center"},children:["Para confirmar, escriba exactamente:",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"18px",color:"#fef3c7",fontFamily:"monospace",background:"rgba(0, 0, 0, 0.3)",padding:"8px 16px",borderRadius:"8px",display:"inline-block",marginTop:"10px"},children:"ELIMINAR TODO"})]}),e.jsx("input",{type:"text",value:Ae,onChange:i=>Le(i.target.value),placeholder:"Escriba aqu√≠...",style:{width:"100%",padding:"16px",borderRadius:"12px",border:"3px solid rgba(255, 255, 255, 0.3)",background:"rgba(255, 255, 255, 0.95)",fontSize:"16px",textAlign:"center",fontWeight:"600",textTransform:"uppercase"},autoFocus:!0})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>{He(!1),Le("")},style:{padding:"16px 32px",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"12px",color:"#dc2626",cursor:"pointer",fontWeight:"700",fontSize:"16px"},children:"Cancelar"}),e.jsx("button",{onClick:ia,disabled:Ae.toUpperCase()!=="ELIMINAR TODO",style:{padding:"16px 32px",background:Ae.toUpperCase()==="ELIMINAR TODO"?"linear-gradient(145deg, #fbbf24, #f59e0b)":"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"12px",color:"white",cursor:Ae.toUpperCase()==="ELIMINAR TODO"?"pointer":"not-allowed",fontWeight:"700",fontSize:"16px",opacity:Ae.toUpperCase()==="ELIMINAR TODO"?1:.5},children:"‚ö†Ô∏è CONFIRMAR ELIMINACI√ìN"})]})]})})]})}catch(i){return console.error("‚ùå Error al renderizar:",i),e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:e.jsxs("div",{style:{textAlign:"center",color:"white",padding:"40px",backgroundColor:"rgba(255, 255, 255, 0.1)"},children:[e.jsx(je,{size:48,style:{color:"#fbbf24",marginBottom:"20px"}}),e.jsx("h2",{children:"Error al renderizar el sistema de cruceros"}),e.jsx("p",{style:{color:"#93c5fd",marginTop:"15px"},children:i instanceof Error?i.message:"Error desconocido"})]})})}}function On({globalSearch:r=""}){const[t,n]=f.useState([]),[a,o]=f.useState([]),[s,p]=f.useState(""),[d,h]=f.useState("ALL"),[g,S]=f.useState("ALL"),[A,M]=f.useState(!1),[T,H]=f.useState(null),[R,l]=f.useState(!1),[m,j]=f.useState(""),[x,b]=f.useState({buque:"",bandera:"",imo:"",eslora:"",manga:"",puntal:"",calado:"",agencia:""});f.useEffect(()=>{W()},[]),f.useEffect(()=>{L()},[t,s,d,g,r]);const W=()=>{const c=ne();n(c)},L=()=>{let c=[...t];const C=(r+" "+s).trim();C&&(c=c.filter(P=>P.buque.toLowerCase().includes(C.toLowerCase())||P.imo.toLowerCase().includes(C.toLowerCase())||P.agencia.toLowerCase().includes(C.toLowerCase())||P.bandera.toLowerCase().includes(C.toLowerCase()))),d!=="ALL"&&(c=c.filter(P=>se(P.calado)===d)),g!=="ALL"&&(c=c.filter(P=>P.agencia===g)),o(c)},F=()=>{H(null),b({buque:"",bandera:"",imo:"",eslora:"",manga:"",puntal:"",calado:"",agencia:""}),M(!0)},w=c=>{H(c),b({buque:c.buque,bandera:c.bandera,imo:c.imo,eslora:c.eslora.toString(),manga:c.manga.toString(),puntal:c.puntal.toString(),calado:c.calado.toString(),agencia:c.agencia}),M(!0)},J=c=>{confirm("√Ç¬øEst√É¬° seguro de eliminar este buque?")&&(jn(c),W())},G=()=>{l(!0),j("")},Z=()=>{if(m.toUpperCase()!=="ELIMINAR TODO"){alert('√¢≈°¬†√Ø¬∏¬è Debe escribir exactamente "ELIMINAR TODO" para confirmar');return}confirm(`√¢≈°¬†√Ø¬∏¬è √É≈°LTIMA CONFIRMACI√É‚ÄúN

Est√É¬° a punto de eliminar TODOS los ${t.length} buques de la base de datos.

Esta acci√É¬≥n NO se puede deshacer.

√Ç¬øEst√É¬° absolutamente seguro de continuar?`)&&(Me([]),W(),l(!1),alert("√¢≈ì‚Ä¶ Todos los buques han sido eliminados de la base de datos"))},y=()=>{if(!x.buque||!x.imo||!x.calado){alert("√¢≈°¬†√Ø¬∏¬è Complete los campos obligatorios: Buque, IMO y Calado");return}const c={buque:x.buque,bandera:x.bandera,imo:x.imo,eslora:parseFloat(x.eslora)||0,manga:parseFloat(x.manga)||0,puntal:parseFloat(x.puntal)||0,calado:parseFloat(x.calado),agencia:x.agencia};if(T){console.log("√∞≈∏‚Äù‚Äû Actualizando buque:",T.id),vn(T.id,c);try{const C=localStorage.getItem("ship_crossings");if(C){const P=JSON.parse(C);let N=0;const E=P.map(V=>{if(V.ship.id===T.id){N++,console.log(`  √¢≈ì‚Ä¶ Actualizando crucero: ${V.ship.buque} √¢‚Ä†‚Äô ${c.buque}`);const{calculateEntryTimes:Q,calculateExitTimes:K}=require("../lib/ships"),ye=new Date(`${V.diaEntrada}T${V.horaEntrada}:00`),Te=new Date(`${V.diaSalida}T${V.horaSalida}:00`),Ne={...V.ship,...c};return{...V,ship:Ne,entry:Q(Ne,ye),exit:K(Ne,Te)}}return V});if(N>0){localStorage.setItem("ship_crossings",JSON.stringify(E)),console.log(`√¢≈ì‚Ä¶ ${N} crucero(s) actualizado(s)`);const{calculateReservations:V}=require("./ChannelReservations"),Q=ne(),K=V(E,Q);localStorage.setItem("channelReservations",JSON.stringify(K)),console.log("√¢≈ì‚Ä¶ Reservas de canal recalculadas")}}}catch(C){console.error("√¢¬ù≈í Error sincronizando cruceros:",C)}alert("√¢≈ì‚Ä¶ Buque actualizado y sincronizado con cruceros existentes")}else yn(c),alert("√¢≈ì‚Ä¶ Buque agregado");W(),M(!1),setTimeout(()=>{window.location.reload()},500)},u=c=>{switch(c){case"A":return"#ef4444";case"B":return"#f59e0b";case"C":return"#22c55e";default:return"#64748b"}},k=[...new Set(t.map(c=>c.agencia))].sort();return e.jsx("div",{style:{padding:"40px 20px"},children:e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto"},children:[e.jsxs("div",{style:{marginBottom:"30px",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("h1",{style:{fontSize:"36px",fontWeight:"800",color:"white",marginBottom:"10px",display:"flex",alignItems:"center",gap:"15px"},children:[e.jsx(Se,{size:40}),"Base de Datos de Buques"]}),e.jsxs("p",{style:{color:"#94a3b8",fontSize:"16px",margin:0},children:[a.length," de ",t.length," buques"]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:G,disabled:t.length===0,style:{padding:"14px 28px",background:t.length===0?"rgba(239, 68, 68, 0.3)":"linear-gradient(145deg, #ef4444, #dc2626)",border:"none",borderRadius:"12px",color:"white",cursor:t.length===0?"not-allowed":"pointer",fontWeight:"700",fontSize:"15px",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.3s ease",opacity:t.length===0?.5:1},onMouseOver:c=>{t.length>0&&(c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 10px 25px rgba(239, 68, 68, 0.5)")},onMouseOut:c=>{t.length>0&&(c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="none")},children:[e.jsx(je,{size:20})," Eliminar Todos"]}),e.jsxs("button",{onClick:F,style:{padding:"14px 28px",background:"linear-gradient(145deg, #3b82f6, #2563eb)",border:"none",borderRadius:"12px",color:"white",cursor:"pointer",fontWeight:"700",fontSize:"15px",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.3s ease"},onMouseOver:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 10px 25px rgba(59, 130, 246, 0.5)"},onMouseOut:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="none"},children:[e.jsx(jt,{size:20})," Agregar Buque"]})]})]}),e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"25px",marginBottom:"30px",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"15px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√∞≈∏‚Äù¬ç Buscar"}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(Ct,{size:20,style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",color:"#64748b"}}),e.jsx("input",{type:"text",placeholder:"Nombre, IMO o Agencia...",value:s,onChange:c=>p(c.target.value),style:{width:"100%",padding:"12px 12px 12px 40px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px"}})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√∞≈∏≈Ω¬Ø Filtrar por Clase"}),e.jsxs("select",{value:d,onChange:c=>h(c.target.value),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px",fontWeight:"500"},children:[e.jsx("option",{value:"ALL",children:"Todas las Clases"}),e.jsx("option",{value:"A",children:"Clase A (√¢‚Ä∞¬•8.84m)"}),e.jsx("option",{value:"B",children:"Clase B (7.33-8.83m)"}),e.jsx("option",{value:"C",children:"Clase C (√¢‚Ä∞¬§7.32m)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√∞≈∏¬è¬¢ Filtrar por Agencia"}),e.jsxs("select",{value:g,onChange:c=>S(c.target.value),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px",fontWeight:"500"},children:[e.jsx("option",{value:"ALL",children:"Todas las Agencias"}),k.map(c=>e.jsx("option",{value:c,children:c},c))]})]})]})}),R&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.9)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:2e3,padding:"20px"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #dc2626 0%, #991b1b 100%)",borderRadius:"20px",padding:"40px",maxWidth:"600px",width:"100%",position:"relative",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)",border:"3px solid #fca5a5"},children:[e.jsx("button",{onClick:()=>{l(!1),j("")},style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(be,{size:24})}),e.jsxs("div",{style:{textAlign:"center",marginBottom:"30px"},children:[e.jsx(je,{size:60,style:{color:"#fef3c7",marginBottom:"20px"}}),e.jsx("h2",{style:{color:"white",fontSize:"28px",fontWeight:"800",marginBottom:"15px"},children:"√¢≈°¬†√Ø¬∏¬è ADVERTENCIA CR√É¬çTICA"}),e.jsxs("p",{style:{color:"white",fontSize:"16px",lineHeight:"1.6",marginBottom:"20px"},children:["Est√É¬° a punto de ",e.jsxs("strong",{children:["ELIMINAR TODOS LOS ",t.length," BUQUES"]})," de la base de datos."]}),e.jsx("p",{style:{color:"#fef3c7",fontSize:"14px",fontWeight:"600",marginBottom:"10px"},children:"√¢‚Ä∫‚Äù Esta acci√É¬≥n es PERMANENTE e IRREVERSIBLE"}),e.jsx("p",{style:{color:"#fef3c7",fontSize:"14px",marginBottom:"0"},children:"√¢‚Ä∫‚Äù NO se puede deshacer"})]}),e.jsxs("div",{style:{marginBottom:"30px"},children:[e.jsxs("label",{style:{color:"white",display:"block",marginBottom:"12px",fontSize:"15px",fontWeight:"700",textAlign:"center"},children:["Para confirmar, escriba exactamente:",e.jsx("br",{}),e.jsx("span",{style:{fontSize:"18px",color:"#fef3c7",fontFamily:"monospace",background:"rgba(0, 0, 0, 0.3)",padding:"8px 16px",borderRadius:"8px",display:"inline-block",marginTop:"10px"},children:"ELIMINAR TODO"})]}),e.jsx("input",{type:"text",value:m,onChange:c=>j(c.target.value),placeholder:"Escriba aqu√É¬≠...",style:{width:"100%",padding:"16px",borderRadius:"12px",border:"3px solid rgba(255, 255, 255, 0.3)",background:"rgba(255, 255, 255, 0.95)",fontSize:"16px",textAlign:"center",fontWeight:"600",textTransform:"uppercase"},autoFocus:!0})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>{l(!1),j("")},style:{padding:"16px 32px",background:"rgba(255, 255, 255, 0.9)",border:"none",borderRadius:"12px",color:"#dc2626",cursor:"pointer",fontWeight:"700",fontSize:"16px"},children:"Cancelar"}),e.jsx("button",{onClick:Z,disabled:m.toUpperCase()!=="ELIMINAR TODO",style:{padding:"16px 32px",background:m.toUpperCase()==="ELIMINAR TODO"?"linear-gradient(145deg, #fbbf24, #f59e0b)":"rgba(255, 255, 255, 0.2)",border:"none",borderRadius:"12px",color:"white",cursor:m.toUpperCase()==="ELIMINAR TODO"?"pointer":"not-allowed",fontWeight:"700",fontSize:"16px",opacity:m.toUpperCase()==="ELIMINAR TODO"?1:.5},children:"√¢≈°¬†√Ø¬∏¬è CONFIRMAR ELIMINACI√É‚ÄúN"})]})]})}),A&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.8)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e3a8a 0%, #1e40af 100%)",borderRadius:"20px",padding:"40px",maxWidth:"800px",width:"100%",maxHeight:"90vh",overflowY:"auto",position:"relative",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.5)"},children:[e.jsx("button",{onClick:()=>M(!1),style:{position:"absolute",top:"20px",right:"20px",background:"rgba(255, 255, 255, 0.1)",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",padding:"8px",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(be,{size:24})}),e.jsx("h2",{style:{color:"white",marginBottom:"30px",fontSize:"28px"},children:T?"√¢≈ì¬è√Ø¬∏¬è Editar Buque":"√¢≈æ‚Ä¢ Agregar Nuevo Buque"}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"20px",marginBottom:"30px"},children:[e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√∞≈∏≈°¬¢ Buque *"}),e.jsx("input",{type:"text",value:x.buque,onChange:c=>b({...x,buque:c.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px"},placeholder:"Nombre del buque"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√∞≈∏¬è¬¥ Bandera"}),e.jsx("input",{type:"text",value:x.bandera,onChange:c=>b({...x,bandera:c.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px"},placeholder:"Pa√É¬≠s de bandera"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√∞≈∏‚Äù¬¢ IMO *"}),e.jsx("input",{type:"text",value:x.imo,onChange:c=>b({...x,imo:c.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px"},placeholder:"N√É¬∫mero IMO"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√∞≈∏‚Äú¬è Eslora (m)"}),e.jsx("input",{type:"number",step:"0.01",value:x.eslora,onChange:c=>b({...x,eslora:c.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px"},placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√¢‚Ä†‚Äù√Ø¬∏¬è Manga (m)"}),e.jsx("input",{type:"number",step:"0.01",value:x.manga,onChange:c=>b({...x,manga:c.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px"},placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√¢‚Ä†‚Ä¢√Ø¬∏¬è Puntal (m)"}),e.jsx("input",{type:"number",step:"0.01",value:x.puntal,onChange:c=>b({...x,puntal:c.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px"},placeholder:"0.00"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√¢≈°‚Äú Calado (m) *"}),e.jsx("input",{type:"number",step:"0.01",value:x.calado,onChange:c=>b({...x,calado:c.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px"},placeholder:"0.00"}),x.calado&&e.jsxs("div",{style:{marginTop:"8px",padding:"6px 12px",borderRadius:"8px",background:u(se(parseFloat(x.calado))),color:"white",fontSize:"12px",fontWeight:"600",textAlign:"center"},children:["Clase ",se(parseFloat(x.calado))]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{color:"white",display:"block",marginBottom:"8px",fontSize:"14px",fontWeight:"600"},children:"√∞≈∏¬è¬¢ Agencia"}),e.jsx("input",{type:"text",value:x.agencia,onChange:c=>b({...x,agencia:c.target.value}),style:{width:"100%",padding:"12px",borderRadius:"12px",border:"2px solid rgba(255, 255, 255, 0.2)",background:"rgba(255, 255, 255, 0.9)",fontSize:"14px"},placeholder:"Agencia mar√É¬≠tima"})]})]}),e.jsxs("div",{style:{display:"flex",gap:"15px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:()=>M(!1),style:{padding:"14px 28px",background:"rgba(255, 255, 255, 0.1)",border:"2px solid rgba(255, 255, 255, 0.3)",borderRadius:"12px",color:"white",cursor:"pointer",fontWeight:"600",fontSize:"15px"},children:"Cancelar"}),e.jsxs("button",{onClick:y,style:{padding:"14px 28px",background:"linear-gradient(145deg, #22c55e, #16a34a)",border:"none",borderRadius:"12px",color:"white",cursor:"pointer",fontWeight:"700",fontSize:"15px",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(Xe,{size:20}),T?"Actualizar":"Guardar"]})]})]})}),e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.95)",backdropFilter:"blur(10px)",borderRadius:"20px",padding:"30px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"13px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{background:"#0c4a6e",color:"white"},children:[e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"N√Ç¬∞"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"left",fontWeight:"700"},children:"Buque"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"Bandera"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"IMO"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"Eslora (m)"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"Manga (m)"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"Puntal (m)"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"Calado (m)"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"Clase"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"Agencia"}),e.jsx("th",{style:{padding:"14px 10px",textAlign:"center",fontWeight:"700"},children:"Acciones"})]})}),e.jsx("tbody",{children:a.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:11,style:{padding:"40px",textAlign:"center",color:"#64748b",fontSize:"14px"},children:s||d!=="ALL"||g!=="ALL"?"No se encontraron buques con los filtros aplicados":"No hay buques registrados. Agregue el primer buque."})}):a.map((c,C)=>{const P=se(c.calado),N=u(P);return e.jsxs("tr",{style:{borderBottom:"1px solid #e2e8f0",transition:"background 0.2s ease"},onMouseOver:E=>E.currentTarget.style.background="#f1f5f9",onMouseOut:E=>E.currentTarget.style.background="white",children:[e.jsx("td",{style:{padding:"12px 10px",textAlign:"center",fontWeight:"600"},children:C+1}),e.jsx("td",{style:{padding:"12px 10px"},children:e.jsx("div",{style:{fontWeight:"700",color:"#0c4a6e"},children:c.buque})}),e.jsx("td",{style:{padding:"12px 10px",textAlign:"center"},children:c.bandera}),e.jsx("td",{style:{padding:"12px 10px",textAlign:"center",fontFamily:"monospace"},children:c.imo}),e.jsx("td",{style:{padding:"12px 10px",textAlign:"center"},children:typeof c.eslora=="number"?c.eslora.toFixed(2):"0.00"}),e.jsx("td",{style:{padding:"12px 10px",textAlign:"center"},children:typeof c.manga=="number"?c.manga.toFixed(2):"0.00"}),e.jsx("td",{style:{padding:"12px 10px",textAlign:"center"},children:typeof c.puntal=="number"?c.puntal.toFixed(2):"0.00"}),e.jsx("td",{style:{padding:"12px 10px",textAlign:"center",fontWeight:"700",color:N},children:typeof c.calado=="number"?c.calado.toFixed(2):"0.00"}),e.jsx("td",{style:{padding:"12px 10px",textAlign:"center"},children:e.jsx("span",{style:{display:"inline-block",padding:"4px 12px",background:N,color:"white",borderRadius:"8px",fontSize:"13px",fontWeight:"700"},children:P})}),e.jsx("td",{style:{padding:"12px 10px",textAlign:"center"},children:c.agencia}),e.jsx("td",{style:{padding:"12px 10px",textAlign:"center"},children:e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[e.jsxs("button",{onClick:()=>w(c),style:{padding:"6px 12px",background:"#dbeafe",border:"none",borderRadius:"6px",color:"#1e40af",cursor:"pointer",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(St,{size:14})," Editar"]}),e.jsxs("button",{onClick:()=>J(c.id),style:{padding:"6px 12px",background:"#fee2e2",border:"none",borderRadius:"6px",color:"#dc2626",cursor:"pointer",fontSize:"12px",fontWeight:"600",display:"flex",alignItems:"center",gap:"4px"},children:[e.jsx(At,{size:14})," Eliminar"]})]})})]},c.id)})})]})})})]})})}function Pn(r){return r>=8.84?"A":r>7.32?"B":"C"}function aa(r,t){return console.log("üîÑ calculateReservations - Cruceros:",r.length,"| Buques en DB:",t.length),r.map(n=>{const a=t.find(d=>d.id===n.ship.id);a||console.warn(`‚ö†Ô∏è Buque ${n.ship.buque} (ID: ${n.ship.id}) no encontrado en base de datos`);const o=a?.calado||n.ship.calado,s=Pn(o);console.log(`üö¢ ${n.ship.buque} - Clase ${s} (calado: ${o}m)`);const p={cruiseId:n.id,buque:n.ship.buque,clase:s,agencia:n.ship.agencia,reservaCPIEntrada:"",reservaACCEntrada:"",reservaACCSalida:"",reservaCPISalida:""};if(n.horaEntrada&&(s==="A"||s==="B"))try{const d=new Date(`${v(n.diaEntrada,"yyyy-MM-dd")}T${n.horaEntrada}:00`),g=xt(d,s==="A"?6:6.5);p.reservaCPIEntrada=v(g,"dd/MM/yyyy HH:mm"),console.log(`  ‚úÖ CPI Entrada: ${p.reservaCPIEntrada}`)}catch(d){console.error("  ‚ùå Error CPI Entrada:",d),p.reservaCPIEntrada="Error c√°lculo"}else s==="C"?p.reservaCPIEntrada="No aplica":p.reservaCPIEntrada="N/A";if(n.entry.etaPto)try{const d=new Date(n.entry.etaPto);let h=1.5;s==="A"?h=2.5:s==="B"?h=2:s==="C"&&(h=1.5);const g=xt(d,h);p.reservaACCEntrada=v(g,"dd/MM/yyyy HH:mm"),console.log(`  ‚úÖ ACC Entrada (Clase ${s}): ${p.reservaACCEntrada} (${h}h antes de ETA ${v(d,"HH:mm")})`)}catch(d){console.error("  ‚ùå Error ACC Entrada:",d),p.reservaACCEntrada="Error c√°lculo"}else console.warn(`  ‚ö†Ô∏è No hay etaPto para ${n.ship.buque}`),p.reservaACCEntrada="N/A";if(n.horaSalida)try{const d=new Date(`${v(n.diaSalida,"yyyy-MM-dd")}T${n.horaSalida}:00`);let h=1.5;s==="A"?h=2.5:s==="B"?h=2:s==="C"&&(h=1.5);const g=xt(d,h);p.reservaACCSalida=v(g,"dd/MM/yyyy HH:mm"),console.log(`  ‚úÖ ACC Salida (Clase ${s}): ${p.reservaACCSalida} (${h}h antes de ETD ${v(d,"HH:mm")})`)}catch(d){console.error("  ‚ùå Error ACC Salida:",d),p.reservaACCSalida="Error c√°lculo"}else console.warn(`  ‚ö†Ô∏è No hay horaSalida para ${n.ship.buque}`),p.reservaACCSalida="N/A";if(s==="A"&&n.exit.km239)try{const d=new Date(n.exit.km239),h=new Date(d.getTime()+3*60*60*1e3);p.reservaCPISalida=v(h,"dd/MM/yyyy HH:mm"),console.log(`  ‚úÖ CPI Salida: ${p.reservaCPISalida}`)}catch(d){console.error("  ‚ùå Error CPI Salida:",d),p.reservaCPISalida="Error c√°lculo"}else if(s==="B"&&n.exit.km216)try{const d=new Date(n.exit.km216),h=new Date(d.getTime()+4.5*60*60*1e3);p.reservaCPISalida=v(h,"dd/MM/yyyy HH:mm"),console.log(`  ‚úÖ CPI Salida: ${p.reservaCPISalida}`)}catch(d){console.error("  ‚ùå Error CPI Salida:",d),p.reservaCPISalida="Error c√°lculo"}else s==="C"?p.reservaCPISalida="No aplica":p.reservaCPISalida="N/A";return p})}function Bn({globalSearch:r=""}){const[t,n]=f.useState([]),[a,o]=f.useState([]),[s,p]=f.useState(""),[d,h]=f.useState(null),[g,S]=f.useState({}),[A,M]=f.useState(!0),[T,H]=f.useState([]),[R,l]=f.useState(!1),[m,j]=f.useState({totalReservations:0,cpiHours:0,accHours:0,claseA:0,claseB:0,claseC:0}),[x,b]=f.useState([]),W=(y,u)=>{let k=0,c=0;y.forEach(C=>{if(!u.find(E=>E.id===C.cruiseId))return;const N=C.clase;(N==="A"||N==="B")&&(k+=N==="A"?6:5.5),(N==="A"||N==="B")&&(k+=N==="A"?6:5.5),N==="A"?c+=2.5:N==="B"?c+=2:N==="C"&&(c+=1),N==="A"?c+=2.5:N==="B"?c+=2:N==="C"&&(c+=1)}),j({totalReservations:y.length,cpiHours:Math.round(k*10)/10,accHours:Math.round(c*10)/10,claseA:y.filter(C=>C.clase==="A").length,claseB:y.filter(C=>C.clase==="B").length,claseC:y.filter(C=>C.clase==="C").length})};f.useEffect(()=>{M(!0);try{const y=localStorage.getItem("ship_crossings"),u=localStorage.getItem("channelReservations"),k=localStorage.getItem("reservationHistory");if(k&&H(JSON.parse(k)),y){const c=JSON.parse(y),C=ne(),P=c.map(E=>({...E,diaEntrada:new Date(E.diaEntrada),diaSalida:new Date(E.diaSalida),entry:{...E.entry,km239:E.entry.km239?new Date(E.entry.km239):void 0,km216:E.entry.km216?new Date(E.entry.km216):void 0,km118_5:E.entry.km118_5?new Date(E.entry.km118_5):void 0,km59_in:E.entry.km59_in?new Date(E.entry.km59_in):void 0,km37:E.entry.km37?new Date(E.entry.km37):void 0,km7_3:E.entry.km7_3?new Date(E.entry.km7_3):void 0,etaPto:E.entry.etaPto?new Date(E.entry.etaPto):void 0},exit:{...E.exit,km59:E.exit.km59?new Date(E.exit.km59):void 0,km77:E.exit.km77?new Date(E.exit.km77):void 0,km118_5:E.exit.km118_5?new Date(E.exit.km118_5):void 0,km216:E.exit.km216?new Date(E.exit.km216):void 0,km239:E.exit.km239?new Date(E.exit.km239):void 0}})),N=aa(P,C);if(u){const E=JSON.parse(u),V=N.map(Q=>{const K=E.find(ye=>ye.cruiseId===Q.cruiseId);return K?{...Q,reservaCPIEntrada:K.manualCPIEntrada?K.reservaCPIEntrada:Q.reservaCPIEntrada,reservaACCEntrada:K.manualACCEntrada?K.reservaACCEntrada:Q.reservaACCEntrada,reservaACCSalida:K.manualACCSalida?K.reservaACCSalida:Q.reservaACCSalida,reservaCPISalida:K.manualCPISalida?K.reservaCPISalida:Q.reservaCPISalida,manualCPIEntrada:K.manualCPIEntrada,manualACCEntrada:K.manualACCEntrada,manualACCSalida:K.manualACCSalida,manualCPISalida:K.manualCPISalida}:Q});localStorage.setItem("channelReservations",JSON.stringify(V)),console.log("üíæ Reservas guardadas (merged):",V.length),n(V),o(V),W(V,P)}else localStorage.setItem("channelReservations",JSON.stringify(N)),console.log("üíæ Reservas guardadas (new):",N.length),n(N),o(N),W(N,P)}}catch(y){console.error("Error cargando reservas:",y)}M(!1)},[]),f.useEffect(()=>{const y=(r+" "+s).trim();if(y==="")o(t);else{const u=y.toLowerCase(),k=t.filter(c=>c.buque.toLowerCase().includes(u)||c.agencia.toLowerCase().includes(u)||c.clase.toLowerCase().includes(u));o(k)}},[s,t,r]);const L=y=>{h(y.cruiseId),S({reservaCPIEntrada:y.reservaCPIEntrada,reservaACCEntrada:y.reservaACCEntrada,reservaACCSalida:y.reservaACCSalida,reservaCPISalida:y.reservaCPISalida})},F=y=>{const u=t.find(C=>C.cruiseId===y);if(!u)return;const k=[];if(g.reservaCPIEntrada!==u.reservaCPIEntrada&&k.push({field:"Reserva CPI Entrada",oldValue:u.reservaCPIEntrada,newValue:g.reservaCPIEntrada}),g.reservaACCEntrada!==u.reservaACCEntrada&&k.push({field:"Reserva ACC Entrada",oldValue:u.reservaACCEntrada,newValue:g.reservaACCEntrada}),g.reservaACCSalida!==u.reservaACCSalida&&k.push({field:"Reserva ACC Salida",oldValue:u.reservaACCSalida,newValue:g.reservaACCSalida}),g.reservaCPISalida!==u.reservaCPISalida&&k.push({field:"Reserva CPI Salida",oldValue:u.reservaCPISalida,newValue:g.reservaCPISalida}),k.length>0){const P=[{id:Date.now().toString(),cruiseId:y,buque:u.buque,timestamp:new Date().toISOString(),changes:k,user:"Operador"},...T];H(P),localStorage.setItem("reservationHistory",JSON.stringify(P))}const c=t.map(C=>C.cruiseId===y?{...C,reservaCPIEntrada:g.reservaCPIEntrada,reservaACCEntrada:g.reservaACCEntrada,reservaACCSalida:g.reservaACCSalida,reservaCPISalida:g.reservaCPISalida,manualCPIEntrada:!0,manualACCEntrada:!0,manualACCSalida:!0,manualCPISalida:!0}:C);n(c),localStorage.setItem("channelReservations",JSON.stringify(c)),h(null),S({})},w=()=>{h(null),S({})},J=()=>{const y=["N¬∞","Buque","Clase","Agencia","Reserva CPI Entrada","Reserva ACC Entrada","Reserva ACC Salida","Reserva CPI Salida"],u=a.map((N,E)=>[E+1,N.buque,N.clase,N.agencia,N.reservaCPIEntrada,N.reservaACCEntrada,N.reservaACCSalida,N.reservaCPISalida]),k=[y.join(","),...u.map(N=>N.join(","))].join(`
`),c=new Blob(["\uFEFF"+k],{type:"text/csv;charset=utf-8;"}),C=URL.createObjectURL(c),P=document.createElement("a");P.href=C,P.download=`reservas_canal_${v(new Date,"yyyy-MM-dd_HHmm")}.csv`,P.click(),URL.revokeObjectURL(C)},G=()=>{const y=`
<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Reservas de Canal - ${v(new Date,"dd/MM/yyyy")}</title>
  <style>
    @page { size: A4 landscape; margin: 1cm; }
    body { font-family: Arial, sans-serif; font-size: 10px; }
    h1 { text-align: center; color: #1e40af; margin-bottom: 20px; }
    .stats { display: flex; justify-content: space-around; margin-bottom: 20px; background: #f0f9ff; padding: 15px; border-radius: 8px; }
    .stat-box { text-align: center; }
    .stat-value { font-size: 24px; font-weight: bold; color: #1e40af; }
    .stat-label { font-size: 11px; color: #64748b; margin-top: 5px; }
    table { width: 100%; border-collapse: collapse; margin-top: 10px; }
    th { background: #1e40af; color: white; padding: 10px; text-align: center; font-weight: bold; }
    td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    tr:nth-child(even) { background: #f8fafc; }
    .clase-a { color: #ef4444; font-weight: bold; }
    .clase-b { color: #f59e0b; font-weight: bold; }
    .clase-c { color: #22c55e; font-weight: bold; }
    .footer { margin-top: 20px; text-align: center; color: #64748b; font-size: 9px; }
  </style>
</head>
<body>
  <h1>üìç RESERVAS DE CANAL - CANAL PUNTA INDIO</h1>
  <p style="text-align: center; color: #64748b; margin-bottom: 20px;">
    Generado el ${v(new Date,"dd/MM/yyyy HH:mm")}
  </p>
  
  <div class="stats">
    <div class="stat-box">
      <div class="stat-value">${m.totalReservations}</div>
      <div class="stat-label">Total Reservas</div>
    </div>
    <div class="stat-box">
      <div class="stat-value">${m.cpiHours}h</div>
      <div class="stat-label">Horas CPI Clausurado</div>
    </div>
    <div class="stat-box">
      <div class="stat-value">${m.accHours}h</div>
      <div class="stat-label">Horas ACC Clausurado</div>
    </div>
    <div class="stat-box">
      <div class="stat-value">${m.claseA}</div>
      <div class="stat-label">Clase A</div>
    </div>
    <div class="stat-box">
      <div class="stat-value">${m.claseB}</div>
      <div class="stat-label">Clase B</div>
    </div>
    <div class="stat-box">
      <div class="stat-value">${m.claseC}</div>
      <div class="stat-label">Clase C</div>
    </div>
  </div>

  <table>
    <thead>
      <tr>
        <th>N¬∞</th>
        <th>Buque</th>
        <th>Clase</th>
        <th>Agencia</th>
        <th style="background: #3b82f6;">Reserva CPI Entrada</th>
        <th style="background: #3b82f6;">Reserva ACC Entrada</th>
        <th style="background: #8b5cf6;">Reserva ACC Salida</th>
        <th style="background: #8b5cf6;">Reserva CPI Salida</th>
      </tr>
    </thead>
    <tbody>
      ${a.map((C,P)=>`
        <tr>
          <td>${P+1}</td>
          <td style="text-align: left; font-weight: bold;">${C.buque}</td>
          <td class="clase-${C.clase.toLowerCase()}">${C.clase}</td>
          <td>${C.agencia}</td>
          <td style="background: rgba(59, 130, 246, 0.1);">${C.reservaCPIEntrada}</td>
          <td style="background: rgba(59, 130, 246, 0.1);">${C.reservaACCEntrada}</td>
          <td style="background: rgba(139, 92, 246, 0.1);">${C.reservaACCSalida}</td>
          <td style="background: rgba(139, 92, 246, 0.1);">${C.reservaCPISalida}</td>
        </tr>
      `).join("")}
    </tbody>
  </table>

  <div class="footer">
    Sistema de Gesti√≥n de Cruceros Oce√°nicos - Canal Punta Indio KM 118.5
  </div>
</body>
</html>
    `,u=new Blob([y],{type:"text/html"}),k=URL.createObjectURL(u),c=window.open(k,"_blank");c&&(c.onload=()=>{setTimeout(()=>{c.print()},500)})},Z=y=>{if(!y||y==="No aplica"||y==="Error c√°lculo")return y;try{const[u,k]=y.split(" ");return e.jsxs("div",{style:{fontWeight:"bold"},children:[e.jsx("div",{children:u}),e.jsx("div",{children:k})]})}catch{return y}};return A?e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsxs("div",{style:{textAlign:"center",color:"white",padding:"40px"},children:[e.jsx(Ce,{size:48,style:{margin:"0 auto 20px",animation:"spin 2s linear infinite"}}),e.jsx("h2",{children:"Cargando Reservas de Canal..."}),e.jsx("p",{style:{color:"#93c5fd",marginTop:"10px"},children:"Sincronizando con Sistema de Cruceros"})]})}):e.jsxs("div",{style:{minHeight:"100vh",padding:"20px"},children:[e.jsxs("div",{style:{maxWidth:"1800px",margin:"0 auto"},children:[e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(10px)",borderRadius:"16px",padding:"25px",marginBottom:"30px",border:"1px solid rgba(255, 255, 255, 0.2)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",flexWrap:"wrap",gap:"20px"},children:[e.jsxs("div",{children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px",marginBottom:"10px"},children:[e.jsx(We,{size:32,style:{color:"#60a5fa"}}),e.jsx("h1",{style:{fontSize:"28px",margin:0,fontWeight:"bold",color:"white"},children:"RESERVAS DE CANAL"})]}),e.jsx("p",{style:{fontSize:"14px",margin:0,color:"#93c5fd"},children:"üìç Canal Punta Indio - Gesti√≥n autom√°tica de reservas sincronizadas con Sistema de Cruceros"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",flexWrap:"wrap"},children:[e.jsxs("button",{onClick:J,style:{...ft,background:"#10b981"},title:"Exportar a Excel (CSV)",children:[e.jsx(Ze,{size:16})," Excel"]}),e.jsxs("button",{onClick:G,style:{...ft,background:"#ef4444"},title:"Exportar a PDF",children:[e.jsx(Ze,{size:16})," PDF"]}),e.jsxs("button",{onClick:()=>l(!R),style:{...ft,background:"#8b5cf6"},title:"Ver historial de cambios",children:[e.jsx(ct,{size:16})," Historial"]})]})]})}),e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",padding:"15px 20px",marginBottom:"25px",display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(vt,{size:20,style:{color:"#60a5fa",flexShrink:0}}),e.jsxs("div",{style:{color:"#93c5fd",fontSize:"13px",lineHeight:"1.5"},children:[e.jsx("strong",{style:{color:"#fff"},children:"Sincronizaci√≥n autom√°tica:"})," Las reservas se calculan autom√°ticamente desde los datos del Sistema de Cruceros. Puede realizar ajustes operativos usando el bot√≥n de edici√≥n en cada fila."]})]}),e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"20px",marginBottom:"25px",border:"1px solid rgba(255, 255, 255, 0.1)"},children:e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[e.jsx(Ct,{size:20,style:{color:"#60a5fa"}}),e.jsx("input",{type:"text",placeholder:"Buscar por buque, agencia o clase...",value:s,onChange:y=>p(y.target.value),style:{flex:1,background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",padding:"10px 15px",color:"white",fontSize:"14px",outline:"none"}}),s&&e.jsxs("span",{style:{color:"#93c5fd",fontSize:"13px"},children:[a.length," resultado(s)"]})]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(180px, 1fr))",gap:"15px",marginBottom:"30px"},children:[e.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#10b981",marginBottom:"5px"},children:m.totalReservations}),e.jsx("div",{style:{fontSize:"13px",color:"#6ee7b7"},children:"Total Reservas"})]}),e.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"5px"},children:[e.jsx(bt,{size:24,style:{color:"#3b82f6"}}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#3b82f6"},children:[m.cpiHours,"h"]})]}),e.jsx("div",{style:{fontSize:"13px",color:"#93c5fd"},children:"Horas CPI Clausurado"})]}),e.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"5px"},children:[e.jsx(bt,{size:24,style:{color:"#8b5cf6"}}),e.jsxs("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#8b5cf6"},children:[m.accHours,"h"]})]}),e.jsx("div",{style:{fontSize:"13px",color:"#c4b5fd"},children:"Horas ACC Clausurado"})]}),e.jsxs("div",{style:{background:"rgba(239, 68, 68, 0.1)",border:"1px solid rgba(239, 68, 68, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#ef4444",marginBottom:"5px"},children:m.claseA}),e.jsx("div",{style:{fontSize:"13px",color:"#fca5a5"},children:"Clase A"})]}),e.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#f59e0b",marginBottom:"5px"},children:m.claseB}),e.jsx("div",{style:{fontSize:"13px",color:"#fcd34d"},children:"Clase B"})]}),e.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",borderRadius:"12px",padding:"20px",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"32px",fontWeight:"bold",color:"#22c55e",marginBottom:"5px"},children:m.claseC}),e.jsx("div",{style:{fontSize:"13px",color:"#86efac"},children:"Clase C"})]})]}),R&&e.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,background:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(5px)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,padding:"20px"},children:e.jsxs("div",{style:{background:"linear-gradient(135deg, #1e293b 0%, #334155 100%)",borderRadius:"16px",padding:"30px",width:"100%",maxWidth:"900px",maxHeight:"80vh",overflowY:"auto",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.3)"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"25px"},children:[e.jsxs("h2",{style:{fontSize:"24px",fontWeight:"bold",margin:0,color:"white",display:"flex",alignItems:"center",gap:"10px"},children:[e.jsx(ct,{size:28,style:{color:"#8b5cf6"}}),"Historial de Cambios"]}),e.jsx("button",{onClick:()=>l(!1),style:{background:"transparent",border:"none",color:"#93c5fd",cursor:"pointer",padding:"8px"},children:e.jsx(be,{size:24})})]}),T.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:"#cbd5e1"},children:[e.jsx(ct,{size:48,style:{opacity:.3,margin:"0 auto 15px"}}),e.jsx("p",{style:{fontSize:"16px",margin:0},children:"No hay cambios registrados todav√≠a"})]}):e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"15px"},children:T.map(y=>e.jsxs("div",{style:{background:"rgba(255, 255, 255, 0.05)",border:"1px solid rgba(255, 255, 255, 0.1)",borderRadius:"12px",padding:"20px"},children:[e.jsx("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"12px"},children:e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"white",marginBottom:"4px"},children:y.buque}),e.jsxs("div",{style:{fontSize:"12px",color:"#94a3b8"},children:["Por ",y.user," ‚Ä¢ ",v(new Date(y.timestamp),"dd/MM/yyyy HH:mm")]})]})}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:y.changes.map((u,k)=>e.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.3)",borderRadius:"8px",padding:"12px",fontSize:"13px"},children:[e.jsx("div",{style:{color:"#c4b5fd",marginBottom:"6px",fontWeight:"600"},children:u.field}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",color:"#e2e8f0"},children:[e.jsx("span",{style:{textDecoration:"line-through",opacity:.6},children:u.oldValue}),e.jsx("span",{children:"‚Üí"}),e.jsx("span",{style:{fontWeight:"bold",color:"#8b5cf6"},children:u.newValue})]})]},k))})]},y.id))})]})}),e.jsx("div",{style:{background:"rgba(255, 255, 255, 0.05)",backdropFilter:"blur(10px)",borderRadius:"12px",padding:"0",border:"1px solid rgba(255, 255, 255, 0.1)",overflow:"hidden"},children:a.length===0?e.jsxs("div",{style:{padding:"60px 20px",textAlign:"center",color:"#cbd5e1"},children:[e.jsx(We,{size:48,style:{opacity:.3,margin:"0 auto 15px"}}),e.jsx("p",{style:{fontSize:"16px",margin:0},children:s?"No se encontraron reservas con ese criterio":"No hay cruceros programados en el Sistema de Cruceros"})]}):e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"1400px"},children:[e.jsxs("thead",{children:[e.jsxs("tr",{style:{background:"rgba(255, 255, 255, 0.1)"},children:[e.jsx("th",{style:re,children:"Buque"}),e.jsx("th",{style:re,children:"Clase"}),e.jsx("th",{style:re,children:"Agencia"}),e.jsx("th",{style:{...re,background:"rgba(59, 130, 246, 0.2)"},colSpan:2,children:"ENTRADA"}),e.jsx("th",{style:{...re,background:"rgba(139, 92, 246, 0.2)"},colSpan:2,children:"SALIDA"}),e.jsx("th",{style:re,children:"Acciones"})]}),e.jsxs("tr",{style:{background:"rgba(255, 255, 255, 0.08)"},children:[e.jsx("th",{style:re}),e.jsx("th",{style:re}),e.jsx("th",{style:re}),e.jsx("th",{style:{...re,background:"rgba(59, 130, 246, 0.15)"},children:"Reserva CPI"}),e.jsx("th",{style:{...re,background:"rgba(59, 130, 246, 0.15)"},children:"Reserva ACC"}),e.jsx("th",{style:{...re,background:"rgba(139, 92, 246, 0.15)"},children:"Reserva ACC"}),e.jsx("th",{style:{...re,background:"rgba(139, 92, 246, 0.15)"},children:"Reserva CPI"}),e.jsx("th",{style:re})]})]}),e.jsx("tbody",{children:a.map((y,u)=>{const k=d===y.cruiseId,c=u%2===1;return e.jsxs("tr",{style:{background:c?"rgba(255, 255, 255, 0.02)":"transparent",borderBottom:"1px solid rgba(255, 255, 255, 0.05)"},children:[e.jsx("td",{style:fe,children:y.buque}),e.jsx("td",{style:fe,children:e.jsx("span",{style:{padding:"4px 12px",borderRadius:"6px",fontSize:"12px",fontWeight:"bold",background:y.clase==="A"?"rgba(239, 68, 68, 0.2)":y.clase==="B"?"rgba(245, 158, 11, 0.2)":"rgba(34, 197, 94, 0.2)",color:y.clase==="A"?"#fca5a5":y.clase==="B"?"#fcd34d":"#86efac"},children:y.clase})}),e.jsx("td",{style:fe,children:y.agencia}),e.jsx("td",{style:{...fe,background:"rgba(59, 130, 246, 0.05)"},children:k?e.jsx("input",{type:"text",value:g.reservaCPIEntrada,onChange:C=>S({...g,reservaCPIEntrada:C.target.value}),placeholder:"dd/MM/yyyy HH:mm",style:Ue}):Z(y.reservaCPIEntrada)}),e.jsx("td",{style:{...fe,background:"rgba(59, 130, 246, 0.05)"},children:k?e.jsx("input",{type:"text",value:g.reservaACCEntrada,onChange:C=>S({...g,reservaACCEntrada:C.target.value}),placeholder:"dd/MM/yyyy HH:mm",style:Ue}):Z(y.reservaACCEntrada)}),e.jsx("td",{style:{...fe,background:"rgba(139, 92, 246, 0.05)"},children:k?e.jsx("input",{type:"text",value:g.reservaACCSalida,onChange:C=>S({...g,reservaACCSalida:C.target.value}),placeholder:"dd/MM/yyyy HH:mm",style:Ue}):Z(y.reservaACCSalida)}),e.jsx("td",{style:{...fe,background:"rgba(139, 92, 246, 0.05)"},children:k?e.jsx("input",{type:"text",value:g.reservaCPISalida,onChange:C=>S({...g,reservaCPISalida:C.target.value}),placeholder:"dd/MM/yyyy HH:mm",style:Ue}):Z(y.reservaCPISalida)}),e.jsx("td",{style:fe,children:k?e.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[e.jsx("button",{onClick:()=>F(y.cruiseId),style:{...mt,background:"#10b981"},title:"Guardar",children:e.jsx(Xe,{size:16})}),e.jsx("button",{onClick:w,style:{...mt,background:"#ef4444"},title:"Cancelar",children:e.jsx(be,{size:16})})]}):e.jsx("button",{onClick:()=>L(y),style:{...mt,background:"#3b82f6"},title:"Editar reservas",children:e.jsx(St,{size:16})})})]},y.cruiseId)})})]})})})]}),e.jsx("style",{children:`
        @keyframes spin {
          to { transform: rotate(360deg); }
        }
        
        @media (max-width: 768px) {
          .stats-grid {
            grid-template-columns: repeat(2, 1fr) !important;
          }
          
          table {
            font-size: 11px !important;
          }
          
          th, td {
            padding: 8px 6px !important;
          }
        }
        
        @media (max-width: 480px) {
          .stats-grid {
            grid-template-columns: 1fr !important;
          }
        }
      `})]})}const re={padding:"16px 12px",textAlign:"center",fontSize:"13px",fontWeight:"bold",color:"#93c5fd",borderBottom:"2px solid rgba(255, 255, 255, 0.1)",textTransform:"uppercase",letterSpacing:"0.5px"},fe={padding:"16px 12px",textAlign:"center",fontSize:"13px",color:"#e2e8f0"},mt={padding:"8px 12px",border:"none",borderRadius:"6px",color:"white",cursor:"pointer",transition:"all 0.2s",display:"inline-flex",alignItems:"center",justifyContent:"center",fontSize:"13px",fontWeight:"600"},Ue={width:"100%",padding:"6px 10px",background:"rgba(255, 255, 255, 0.1)",border:"1px solid rgba(255, 255, 255, 0.3)",borderRadius:"6px",color:"white",fontSize:"12px",textAlign:"center",outline:"none"},ft={padding:"10px 20px",border:"none",borderRadius:"8px",color:"white",cursor:"pointer",fontSize:"13px",fontWeight:"600",display:"flex",alignItems:"center",gap:"8px",transition:"all 0.2s"};function _n(){const[r,t]=f.useState("dashboard"),[n,a]=f.useState(""),[o,s]=f.useState(!1),[p,d]=f.useState(null);if(f.useEffect(()=>{console.log("üöÄ MainApp - Inicializando sistema...");try{if(typeof window>"u"||!window.localStorage)throw new Error("localStorage no disponible");console.log("üìö Verificando base de datos de buques...");let g=ne();!g||g.length===0?(console.warn("‚ö†Ô∏è Base de datos vac√≠a, reinicializando..."),localStorage.removeItem("ships_database"),g=ne(),console.log("‚úÖ Base de datos reinicializada con",g.length,"buques")):console.log("‚úÖ Base de datos cargada:",g.length,"buques"),console.log("üîÑ Verificando migraci√≥n de datos...");const S=localStorage.getItem("ship_crossings");if(S){const M=JSON.parse(S);let T=!1;const H=M.map(R=>{const l=R.entry?.etaPto,m=R.exit?.etdPto;if(!l||!m){T=!0,console.log(`üîß Migrando crucero: ${R.nombreBuque}`);const j=g.find(x=>x.buque===R.nombreBuque);if(j)try{if(R.diaEntrada&&R.horaEntrada){const x=typeof R.diaEntrada=="string"?R.diaEntrada:new Date(R.diaEntrada).toISOString().split("T")[0],b=new Date(`${x}T${R.horaEntrada}:00`);isNaN(b.getTime())||(R.entry=ue(j,b))}if(R.diaSalida&&R.horaSalida){const x=typeof R.diaSalida=="string"?R.diaSalida:new Date(R.diaSalida).toISOString().split("T")[0],b=new Date(`${x}T${R.horaSalida}:00`);isNaN(b.getTime())||(R.exit=xe(j,b))}}catch(x){console.error("‚ùå Error migrando crucero:",R.nombreBuque,x)}}return R});T?(localStorage.setItem("ship_crossings",JSON.stringify(H)),console.log("‚úÖ Migraci√≥n completada:",H.length,"cruceros actualizados")):console.log("‚úÖ No se requiere migraci√≥n, todos los cruceros est√°n actualizados")}console.log("üìä Pre-calculando reservas...");const A=localStorage.getItem("ship_crossings");if(A){const T=JSON.parse(A).map(l=>({...l,diaEntrada:new Date(l.diaEntrada),diaSalida:new Date(l.diaSalida),entry:{...l.entry,km239:l.entry.km239?new Date(l.entry.km239):void 0,km216:l.entry.km216?new Date(l.entry.km216):void 0,km118_5:l.entry.km118_5?new Date(l.entry.km118_5):void 0,km59_in:l.entry.km59_in?new Date(l.entry.km59_in):void 0,km37:l.entry.km37?new Date(l.entry.km37):void 0,km7_3:l.entry.km7_3?new Date(l.entry.km7_3):void 0,etaPto:l.entry.etaPto?new Date(l.entry.etaPto):void 0},exit:{...l.exit,km59:l.exit.km59?new Date(l.exit.km59):void 0,km77:l.exit.km77?new Date(l.exit.km77):void 0,km118_5:l.exit.km118_5?new Date(l.exit.km118_5):void 0,km216:l.exit.km216?new Date(l.exit.km216):void 0,km239:l.exit.km239?new Date(l.exit.km239):void 0}})),H=aa(T,g),R=localStorage.getItem("channelReservations");if(R){const l=JSON.parse(R),m=H.map(b=>l.find(L=>L.cruiseId===b.cruiseId)||b),j=H.filter(b=>!l.some(W=>W.cruiseId===b.cruiseId)),x=[...m,...j];localStorage.setItem("channelReservations",JSON.stringify(x)),console.log("‚úÖ Reservas actualizadas:",x.length)}else localStorage.setItem("channelReservations",JSON.stringify(H)),console.log("‚úÖ Reservas inicializadas:",H.length)}s(!0),console.log("‚úÖ Sistema inicializado correctamente")}catch(g){console.error("‚ùå Error inicializando sistema:",g),d(g instanceof Error?g.message:"Error desconocido"),s(!0)}},[]),!o)return e.jsxs("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#1565c0",color:"white"},children:[e.jsxs("div",{style:{textAlign:"center"},children:[e.jsx("div",{style:{width:"60px",height:"60px",border:"4px solid rgba(255,255,255,0.3)",borderTopColor:"white",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),e.jsx("h2",{style:{fontSize:"24px",margin:"0 0 10px 0"},children:"Inicializando Sistema..."}),e.jsx("p",{style:{margin:0,opacity:.8},children:"Cargando base de datos de buques"})]}),e.jsx("style",{children:`
          @keyframes spin {
            to { transform: rotate(360deg); }
          }
        `})]});if(p)return e.jsx("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#1565c0",color:"white",padding:"20px"},children:e.jsxs("div",{style:{background:"rgba(220, 38, 38, 0.2)",border:"2px solid #dc2626",borderRadius:"12px",padding:"30px",maxWidth:"500px",textAlign:"center"},children:[e.jsx("h2",{style:{fontSize:"24px",margin:"0 0 15px 0"},children:"‚ö†Ô∏è Error de Inicializaci√≥n"}),e.jsx("p",{style:{margin:"0 0 20px 0",opacity:.9},children:p}),e.jsx("button",{onClick:()=>window.location.reload(),style:{background:"white",color:"#1565c0",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"16px",fontWeight:"600",cursor:"pointer"},children:"üîÑ Reintentar"})]})});const h=[{id:"dashboard",label:"Dashboard",icon:Ua},{id:"database",label:"Base de Datos",icon:La},{id:"crossings",label:"Sistema de Cruceros",icon:Se},{id:"reservations",label:"Reservas de Canal",icon:We}];return e.jsxs("div",{style:{minHeight:"100vh",background:"#1565c0"},children:[e.jsx("div",{style:{background:"#1e88e5",borderBottom:"3px solid #0d47a1",position:"sticky",top:0,zIndex:100},children:e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",padding:"15px 20px"},children:[e.jsx("div",{style:{marginBottom:"15px",display:"flex",gap:"15px",alignItems:"center"},children:e.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"600px"},children:[e.jsx("input",{type:"text",placeholder:"üîç Buscar por nombre de buque, IMO, agencia, bandera...",value:n,onChange:g=>a(g.target.value),style:{width:"100%",padding:"12px 45px 12px 45px",borderRadius:"10px",border:"2px solid rgba(255, 255, 255, 0.3)",background:"rgba(255, 255, 255, 0.95)",fontSize:"14px",color:"#0d47a1",fontWeight:"500",outline:"none",transition:"all 0.2s"},onFocus:g=>{g.currentTarget.style.borderColor="#ffffff",g.currentTarget.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.15)"},onBlur:g=>{g.currentTarget.style.borderColor="rgba(255, 255, 255, 0.3)",g.currentTarget.style.boxShadow="none"}}),n&&e.jsx("button",{onClick:()=>a(""),style:{position:"absolute",right:"12px",top:"50%",transform:"translateY(-50%)",background:"transparent",border:"none",color:"#64748b",cursor:"pointer",padding:"4px",display:"flex",alignItems:"center"},children:"‚úï"})]})}),e.jsx("div",{style:{display:"flex",gap:"10px"},children:h.map(g=>{const S=g.icon,A=r===g.id;return e.jsxs("button",{onClick:()=>t(g.id),style:{padding:"14px 28px",background:A?"#ffffff":"transparent",border:A?"3px solid #0d47a1":"3px solid transparent",borderRadius:"8px",color:A?"#0d47a1":"white",cursor:"pointer",fontWeight:A?"700":"600",fontSize:"15px",display:"flex",alignItems:"center",gap:"10px",transition:"all 0.2s ease",boxShadow:"none"},onMouseOver:M=>{A||(M.currentTarget.style.background="rgba(255, 255, 255, 0.15)")},onMouseOut:M=>{A||(M.currentTarget.style.background="transparent")},children:[e.jsx(S,{size:20}),g.label]},g.id)})})]})}),e.jsxs("div",{style:{flex:1,padding:"0"},children:[r==="dashboard"&&e.jsx(Nn,{}),r==="database"&&e.jsx(On,{globalSearch:n}),r==="crossings"&&e.jsx(Dn,{globalSearch:n}),r==="reservations"&&e.jsx(Bn,{globalSearch:n})]}),e.jsx("footer",{style:{background:"#0d47a1",borderTop:"3px solid #1565c0",color:"white",padding:"20px",marginTop:"40px"},children:e.jsxs("div",{style:{maxWidth:"1400px",margin:"0 auto",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"20px"},children:[e.jsxs("div",{style:{fontSize:"14px"},children:[e.jsx("p",{style:{margin:"0 0 5px 0",fontWeight:"600"},children:"¬© 2026 Sistema de Gesti√≥n de Cruceros Oce√°nicos"}),e.jsx("p",{style:{margin:0,opacity:.85,fontSize:"13px"},children:"Todos los derechos reservados"})]}),e.jsxs("div",{style:{fontSize:"14px",textAlign:"right"},children:[e.jsx("p",{style:{margin:"0 0 5px 0",fontWeight:"600"},children:"üìß Contacto"}),e.jsx("p",{style:{margin:"0 0 5px 0",opacity:.95,fontSize:"13px"},children:"Alfredo Jes√∫s Zappa"}),e.jsx("p",{style:{margin:0,opacity:.85,fontSize:"13px"},children:"alfredojesus.zappa@gmail.com"})]})]})})]})}export{_n as MainApp};
